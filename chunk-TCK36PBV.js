import{a as fr}from"./chunk-WKRXE7MQ.js";import{f as or,g as rr,h as ar,i as lr,j as hi,k as hr,l as Vt,m as cr,n as yn,o as dr,p as ur,q as ci,r as di,s as mr}from"./chunk-CBYNTH7K.js";import{a as er}from"./chunk-SNMO6HRS.js";import{a as ir,b as sr,c as ri}from"./chunk-UGEEXZWB.js";import{e as Xo,h as Go,l as $o}from"./chunk-JA67I3LB.js";import{$ as X,$b as bn,Aa as ke,Ab as ei,B as wo,Ba as mn,C as Pt,Ca as fn,Cb as Ao,Cc as Te,D as gt,Da as pn,Dc as oi,E as Yt,Ea as P,Eb as Fo,Ec as nr,Fa as _,Fb as No,Fc as ai,Ga as v,Gb as Vo,Gc as li,Ha as K,Hb as Ho,I as lt,Ia as gn,J as Rt,Ja as To,Jb as Yo,K as $,Ka as Eo,L as cn,La as Do,M as b,Ma as Po,Mb as jo,N as Qe,Nb as le,O as M,Oa as st,P as x,Pa as Ro,Q as Mo,Qa as R,Ra as Io,S as H,Sa as I,Sb as Wo,T as ht,Ta as Wt,Ua as Bt,Va as vt,Wa as F,Wb as Uo,Xa as E,Ya as D,Z as xe,Zb as Qo,_ as It,_b as Ko,a as pt,aa as Ke,ab as yt,ac as Ut,b as se,ba as xo,bb as Oo,ca as So,cb as q,d as U,da as w,db as re,dc as ii,ea as bt,eb as S,ec as qo,f as bo,fa as qe,fb as Ct,fc as Xt,ga as jt,gb as ae,gc as _n,h as W,ha as Ot,hb as zo,hc as Zo,ia as ko,ib as Lo,j as ln,ja as zt,jb as Bo,jc as he,kb as At,kc as ni,l as _o,la as dn,lc as si,ma as Y,mb as ot,n as Me,na as Lt,nb as Je,nc as Gt,oa as G,ob as Ft,oc as Jo,p as it,pb as ti,pc as ce,q as hn,qa as ct,qc as z,ra as nt,s as vo,sa as Ze,t as Dt,ta as O,tc as tr,u as oe,ua as J,va as _t,vc as vn,x as yo,xa as un,xb as Nt,y as Co,ya as Q,yc as $t,za as Se,zb as N}from"./chunk-CNGNWRF7.js";var Ee=class{_attachedHost;attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},Cn=class extends Ee{component;viewContainerRef;injector;projectableNodes;constructor(t,e,i,n){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.projectableNodes=n}},wt=class extends Ee{templateRef;viewContainerRef;context;injector;constructor(t,e,i,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}},wn=class extends Ee{element;constructor(t){super(),this.element=t instanceof X?t.nativeElement:t}},ui=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof Cn)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof wt)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof wn)return this._attachedPortal=t,this.attachDomPortal(t)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},De=class extends ui{outletElement;_appRef;_defaultInjector;constructor(t,e,i){super(),this.outletElement=t,this._appRef=e,this._defaultInjector=i}attachComponentPortal(t){let e;if(t.viewContainerRef){let i=t.injector||t.viewContainerRef.injector,n=i.get(dn,null,{optional:!0})||void 0;e=t.viewContainerRef.createComponent(t.component,{index:t.viewContainerRef.length,injector:i,ngModuleRef:n,projectableNodes:t.projectableNodes||void 0}),this.setDisposeFn(()=>e.destroy())}else{let i=this._appRef,n=t.injector||this._defaultInjector||H.NULL,o=n.get(Qe,i.injector);e=Ao(t.component,{elementInjector:n,environmentInjector:o,projectableNodes:t.projectableNodes||void 0}),i.attachView(e.hostView),this.setDisposeFn(()=>{i.viewCount>0&&i.detachView(e.hostView),e.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(e)),this._attachedPortal=t,e}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(n=>this.outletElement.appendChild(n)),i.detectChanges(),this.setDisposeFn(()=>{let n=e.indexOf(i);n!==-1&&e.remove(n)}),this._attachedPortal=t,i}attachDomPortal=t=>{let e=t.element;e.parentNode;let i=this.outletElement.ownerDocument.createComment("dom-portal");e.parentNode.insertBefore(i,e),this.outletElement.appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(e,i)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}},pr=(()=>{class s extends wt{constructor(){let e=b(bt),i=b(zt);super(e,i)}static \u0275fac=function(i){return new(i||s)};static \u0275dir=G({type:s,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[ct]})}return s})();var Mn=(()=>{class s extends ui{_moduleRef=b(dn,{optional:!0});_document=b(ht);_viewContainerRef=b(zt);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}attached=new O;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);let i=e.viewContainerRef!=null?e.viewContainerRef:this._viewContainerRef,n=i.createComponent(e.component,{index:i.length,injector:e.injector||i.injector,projectableNodes:e.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return i!==this._viewContainerRef&&this._getRootNode().appendChild(n.hostView.rootNodes[0]),super.setDisposeFn(()=>n.destroy()),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}attachTemplatePortal(e){e.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}attachDomPortal=e=>{let i=e.element;i.parentNode;let n=this._document.createComment("dom-portal");e.setAttachedHost(this),i.parentNode.insertBefore(n,i),this._getRootNode().appendChild(i),this._attachedPortal=e,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(i,n)})};_getRootNode(){let e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static \u0275fac=function(i){return new(i||s)};static \u0275dir=G({type:s,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[ct]})}return s})();var gr=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275mod=Lt({type:s});static \u0275inj=Rt({})}return s})();var br=tr();function xr(s){return new mi(s.get(Vt),s.get(ht))}var mi=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(t,e){this._viewportRuler=t,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=z(-this._previousScrollPosition.left),t.style.top=z(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,e=this._document.body,i=t.style,n=e.style,o=i.scrollBehavior||"",r=n.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),br&&(i.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),br&&(i.scrollBehavior=o,n.scrollBehavior=r)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.documentElement,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}};function Sr(s,t){return new fi(s.get(hi),s.get(J),s.get(Vt),t)}var fi=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(t,e,i,n){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=n}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(oe(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var Pe=class{enable(){}disable(){}attach(){}};function xn(s,t){return t.some(e=>{let i=s.bottom<e.top,n=s.top>e.bottom,o=s.right<e.left,r=s.left>e.right;return i||n||o||r})}function _r(s,t){return t.some(e=>{let i=s.top<e.top,n=s.bottom>e.bottom,o=s.left<e.left,r=s.right>e.right;return i||n||o||r})}function qt(s,t){return new pi(s.get(hi),s.get(Vt),s.get(J),t)}var pi=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(t,e,i,n){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=n}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:n}=this._viewportRuler.getViewportSize();xn(e,[{width:i,height:n,bottom:n,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},kr=(()=>{class s{_injector=b(H);constructor(){}noop=()=>new Pe;close=e=>Sr(this._injector,e);block=()=>xr(this._injector);reposition=e=>qt(this._injector,e);static \u0275fac=function(i){return new(i||s)};static \u0275prov=lt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),de=class{positionStrategy;scrollStrategy=new Pe;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(t){if(t){let e=Object.keys(t);for(let i of e)t[i]!==void 0&&(this[i]=t[i])}}};var gi=class{connectionPair;scrollableViewProperties;constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}};var Tr=(()=>{class s{_attachedOverlays=[];_document=b(ht);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(i){return new(i||s)};static \u0275prov=lt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),Er=(()=>{class s extends Tr{_ngZone=b(J);_renderer=b(qe).createRenderer(null,null);_cleanupKeydown;add(e){super.add(e),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=e=>{let i=this._attachedOverlays;for(let n=i.length-1;n>-1;n--)if(i[n]._keydownEvents.observers.length>0){this._ngZone.run(()=>i[n]._keydownEvents.next(e));break}};static \u0275fac=(()=>{let e;return function(n){return(e||(e=It(s)))(n||s)}})();static \u0275prov=lt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),Dr=(()=>{class s extends Tr{_platform=b(Ut);_ngZone=b(J);_renderer=b(qe).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(e){if(super.add(e),!this._isAttached){let i=this._document.body,n={capture:!0},o=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[o.listen(i,"pointerdown",this._pointerDownListener,n),o.listen(i,"click",this._clickListener,n),o.listen(i,"auxclick",this._clickListener,n),o.listen(i,"contextmenu",this._clickListener,n)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(e=>e()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=e=>{this._pointerDownEventTarget=bn(e)};_clickListener=e=>{let i=bn(e),n=e.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:i;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let r=o.length-1;r>-1;r--){let a=o[r];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(vr(a.overlayElement,i)||vr(a.overlayElement,n))break;let l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(e)):l.next(e)}};static \u0275fac=(()=>{let e;return function(n){return(e||(e=It(s)))(n||s)}})();static \u0275prov=lt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function vr(s,t){let e=typeof ShadowRoot<"u"&&ShadowRoot,i=t;for(;i;){if(i===s)return!0;i=e&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var Pr=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275cmp=Y({type:s,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(i,n){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return s})(),Rr=(()=>{class s{_platform=b(Ut);_containerElement;_document=b(ht);_styleLoader=b(Xt);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||vn()){let n=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<n.length;o++)n[o].remove()}let i=this._document.createElement("div");i.classList.add(e),vn()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}_loadStyles(){this._styleLoader.load(Pr)}static \u0275fac=function(i){return new(i||s)};static \u0275prov=lt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),Sn=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(t,e,i,n){this._renderer=e,this._ngZone=i,this.element=t.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=e.listen(this.element,"click",n)}detach(){this._ngZone.runOutsideAngular(()=>{let t=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(t,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),t.style.pointerEvents="none",t.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},bi=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new W;_attachments=new W;_detachments=new W;_positionStrategy;_scrollStrategy;_locationChanges=U.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new W;_outsidePointerEvents=new W;_afterNextRenderRef;constructor(t,e,i,n,o,r,a,l,h,c=!1,d,u){this._portalOutlet=t,this._host=e,this._pane=i,this._config=n,this._ngZone=o,this._keyboardDispatcher=r,this._document=a,this._location=l,this._outsideClickDispatcher=h,this._animationsDisabled=c,this._injector=d,this._renderer=u,n.scrollStrategy&&(this._scrollStrategy=n.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=n.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=_t(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,t&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=pt(pt({},this._config),t),this._updateElementSize()}setDirection(t){this._config=se(pt({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=z(this._config.width),t.height=z(this._config.height),t.minWidth=z(this._config.minWidth),t.minHeight=z(this._config.minHeight),t.maxWidth=z(this._config.maxWidth),t.maxHeight=z(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new Sn(this._document,this._renderer,this._ngZone,e=>{this._backdropClick.next(e)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(t))}):this._backdropRef.element.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(t,e,i){let n=_n(e||[]).filter(o=>!!o);n.length&&(i?t.classList.add(...n):t.classList.remove(...n))}_detachContentWhenEmpty(){let t=!1;try{this._detachContentAfterRenderRef=_t(()=>{t=!0,this._detachContent()},{injector:this._injector})}catch(e){if(t)throw e;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let t=this._scrollStrategy;t?.disable(),t?.detach?.()}},yr="cdk-overlay-connected-position-bounding-box",sl=/([A-Za-z%]+)$/;function yi(s,t){return new _i(t,s.get(Vt),s.get(ht),s.get(Ut),s.get(Rr))}var _i=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new W;_resizeSubscription=U.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(t,e,i,n,o){this._viewportRuler=e,this._document=i,this._platform=n,this._overlayContainer=o,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(yr),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,e=this._overlayRect,i=this._viewportRect,n=this._containerRect,o=[],r;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,n,a),h=this._getOverlayPoint(l,e,a),c=this._getOverlayFit(h,e,i,a);if(c.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(c,h,i)){o.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!r||r.overlayFit.visibleArea<c.visibleArea)&&(r={overlayFit:c,overlayPoint:h,originPoint:l,position:a,overlayRect:e})}if(o.length){let a=null,l=-1;for(let h of o){let c=h.boundingBoxRect.width*h.boundingBoxRect.height*(h.position.weight||1);c>l&&(l=c,a=h)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(r.position,r.originPoint);return}this._applyPosition(r.position,r.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Kt(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(yr),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let n;if(i.originX=="center")n=t.left+t.width/2;else{let r=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;n=i.originX=="start"?r:a}e.left<0&&(n-=e.left);let o;return i.originY=="center"?o=t.top+t.height/2:o=i.originY=="top"?t.top:t.bottom,e.top<0&&(o-=e.top),{x:n,y:o}}_getOverlayPoint(t,e,i){let n;i.overlayX=="center"?n=-e.width/2:i.overlayX==="start"?n=this._isRtl()?-e.width:0:n=this._isRtl()?0:-e.width;let o;return i.overlayY=="center"?o=-e.height/2:o=i.overlayY=="top"?0:-e.height,{x:t.x+n,y:t.y+o}}_getOverlayFit(t,e,i,n){let o=wr(e),{x:r,y:a}=t,l=this._getOffset(n,"x"),h=this._getOffset(n,"y");l&&(r+=l),h&&(a+=h);let c=0-r,d=r+o.width-i.width,u=0-a,m=a+o.height-i.height,f=this._subtractOverflows(o.width,c,d),p=this._subtractOverflows(o.height,u,m),y=f*p;return{visibleArea:y,isCompletelyWithinViewport:o.width*o.height===y,fitsInViewportVertically:p===o.height,fitsInViewportHorizontally:f==o.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){let n=i.bottom-e.y,o=i.right-e.x,r=Cr(this._overlayRef.getConfig().minHeight),a=Cr(this._overlayRef.getConfig().minWidth),l=t.fitsInViewportVertically||r!=null&&r<=n,h=t.fitsInViewportHorizontally||a!=null&&a<=o;return l&&h}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let n=wr(e),o=this._viewportRect,r=Math.max(t.x+n.width-o.width,0),a=Math.max(t.y+n.height-o.height,0),l=Math.max(o.top-i.top-t.y,0),h=Math.max(o.left-i.left-t.x,0),c=0,d=0;return n.width<=o.width?c=h||-r:c=t.x<this._viewportMargin?o.left-i.left-t.x:0,n.height<=o.height?d=l||-a:d=t.y<this._viewportMargin?o.top-i.top-t.y:0,this._previousPushAmount={x:c,y:d},{x:t.x+c,y:t.y+d}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!ol(this._lastScrollVisibility,i)){let n=new gi(t,i);this._positionChanges.next(n)}this._lastScrollVisibility=i}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,n=t.overlayY;t.overlayX==="center"?i="center":this._isRtl()?i=t.overlayX==="start"?"right":"left":i=t.overlayX==="start"?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${i} ${n}`}_calculateBoundingBoxRect(t,e){let i=this._viewportRect,n=this._isRtl(),o,r,a;if(e.overlayY==="top")r=t.y,o=i.height-r+this._viewportMargin;else if(e.overlayY==="bottom")a=i.height-t.y+this._viewportMargin*2,o=i.height-a+this._viewportMargin;else{let m=Math.min(i.bottom-t.y+i.top,t.y),f=this._lastBoundingBoxSize.height;o=m*2,r=t.y-m,o>f&&!this._isInitialRender&&!this._growAfterOpen&&(r=t.y-f/2)}let l=e.overlayX==="start"&&!n||e.overlayX==="end"&&n,h=e.overlayX==="end"&&!n||e.overlayX==="start"&&n,c,d,u;if(h)u=i.width-t.x+this._viewportMargin*2,c=t.x-this._viewportMargin;else if(l)d=t.x,c=i.right-t.x;else{let m=Math.min(i.right-t.x+i.left,t.x),f=this._lastBoundingBoxSize.width;c=m*2,d=t.x-m,c>f&&!this._isInitialRender&&!this._growAfterOpen&&(d=t.x-f/2)}return{top:r,left:d,bottom:a,right:u,width:c,height:o}}_setBoundingBoxStyles(t,e){let i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let n={};if(this._hasExactPosition())n.top=n.left="0",n.bottom=n.right=n.maxHeight=n.maxWidth="",n.width=n.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,r=this._overlayRef.getConfig().maxWidth;n.height=z(i.height),n.top=z(i.top),n.bottom=z(i.bottom),n.width=z(i.width),n.left=z(i.left),n.right=z(i.right),e.overlayX==="center"?n.alignItems="center":n.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?n.justifyContent="center":n.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",o&&(n.maxHeight=z(o)),r&&(n.maxWidth=z(r))}this._lastBoundingBoxSize=i,Kt(this._boundingBox.style,n)}_resetBoundingBoxStyles(){Kt(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Kt(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){let i={},n=this._hasExactPosition(),o=this._hasFlexibleDimensions,r=this._overlayRef.getConfig();if(n){let c=this._viewportRuler.getViewportScrollPosition();Kt(i,this._getExactOverlayY(e,t,c)),Kt(i,this._getExactOverlayX(e,t,c))}else i.position="static";let a="",l=this._getOffset(e,"x"),h=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),h&&(a+=`translateY(${h}px)`),i.transform=a.trim(),r.maxHeight&&(n?i.maxHeight=z(r.maxHeight):o&&(i.maxHeight="")),r.maxWidth&&(n?i.maxWidth=z(r.maxWidth):o&&(i.maxWidth="")),Kt(this._pane.style,i)}_getExactOverlayY(t,e,i){let n={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,t);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),t.overlayY==="bottom"){let r=this._document.documentElement.clientHeight;n.bottom=`${r-(o.y+this._overlayRect.height)}px`}else n.top=z(o.y);return n}_getExactOverlayX(t,e,i){let n={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let r;if(this._isRtl()?r=t.overlayX==="end"?"left":"right":r=t.overlayX==="end"?"right":"left",r==="right"){let a=this._document.documentElement.clientWidth;n.right=`${a-(o.x+this._overlayRect.width)}px`}else n.left=z(o.x);return n}_getScrollVisibility(){let t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(n=>n.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:_r(t,i),isOriginOutsideView:xn(t,i),isOverlayClipped:_r(e,i),isOverlayOutsideView:xn(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,n)=>i-Math.max(n,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return e==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&_n(t).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof X)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}};function Kt(s,t){for(let e in t)t.hasOwnProperty(e)&&(s[e]=t[e]);return s}function Cr(s){if(typeof s!="number"&&s!=null){let[t,e]=s.split(sl);return!e||e==="px"?parseFloat(t):null}return s||null}function wr(s){return{top:Math.floor(s.top),right:Math.floor(s.right),bottom:Math.floor(s.bottom),left:Math.floor(s.left),width:Math.floor(s.width),height:Math.floor(s.height)}}function ol(s,t){return s===t?!0:s.isOriginClipped===t.isOriginClipped&&s.isOriginOutsideView===t.isOriginOutsideView&&s.isOverlayClipped===t.isOverlayClipped&&s.isOverlayOutsideView===t.isOverlayOutsideView}var Mr="cdk-global-overlay-wrapper";function Ir(s){return new vi}var vi=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(t){let e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(Mr),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:n,height:o,maxWidth:r,maxHeight:a}=i,l=(n==="100%"||n==="100vw")&&(!r||r==="100%"||r==="100vw"),h=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),c=this._xPosition,d=this._xOffset,u=this._overlayRef.getConfig().direction==="rtl",m="",f="",p="";l?p="flex-start":c==="center"?(p="center",u?f=d:m=d):u?c==="left"||c==="end"?(p="flex-end",m=d):(c==="right"||c==="start")&&(p="flex-start",f=d):c==="left"||c==="start"?(p="flex-start",m=d):(c==="right"||c==="end")&&(p="flex-end",f=d),t.position=this._cssPosition,t.marginLeft=l?"0":m,t.marginTop=h?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":f,e.justifyContent=p,e.alignItems=h?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(Mr),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},Or=(()=>{class s{_injector=b(H);constructor(){}global(){return Ir()}flexibleConnectedTo(e){return yi(this._injector,e)}static \u0275fac=function(i){return new(i||s)};static \u0275prov=lt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function Ci(s,t){s.get(Xt).load(Pr);let e=s.get(Rr),i=s.get(ht),n=s.get(he),o=s.get(un),r=s.get(Gt),a=i.createElement("div"),l=i.createElement("div");l.id=n.getId("cdk-overlay-"),l.classList.add("cdk-overlay-pane"),a.appendChild(l),e.getContainerElement().appendChild(a);let h=new De(l,o,s),c=new de(t),d=s.get(jt,null,{optional:!0})||s.get(qe).createRenderer(null,null);return c.direction=c.direction||r.value,new bi(h,a,l,c,s.get(J),s.get(Er),i,s.get(Fo),s.get(Dr),t?.disableAnimations??s.get(xo,null,{optional:!0})==="NoopAnimations",s.get(Qe),d)}var zr=(()=>{class s{scrollStrategies=b(kr);_positionBuilder=b(Or);_injector=b(H);constructor(){}create(e){return Ci(this._injector,e)}position(){return this._positionBuilder}static \u0275fac=function(i){return new(i||s)};static \u0275prov=lt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var rl=new $("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let s=b(H);return()=>qt(s)}});function al(s){let t=b(H);return()=>qt(t)}var ll={provide:rl,useFactory:al},kn=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275mod=Lt({type:s});static \u0275inj=Rt({providers:[zr,ll],imports:[Jo,gr,yn,yn]})}return s})();var ul=["mat-menu-item",""],ml=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],fl=["mat-icon, [matMenuItemIcon]","*"];function pl(s,t){s&1&&(Mo(),_(0,"svg",2),K(1,"polygon",3),v())}var gl=["*"];function bl(s,t){if(s&1){let e=st();gn(0,"div",0),Io("click",function(){M(e);let n=I();return x(n.closed.emit("click"))})("animationstart",function(n){M(e);let o=I();return x(o._onAnimationStart(n.animationName))})("animationend",function(n){M(e);let o=I();return x(o._onAnimationDone(n.animationName))})("animationcancel",function(n){M(e);let o=I();return x(o._onAnimationDone(n.animationName))}),gn(1,"div",1),Bt(2),To()()}if(s&2){let e=I();re(e._classList),q("mat-menu-panel-animations-disabled",e._animationsDisabled)("mat-menu-panel-exit-animation",e._panelAnimationState==="void")("mat-menu-panel-animating",e._isAnimating),Ro("id",e.panelId),Q("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}var Pn=new $("MAT_MENU_PANEL"),Ie=(()=>{class s{_elementRef=b(X);_document=b(ht);_focusMonitor=b(ii);_parentMenu=b(Pn,{optional:!0});_changeDetectorRef=b(Nt);role="menuitem";disabled=!1;disableRipple=!1;_hovered=new W;_focused=new W;_highlighted=!1;_triggersSubmenu=!1;constructor(){b(Xt).load(oi),this._parentMenu?.addItem?.(this)}focus(e,i){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){let e=this._elementRef.nativeElement.cloneNode(!0),i=e.querySelectorAll("mat-icon, .material-icons");for(let n=0;n<i.length;n++)i[n].remove();return e.textContent?.trim()||""}_setHighlighted(e){this._highlighted=e,this._changeDetectorRef.markForCheck()}_setTriggersSubmenu(e){this._triggersSubmenu=e,this._changeDetectorRef.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=Y({type:s,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-focus-indicator"],hostVars:8,hostBindings:function(i,n){i&1&&R("click",function(r){return n._checkDisabled(r)})("mouseenter",function(){return n._handleMouseEnter()}),i&2&&(Q("role",n.role)("tabindex",n._getTabIndex())("aria-disabled",n.disabled)("disabled",n.disabled||null),q("mat-mdc-menu-item-highlighted",n._highlighted)("mat-mdc-menu-item-submenu-trigger",n._triggersSubmenu))},inputs:{role:"role",disabled:[2,"disabled","disabled",N],disableRipple:[2,"disableRipple","disableRipple",N]},exportAs:["matMenuItem"],attrs:ul,ngContentSelectors:fl,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(i,n){i&1&&(Wt(ml),Bt(0),_(1,"span",0),Bt(2,1),v(),K(3,"div",1),Se(4,pl,2,0,":svg:svg",2)),i&2&&(w(3),P("matRippleDisabled",n.disableRipple||n.disabled)("matRippleTrigger",n._getHostElement()),w(),ke(n._triggersSubmenu?4:-1))},dependencies:[Te],encapsulation:2,changeDetection:0})}return s})();var _l=new $("MatMenuContent");var vl=new $("mat-menu-default-options",{providedIn:"root",factory:yl});function yl(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}var Tn="_mat-menu-enter",wi="_mat-menu-exit",ue=(()=>{class s{_elementRef=b(X);_changeDetectorRef=b(Nt);_injector=b(H);_keyManager;_xPosition;_yPosition;_firstItemFocusRef;_exitFallbackTimeout;_animationsDisabled=$t();_allItems;_directDescendantItems=new Ke;_classList={};_panelAnimationState="void";_animationDone=new W;_isAnimating=!1;parentMenu;direction;overlayPanelClass;backdropClass;ariaLabel;ariaLabelledby;ariaDescribedby;get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}templateRef;items;lazyContent;overlapTrigger;hasBackdrop;set panelClass(e){let i=this._previousPanelClass,n=pt({},this._classList);i&&i.length&&i.split(" ").forEach(o=>{n[o]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(o=>{n[o]=!0}),this._elementRef.nativeElement.className=""),this._classList=n}_previousPanelClass;get classList(){return this.panelClass}set classList(e){this.panelClass=e}closed=new O;close=this.closed;panelId=b(he).getId("mat-menu-panel-");constructor(){let e=b(vl);this.overlayPanelClass=e.overlayPanelClass||"",this._xPosition=e.xPosition,this._yPosition=e.yPosition,this.backdropClass=e.backdropClass,this.overlapTrigger=e.overlapTrigger,this.hasBackdrop=e.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new si(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Pt(this._directDescendantItems),gt(e=>Dt(...e.map(i=>i._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{let i=this._keyManager;if(this._panelAnimationState==="enter"&&i.activeItem?._hasFocus()){let n=e.toArray(),o=Math.max(0,Math.min(n.length-1,i.activeItemIndex||0));n[o]&&!n[o].disabled?i.setActiveItem(o):i.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusRef?.destroy(),clearTimeout(this._exitFallbackTimeout)}_hovered(){return this._directDescendantItems.changes.pipe(Pt(this._directDescendantItems),gt(i=>Dt(...i.map(n=>n._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){let i=e.keyCode,n=this._keyManager;switch(i){case 27:ni(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&this.direction==="ltr"&&this.closed.emit("keydown");break;case 39:this.parentMenu&&this.direction==="rtl"&&this.closed.emit("keydown");break;default:(i===38||i===40)&&n.setFocusOrigin("keyboard"),n.onKeydown(e);return}}focusFirstItem(e="program"){this._firstItemFocusRef?.destroy(),this._firstItemFocusRef=_t(()=>{let i=this._resolvePanel();if(!i||!i.contains(document.activeElement)){let n=this._keyManager;n.setFocusOrigin(e).setFirstItemActive(),!n.activeItem&&i&&i.focus()}},{injector:this._injector})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){}setPositionClasses(e=this.xPosition,i=this.yPosition){this._classList=se(pt({},this._classList),{"mat-menu-before":e==="before","mat-menu-after":e==="after","mat-menu-above":i==="above","mat-menu-below":i==="below"}),this._changeDetectorRef.markForCheck()}_onAnimationDone(e){let i=e===wi;(i||e===Tn)&&(i&&(clearTimeout(this._exitFallbackTimeout),this._exitFallbackTimeout=void 0),this._animationDone.next(i?"void":"enter"),this._isAnimating=!1)}_onAnimationStart(e){(e===Tn||e===wi)&&(this._isAnimating=!0)}_setIsOpen(e){if(this._panelAnimationState=e?"enter":"void",e){if(this._keyManager.activeItemIndex===0){let i=this._resolvePanel();i&&(i.scrollTop=0)}}else this._animationsDisabled||(this._exitFallbackTimeout=setTimeout(()=>this._onAnimationDone(wi),200));this._animationsDisabled&&setTimeout(()=>{this._onAnimationDone(e?Tn:wi)}),this._changeDetectorRef.markForCheck()}_updateDirectDescendants(){this._allItems.changes.pipe(Pt(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}_resolvePanel(){let e=null;return this._directDescendantItems.length&&(e=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),e}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=Y({type:s,selectors:[["mat-menu"]],contentQueries:function(i,n,o){if(i&1&&(vt(o,_l,5),vt(o,Ie,5),vt(o,Ie,4)),i&2){let r;E(r=D())&&(n.lazyContent=r.first),E(r=D())&&(n._allItems=r),E(r=D())&&(n.items=r)}},viewQuery:function(i,n){if(i&1&&F(bt,5),i&2){let o;E(o=D())&&(n.templateRef=o.first)}},hostVars:3,hostBindings:function(i,n){i&2&&Q("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[2,"overlapTrigger","overlapTrigger",N],hasBackdrop:[2,"hasBackdrop","hasBackdrop",e=>e==null?null:N(e)],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],features:[At([{provide:Pn,useExisting:s}])],ngContentSelectors:gl,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel",3,"click","animationstart","animationend","animationcancel","id"],[1,"mat-mdc-menu-content"]],template:function(i,n){i&1&&(Wt(),Ze(0,bl,3,12,"ng-template"))},styles:[`mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-menu-item-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-menu-item-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-menu-item-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-menu-item-label-text-weight, var(--mat-sys-label-large-weight))}@keyframes _mat-menu-enter{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:none}}@keyframes _mat-menu-exit{from{opacity:1}to{opacity:0}}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;box-sizing:border-box;outline:0;animation:_mat-menu-enter 120ms cubic-bezier(0, 0, 0.2, 1);border-radius:var(--mat-menu-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-menu-container-color, var(--mat-sys-surface-container));box-shadow:var(--mat-menu-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));will-change:transform,opacity}.mat-mdc-menu-panel.mat-menu-panel-exit-animation{animation:_mat-menu-exit 100ms 25ms linear forwards}.mat-mdc-menu-panel.mat-menu-panel-animations-disabled{animation:none}.mat-mdc-menu-panel.mat-menu-panel-animating{pointer-events:none}.mat-mdc-menu-panel.mat-menu-panel-animating:has(.mat-mdc-menu-content:empty){display:none}@media(forced-colors: active){.mat-mdc-menu-panel{outline:solid 1px}}.mat-mdc-menu-panel .mat-divider{color:var(--mat-menu-divider-color, var(--mat-sys-surface-variant));margin-bottom:var(--mat-menu-divider-bottom-spacing, 8px);margin-top:var(--mat-menu-divider-top-spacing, 8px)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px;padding-left:var(--mat-menu-item-leading-spacing, 12px);padding-right:var(--mat-menu-item-trailing-spacing, 12px);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-menu-item::-moz-focus-inner{border:0}[dir=rtl] .mat-mdc-menu-item{padding-left:var(--mat-menu-item-trailing-spacing, 12px);padding-right:var(--mat-menu-item-leading-spacing, 12px)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-trailing-spacing, 12px)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-trailing-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-leading-spacing, 12px)}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing, 12px);height:var(--mat-menu-item-icon-size, 24px);width:var(--mat-menu-item-icon-size, 24px)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing, 12px)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(forced-colors: active){.mat-mdc-menu-item{margin-top:1px}}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size, 24px);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing, 12px)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing, 12px);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1);transform-origin:center}@media(forced-colors: active){.mat-mdc-menu-submenu-icon{fill:CanvasText}}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}
`],encapsulation:2,changeDetection:0})}return s})(),Ar=new $("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let s=b(H);return()=>qt(s)}});function Cl(s){let t=b(H);return()=>qt(t)}var wl={provide:Ar,deps:[],useFactory:Cl};var Re=new WeakMap,Ml=(()=>{class s{_canHaveBackdrop;_element=b(X);_viewContainerRef=b(zt);_menuItemInstance=b(Ie,{optional:!0,self:!0});_dir=b(Gt,{optional:!0});_focusMonitor=b(ii);_ngZone=b(J);_injector=b(H);_scrollStrategy=b(Ar);_changeDetectorRef=b(Nt);_animationsDisabled=$t();_portal;_overlayRef=null;_menuOpen=!1;_closingActionsSubscription=U.EMPTY;_menuCloseSubscription=U.EMPTY;_pendingRemoval;_parentMaterialMenu;_parentInnerPadding;_openedBy=void 0;get _menu(){return this._menuInternal}set _menu(e){e!==this._menuInternal&&(this._menuInternal=e,this._menuCloseSubscription.unsubscribe(),e&&(this._parentMaterialMenu,this._menuCloseSubscription=e.close.subscribe(i=>{this._destroyMenu(i),(i==="click"||i==="tab")&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})),this._menuItemInstance?._setTriggersSubmenu(this._triggersSubmenu()))}_menuInternal;constructor(e){this._canHaveBackdrop=e;let i=b(Pn,{optional:!0});this._parentMaterialMenu=i instanceof ue?i:void 0}ngOnDestroy(){this._menu&&this._ownsMenu(this._menu)&&Re.delete(this._menu),this._pendingRemoval?.unsubscribe(),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null)}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this._menu)}_closeMenu(){this._menu?.close.emit()}_openMenu(e){let i=this._menu;if(this._menuOpen||!i)return;this._pendingRemoval?.unsubscribe();let n=Re.get(i);Re.set(i,this),n&&n!==this&&n._closeMenu();let o=this._createOverlay(i),r=o.getConfig(),a=r.positionStrategy;this._setPosition(i,a),this._canHaveBackdrop?r.hasBackdrop=i.hasBackdrop==null?!this._triggersSubmenu():i.hasBackdrop:r.hasBackdrop=!1,o.hasAttached()||(o.attach(this._getPortal(i)),i.lazyContent?.attach(this.menuData)),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this._closeMenu()),i.parentMenu=this._triggersSubmenu()?this._parentMaterialMenu:void 0,i.direction=this.dir,e&&i.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0),i instanceof ue&&(i._setIsOpen(!0),i._directDescendantItems.changes.pipe(Yt(i.close)).subscribe(()=>{a.withLockedPosition(!1).reapplyLastPosition(),a.withLockedPosition(!0)}))}focus(e,i){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,i):this._element.nativeElement.focus(i)}_destroyMenu(e){let i=this._overlayRef,n=this._menu;!i||!this.menuOpen||(this._closingActionsSubscription.unsubscribe(),this._pendingRemoval?.unsubscribe(),n instanceof ue&&this._ownsMenu(n)?(this._pendingRemoval=n._animationDone.pipe(Co(1)).subscribe(()=>{i.detach(),n.lazyContent?.detach()}),n._setIsOpen(!1)):(i.detach(),n?.lazyContent?.detach()),n&&this._ownsMenu(n)&&Re.delete(n),this.restoreFocus&&(e==="keydown"||!this._openedBy||!this._triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,this._setIsMenuOpen(!1))}_setIsMenuOpen(e){e!==this._menuOpen&&(this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this._triggersSubmenu()&&this._menuItemInstance._setHighlighted(e),this._changeDetectorRef.markForCheck())}_createOverlay(e){if(!this._overlayRef){let i=this._getOverlayConfig(e);this._subscribeToPositions(e,i.positionStrategy),this._overlayRef=Ci(this._injector,i),this._overlayRef.keydownEvents().subscribe(n=>{this._menu instanceof ue&&this._menu._handleKeydown(n)})}return this._overlayRef}_getOverlayConfig(e){return new de({positionStrategy:yi(this._injector,this._getOverlayOrigin()).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:e.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:e.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir||"ltr",disableAnimations:this._animationsDisabled})}_subscribeToPositions(e,i){e.setPositionClasses&&i.positionChanges.subscribe(n=>{this._ngZone.run(()=>{let o=n.connectionPair.overlayX==="start"?"after":"before",r=n.connectionPair.overlayY==="top"?"below":"above";e.setPositionClasses(o,r)})})}_setPosition(e,i){let[n,o]=e.xPosition==="before"?["end","start"]:["start","end"],[r,a]=e.yPosition==="above"?["bottom","top"]:["top","bottom"],[l,h]=[r,a],[c,d]=[n,o],u=0;if(this._triggersSubmenu()){if(d=n=e.xPosition==="before"?"start":"end",o=c=n==="end"?"start":"end",this._parentMaterialMenu){if(this._parentInnerPadding==null){let m=this._parentMaterialMenu.items.first;this._parentInnerPadding=m?m._getHostElement().offsetTop:0}u=r==="bottom"?this._parentInnerPadding:-this._parentInnerPadding}}else e.overlapTrigger||(l=r==="top"?"bottom":"top",h=a==="top"?"bottom":"top");i.withPositions([{originX:n,originY:l,overlayX:c,overlayY:r,offsetY:u},{originX:o,originY:l,overlayX:d,overlayY:r,offsetY:u},{originX:n,originY:h,overlayX:c,overlayY:a,offsetY:-u},{originX:o,originY:h,overlayX:d,overlayY:a,offsetY:-u}])}_menuClosingActions(){let e=this._getOutsideClickStream(this._overlayRef),i=this._overlayRef.detachments(),n=this._parentMaterialMenu?this._parentMaterialMenu.closed:Me(),o=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(oe(r=>this._menuOpen&&r!==this._menuItemInstance)):Me();return Dt(e,n,o,i)}_getPortal(e){return(!this._portal||this._portal.templateRef!==e.templateRef)&&(this._portal=new wt(e.templateRef,this._viewContainerRef)),this._portal}_ownsMenu(e){return Re.get(e)===this}static \u0275fac=function(i){ko()};static \u0275dir=G({type:s})}return s})(),Fr=(()=>{class s extends Ml{_cleanupTouchstart;_hoverSubscription=U.EMPTY;get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){this._menu=e}menuData;restoreFocus=!0;menuOpened=new O;onMenuOpen=this.menuOpened;menuClosed=new O;onMenuClose=this.menuClosed;constructor(){super(!0);let e=b(jt);this._cleanupTouchstart=e.listen(this._element.nativeElement,"touchstart",i=>{Ko(i)||(this._openedBy="touch")},{passive:!0})}triggersSubmenu(){return super._triggersSubmenu()}toggleMenu(){return this.menuOpen?this.closeMenu():this.openMenu()}openMenu(){this._openMenu(!0)}closeMenu(){this._closeMenu()}updatePosition(){this._overlayRef?.updatePosition()}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){super.ngOnDestroy(),this._cleanupTouchstart(),this._hoverSubscription.unsubscribe()}_getOverlayOrigin(){return this._element}_getOutsideClickStream(e){return e.backdropClick()}_handleMousedown(e){Qo(e)||(this._openedBy=e.button===0?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){let i=e.keyCode;(i===13||i===32)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(i===39&&this.dir==="ltr"||i===37&&this.dir==="rtl")&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){this.triggersSubmenu()&&this._parentMaterialMenu&&(this._hoverSubscription=this._parentMaterialMenu._hovered().subscribe(e=>{e===this._menuItemInstance&&!e.disabled&&(this._openedBy="mouse",this._openMenu(!1))}))}static \u0275fac=function(i){return new(i||s)};static \u0275dir=G({type:s,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(i,n){i&1&&R("click",function(r){return n._handleClick(r)})("mousedown",function(r){return n._handleMousedown(r)})("keydown",function(r){return n._handleKeydown(r)}),i&2&&Q("aria-haspopup",n.menu?"menu":null)("aria-expanded",n.menuOpen)("aria-controls",n.menuOpen?n.menu==null?null:n.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[0,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[0,"matMenuTriggerFor","menu"],menuData:[0,"matMenuTriggerData","menuData"],restoreFocus:[0,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"],features:[ct]})}return s})();var Nr=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275mod=Lt({type:s});static \u0275inj=Rt({providers:[wl],imports:[nr,ce,kn,cr,ce]})}return s})(),Vr={transformMenu:{type:7,name:"transformMenu",definitions:[{type:0,name:"void",styles:{type:6,styles:{opacity:0,transform:"scale(0.8)"},offset:null}},{type:1,expr:"void => enter",animation:{type:4,styles:{type:6,styles:{opacity:1,transform:"scale(1)"},offset:null},timings:"120ms cubic-bezier(0, 0, 0.2, 1)"},options:null},{type:1,expr:"* => void",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"100ms 25ms linear"},options:null}],options:{}},fadeInItems:{type:7,name:"fadeInItems",definitions:[{type:0,name:"showing",styles:{type:6,styles:{opacity:1},offset:null}},{type:1,expr:"void => *",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:null,timings:"400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}},kd=Vr.fadeInItems,Td=Vr.transformMenu;var Mi=class s{timeframeChanged=new O;indicatorToggled=new O;selectedTimeframe="1h";static \u0275fac=function(e){return new(e||s)};static \u0275cmp=Y({type:s,selectors:[["app-chart-control-bar"]],outputs:{timeframeChanged:"timeframeChanged",indicatorToggled:"indicatorToggled"},decls:25,vars:2,consts:[["indicatorMenu","matMenu"],[1,"control-bar-container"],["aria-label","Chart Timeframe",1,"timeframe-group",3,"ngModelChange","ngModel"],["value","15m",3,"click"],["value","1h",3,"click"],["value","4h",3,"click"],["value","1d",3,"click"],[1,"indicators-group"],["mat-flat-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"]],template:function(e,i){if(e&1){let n=st();_(0,"div",1)(1,"mat-button-toggle-group",2),Bo("ngModelChange",function(r){return M(n),Lo(i.selectedTimeframe,r)||(i.selectedTimeframe=r),x(r)}),_(2,"mat-button-toggle",3),R("click",function(){return M(n),x(i.timeframeChanged.emit("15m"))}),S(3,"15m"),v(),_(4,"mat-button-toggle",4),R("click",function(){return M(n),x(i.timeframeChanged.emit("1h"))}),S(5,"1h"),v(),_(6,"mat-button-toggle",5),R("click",function(){return M(n),x(i.timeframeChanged.emit("4h"))}),S(7,"4h"),v(),_(8,"mat-button-toggle",6),R("click",function(){return M(n),x(i.timeframeChanged.emit("1d"))}),S(9,"1D"),v()(),_(10,"div",7)(11,"button",8)(12,"mat-icon"),S(13,"insights"),v(),S(14," Indicators "),v(),_(15,"mat-menu",null,0)(17,"button",9),R("click",function(){return M(n),x(i.indicatorToggled.emit("EMA"))}),S(18,"Toggle EMA (20, 50)"),v(),_(19,"button",9),R("click",function(){return M(n),x(i.indicatorToggled.emit("BB"))}),S(20,"Toggle Bollinger Bands"),v(),_(21,"button",9),R("click",function(){return M(n),x(i.indicatorToggled.emit("MACD"))}),S(22,"Toggle MACD"),v(),_(23,"button",9),R("click",function(){return M(n),x(i.indicatorToggled.emit("RSI"))}),S(24,"Toggle RSI"),v()()()()}if(e&2){let n=yt(16);w(),zo("ngModel",i.selectedTimeframe),w(10),P("matMenuTriggerFor",n)}},dependencies:[le,ar,or,rr,li,ai,ri,sr,Nr,ue,Ie,Fr,$o,Xo,Go],styles:[".control-bar-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:8px;background-color:#00000026;border-radius:6px;margin-bottom:16px}"]})};function k(s){var t=s.width,e=s.height;if(t<0)throw new Error("Negative width is not allowed for Size");if(e<0)throw new Error("Negative height is not allowed for Size");return{width:t,height:e}}function dt(s,t){return s.width===t.width&&s.height===t.height}var Tl=function(){function s(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return s.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(s.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),s.prototype.subscribe=function(t){var e=this,i={next:t};return this._observers.push(i),{unsubscribe:function(){e._observers=e._observers.filter(function(n){return n!==i})}}},s.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},s.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},s.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},s.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach(function(e){return e.next(t._window.devicePixelRatio)}),this._reinstallResolutionListener()},s}();function Yr(s){return new Tl(s)}var El=function(){function s(t,e,i){var n;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=k({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=e??function(o){return o},this._allowResizeObserver=(n=i?.allowResizeObserver)!==null&&n!==void 0?n:!0,this._chooseAndInitObserver()}return s.prototype.dispose=function(){var t,e;if(this._canvasElement===null)throw new Error("Object is disposed");(t=this._canvasElementResizeObserver)===null||t===void 0||t.disconnect(),this._canvasElementResizeObserver=null,(e=this._devicePixelRatioObservable)===null||e===void 0||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(s.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"bitmapSize",{get:function(){return k({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),s.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=k(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},s.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},s.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(e){return e!==t})},Object.defineProperty(s.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),s.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},s.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(e){return e!==t})},s.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},s.prototype._resizeBitmap=function(t){var e=this.bitmapSize;dt(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},s.prototype._emitBitmapSizeChanged=function(t,e){var i=this;this._bitmapSizeChangedListeners.forEach(function(n){return n.call(i,t,e)})},s.prototype._suggestNewBitmapSize=function(t){var e=this._suggestedBitmapSize,i=k(this._transformBitmapSize(t,this._canvasElementClientSize)),n=dt(this.bitmapSize,i)?null:i;e===null&&n===null||e!==null&&n!==null&&dt(e,n)||(this._suggestedBitmapSize=n,this._emitSuggestedBitmapSizeChanged(e,n))},s.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(n){return n.call(i,t,e)})},s.prototype._chooseAndInitObserver=function(){var t=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}Dl().then(function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()})},s.prototype._initDevicePixelRatioObservable=function(){var t=this;if(this._canvasElement!==null){var e=jr(this._canvasElement);if(e===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=Yr(e),this._devicePixelRatioObservable.subscribe(function(){return t._invalidateBitmapSize()}),this._invalidateBitmapSize()}},s.prototype._invalidateBitmapSize=function(){var t,e;if(this._canvasElement!==null){var i=jr(this._canvasElement);if(i!==null){var n=(e=(t=this._devicePixelRatioObservable)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:i.devicePixelRatio,o=this._canvasElement.getClientRects(),r=o[0]!==void 0?Pl(o[0],n):k({width:this._canvasElementClientSize.width*n,height:this._canvasElementClientSize.height*n});this._suggestNewBitmapSize(r)}}},s.prototype._initResizeObserver=function(){var t=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(e){var i=e.find(function(r){return r.target===t._canvasElement});if(!(!i||!i.devicePixelContentBoxSize||!i.devicePixelContentBoxSize[0])){var n=i.devicePixelContentBoxSize[0],o=k({width:n.inlineSize,height:n.blockSize});t._suggestNewBitmapSize(o)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},s}();function Rn(s,t){if(t.type==="device-pixel-content-box")return new El(s,t.transform,t.options);throw new Error("Unsupported binding target")}function jr(s){return s.ownerDocument.defaultView}function Dl(){return new Promise(function(s){var t=new ResizeObserver(function(e){s(e.every(function(i){return"devicePixelContentBoxSize"in i})),t.disconnect()});t.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function Pl(s,t){return k({width:Math.round(s.left*t+s.width*t)-Math.round(s.left*t),height:Math.round(s.top*t+s.height*t)-Math.round(s.top*t)})}var Wr=function(){function s(t,e,i){if(e.width===0||e.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,i.width===0||i.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=t}return s.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},s.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(s.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),s}();function Mt(s,t){var e=s.canvasElementClientSize;if(e.width===0||e.height===0)return null;var i=s.bitmapSize;if(i.width===0||i.height===0)return null;var n=s.canvasElement.getContext("2d",t);return n===null?null:new Wr(n,e,i)}var Ur,kt;function Jt(s,t){let e={0:[],1:[s.lineWidth,s.lineWidth],2:[2*s.lineWidth,2*s.lineWidth],3:[6*s.lineWidth,6*s.lineWidth],4:[s.lineWidth,4*s.lineWidth]}[t];s.setLineDash(e)}function Ra(s,t,e,i){s.beginPath();let n=s.lineWidth%2?.5:0;s.moveTo(e,t+n),s.lineTo(i,t+n),s.stroke()}function ne(s,t){if(!s)throw new Error("Assertion failed"+(t?": "+t:""))}function et(s){if(s===void 0)throw new Error("Value is undefined");return s}function g(s){if(s===null)throw new Error("Value is null");return s}function ze(s){return g(et(s))}(function(s){s[s.Simple=0]="Simple",s[s.WithSteps=1]="WithSteps",s[s.Curved=2]="Curved"})(Ur||(Ur={})),function(s){s[s.Solid=0]="Solid",s[s.Dotted=1]="Dotted",s[s.Dashed=2]="Dashed",s[s.LargeDashed=3]="LargeDashed",s[s.SparseDotted=4]="SparseDotted"}(kt||(kt={}));var Xr={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function tt(s){return s<0?0:s>255?255:Math.round(s)||0}function Ia(s){return s<=0||s>0?s<0?0:s>1?1:Math.round(1e4*s)/1e4:0}var Rl=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,Il=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,Ol=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,zl=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function zi(s){(s=s.toLowerCase())in Xr&&(s=Xr[s]);{let t=zl.exec(s)||Ol.exec(s);if(t)return[tt(parseInt(t[1],10)),tt(parseInt(t[2],10)),tt(parseInt(t[3],10)),Ia(t.length<5?1:parseFloat(t[4]))]}{let t=Il.exec(s);if(t)return[tt(parseInt(t[1],16)),tt(parseInt(t[2],16)),tt(parseInt(t[3],16)),1]}{let t=Rl.exec(s);if(t)return[tt(17*parseInt(t[1],16)),tt(17*parseInt(t[2],16)),tt(17*parseInt(t[3],16)),1]}throw new Error(`Cannot parse color: ${s}`)}function qi(s){let t=zi(s);return{t:`rgb(${t[0]}, ${t[1]}, ${t[2]})`,i:(e=t,.199*e[0]+.687*e[1]+.114*e[2]>160?"black":"white")};var e}var B=class{constructor(){this.h=[]}l(t,e,i){let n={o:t,_:e,u:i===!0};this.h.push(n)}p(t){let e=this.h.findIndex(i=>t===i.o);e>-1&&this.h.splice(e,1)}v(t){this.h=this.h.filter(e=>e._!==t)}m(t,e,i){let n=[...this.h];this.h=this.h.filter(o=>!o.u),n.forEach(o=>o.o(t,e,i))}g(){return this.h.length>0}M(){this.h=[]}};function ft(s,...t){for(let e of t)for(let i in e)e[i]!==void 0&&(typeof e[i]!="object"||s[i]===void 0?s[i]=e[i]:ft(s[i],e[i]));return s}function mt(s){return typeof s=="number"&&isFinite(s)}function Ne(s){return typeof s=="number"&&s%1==0}function no(s){return typeof s=="string"}function xi(s){return typeof s=="boolean"}function xt(s){let t=s;if(!t||typeof t!="object")return t;let e,i,n;for(i in e=Array.isArray(t)?[]:{},t)t.hasOwnProperty(i)&&(n=t[i],e[i]=n&&typeof n=="object"?xt(n):n);return e}function Ll(s){return s!==null}function Li(s){return s===null?void 0:s}var so="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function be(s,t,e){return t===void 0&&(t=so),`${e=e!==void 0?`${e} `:""}${s}px ${t}`}var Xn=class{constructor(t){this.S={k:1,C:5,T:NaN,P:"",R:"",D:"",B:"",A:0,O:0,L:0,I:0,V:0},this.N=t}F(){let t=this.S,e=this.W(),i=this.j();return t.T===e&&t.R===i||(t.T=e,t.R=i,t.P=be(e,i),t.I=2.5/12*e,t.A=t.I,t.O=e/12*t.C,t.L=e/12*t.C,t.V=0),t.D=this.$(),t.B=this.H(),this.S}$(){return this.N.F().layout.textColor}H(){return this.N.U()}W(){return this.N.F().layout.fontSize}j(){return this.N.F().layout.fontFamily}},Ve=class{constructor(){this.q=[]}Y(t){this.q=t}X(t,e,i){this.q.forEach(n=>{n.X(t,e,i)})}},te=class{X(t,e,i){t.useMediaCoordinateSpace(n=>this.Z(n,e,i))}K(t,e,i){t.useMediaCoordinateSpace(n=>this.G(n,e,i))}G(t,e,i){}},Gn=class extends te{constructor(){super(...arguments),this.J=null}tt(t){this.J=t}Z({context:t}){if(this.J===null||this.J.it===null)return;let e=this.J.it,i=this.J,n=o=>{t.beginPath();for(let r=e.to-1;r>=e.from;--r){let a=i.nt[r];t.moveTo(a.st,a.et),t.arc(a.st,a.et,o,0,2*Math.PI)}t.fill()};i.rt>0&&(t.fillStyle=i.ht,n(i.lt+i.rt)),t.fillStyle=i.ot,n(i.lt)}};function Bl(){return{nt:[{st:0,et:0,_t:0,ut:0}],ot:"",ht:"",lt:0,rt:0,it:null}}var Al={from:0,to:1},$n=class{constructor(t,e){this.ct=new Ve,this.dt=[],this.ft=[],this.vt=!0,this.N=t,this.bt=e,this.ct.Y(this.dt)}gt(t){let e=this.N.wt();e.length!==this.dt.length&&(this.ft=e.map(Bl),this.dt=this.ft.map(i=>{let n=new Gn;return n.tt(i),n}),this.ct.Y(this.dt)),this.vt=!0}Mt(){return this.vt&&(this.St(),this.vt=!1),this.ct}St(){let t=this.N.wt(),e=this.bt.xt(),i=this.N.yt();t.forEach((n,o)=>{var r;let a=this.ft[o],l=n.kt(e);if(l===null||!n.Ct())return void(a.it=null);let h=g(n.Tt());a.ot=l.Pt,a.lt=l.lt,a.rt=l.Rt,a.nt[0].ut=l.ut,a.nt[0].et=n.Bt().Dt(l.ut,h.At),a.ht=(r=l.Ot)!==null&&r!==void 0?r:this.N.Lt(a.nt[0].et/n.Bt().It()),a.nt[0]._t=e,a.nt[0].st=i.Et(e),a.it=Al})}},Tt=class{X(t,e,i){t.useBitmapCoordinateSpace(n=>this.Z(n,e,i))}},Qn=class extends Tt{constructor(t){super(),this.zt=t}Z({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.zt===null)return;let o=this.zt.Vt.Ct,r=this.zt.Nt.Ct;if(!o&&!r)return;let a=Math.round(this.zt.st*i),l=Math.round(this.zt.et*n);t.lineCap="butt",o&&a>=0&&(t.lineWidth=Math.floor(this.zt.Vt.rt*i),t.strokeStyle=this.zt.Vt.D,t.fillStyle=this.zt.Vt.D,Jt(t,this.zt.Vt.Ft),function(h,c,d,u){h.beginPath();let m=h.lineWidth%2?.5:0;h.moveTo(c+m,d),h.lineTo(c+m,u),h.stroke()}(t,a,0,e.height)),r&&l>=0&&(t.lineWidth=Math.floor(this.zt.Nt.rt*n),t.strokeStyle=this.zt.Nt.D,t.fillStyle=this.zt.Nt.D,Jt(t,this.zt.Nt.Ft),Ra(t,l,0,e.width))}},Kn=class{constructor(t){this.vt=!0,this.Wt={Vt:{rt:1,Ft:0,D:"",Ct:!1},Nt:{rt:1,Ft:0,D:"",Ct:!1},st:0,et:0},this.jt=new Qn(this.Wt),this.$t=t}gt(){this.vt=!0}Mt(){return this.vt&&(this.St(),this.vt=!1),this.jt}St(){let t=this.$t.Ct(),e=g(this.$t.Ht()),i=e.Ut().F().crosshair,n=this.Wt;n.Nt.Ct=t&&this.$t.qt(e),n.Vt.Ct=t&&this.$t.Yt(),n.Nt.rt=i.horzLine.width,n.Nt.Ft=i.horzLine.style,n.Nt.D=i.horzLine.color,n.Vt.rt=i.vertLine.width,n.Vt.Ft=i.vertLine.style,n.Vt.D=i.vertLine.color,n.st=this.$t.Xt(),n.et=this.$t.Zt()}};function Fl(s,t,e,i,n,o){s.fillRect(t+o,e,i-2*o,o),s.fillRect(t+o,e+n-o,i-2*o,o),s.fillRect(t,e,o,n),s.fillRect(t+i-o,e,o,n)}function Zi(s,t,e,i,n,o){s.save(),s.globalCompositeOperation="copy",s.fillStyle=o,s.fillRect(t,e,i,n),s.restore()}function Gr(s,t){return Array.isArray(s)?s.map(e=>e===0?e:e+t):s+t}function In(s,t,e,i,n,o){let r,a,l,h;if(Array.isArray(o))if(o.length===2){let c=Math.max(0,o[0]),d=Math.max(0,o[1]);r=c,a=c,l=d,h=d}else{if(o.length!==4)throw new Error("Wrong border radius - it should be like css border radius");r=Math.max(0,o[0]),a=Math.max(0,o[1]),l=Math.max(0,o[2]),h=Math.max(0,o[3])}else{let c=Math.max(0,o);r=c,a=c,l=c,h=c}s.beginPath(),s.moveTo(t+r,e),s.lineTo(t+i-a,e),a!==0&&s.arcTo(t+i,e,t+i,e+a,a),s.lineTo(t+i,e+n-l),l!==0&&s.arcTo(t+i,e+n,t+i-l,e+n,l),s.lineTo(t+h,e+n),h!==0&&s.arcTo(t,e+n,t,e+n-h,h),s.lineTo(t,e+r),r!==0&&s.arcTo(t,e,t+r,e,r)}function $r(s,t,e,i,n,o,r=0,a=0,l=""){if(s.save(),!r||!l||l===o)return In(s,t,e,i,n,a),s.fillStyle=o,s.fill(),void s.restore();let h=r/2;o!=="transparent"&&(In(s,t+r,e+r,i-2*r,n-2*r,Gr(a,-r)),s.fillStyle=o,s.fill()),l!=="transparent"&&(In(s,t+h,e+h,i-r,n-r,Gr(a,-h)),s.lineWidth=r,s.strokeStyle=l,s.closePath(),s.stroke()),s.restore()}function Oa(s,t,e,i,n,o,r){s.save(),s.globalCompositeOperation="copy";let a=s.createLinearGradient(0,0,0,n);a.addColorStop(0,o),a.addColorStop(1,r),s.fillStyle=a,s.fillRect(t,e,i,n),s.restore()}var Bi=class{constructor(t,e){this.tt(t,e)}tt(t,e){this.zt=t,this.Kt=e}It(t,e){return this.zt.Ct?t.T+t.I+t.A:0}X(t,e,i,n){if(!this.zt.Ct||this.zt.Gt.length===0)return;let o=this.zt.D,r=this.Kt.t,a=t.useBitmapCoordinateSpace(l=>{let h=l.context;h.font=e.P;let c=this.Jt(l,e,i,n),d=c.Qt,u=(m,f)=>{c.ti?$r(h,d.ii,d.ni,d.si,d.ei,m,d.ri,[d.lt,0,0,d.lt],f):$r(h,d.hi,d.ni,d.si,d.ei,m,d.ri,[0,d.lt,d.lt,0],f)};return u(r,"transparent"),this.zt.li&&(h.fillStyle=o,h.fillRect(d.hi,d.ai,d.oi-d.hi,d._i)),u("transparent",r),this.zt.ui&&(h.fillStyle=e.B,h.fillRect(c.ti?d.ci-d.ri:0,d.ni,d.ri,d.di-d.ni)),c});t.useMediaCoordinateSpace(({context:l})=>{let h=a.fi;l.font=e.P,l.textAlign=a.ti?"right":"left",l.textBaseline="middle",l.fillStyle=o,l.fillText(this.zt.Gt,h.pi,(h.ni+h.di)/2+h.vi)})}Jt(t,e,i,n){var o;let{context:r,bitmapSize:a,mediaSize:l,horizontalPixelRatio:h,verticalPixelRatio:c}=t,d=this.zt.li||!this.zt.mi?e.C:0,u=this.zt.bi?e.k:0,m=e.I+this.Kt.gi,f=e.A+this.Kt.wi,p=e.O,y=e.L,C=this.zt.Gt,L=e.T,A=i.Mi(r,C),T=Math.ceil(i.Si(r,C)),V=L+m+f,Et=e.k+p+y+T+d,at=Math.max(1,Math.floor(c)),Z=Math.round(V*c);Z%2!=at%2&&(Z+=1);let Ce=u>0?Math.max(1,Math.floor(u*h)):0,nn=Math.round(Et*h),mo=Math.round(d*h),nl=(o=this.Kt.xi)!==null&&o!==void 0?o:this.Kt.yi,fo=Math.round(nl*c)-Math.floor(.5*c),sn=Math.floor(fo+at/2-Z/2),po=sn+Z,$e=n==="right",go=$e?l.width-u:u,we=$e?a.width-Ce:Ce,on,rn,an;return $e?(on=we-nn,rn=we-mo,an=go-d-p-u):(on=we+nn,rn=we+mo,an=go+d+p),{ti:$e,Qt:{ni:sn,ai:fo,di:po,si:nn,ei:Z,lt:2*h,ri:Ce,ii:on,hi:we,oi:rn,_i:at,ci:a.width},fi:{ni:sn/c,di:po/c,pi:an,vi:A}}}},He=class{constructor(t){this.ki={yi:0,t:"#000",wi:0,gi:0},this.Ci={Gt:"",Ct:!1,li:!0,mi:!1,Ot:"",D:"#FFF",ui:!1,bi:!1},this.Ti={Gt:"",Ct:!1,li:!1,mi:!0,Ot:"",D:"#FFF",ui:!0,bi:!0},this.vt=!0,this.Pi=new(t||Bi)(this.Ci,this.ki),this.Ri=new(t||Bi)(this.Ti,this.ki)}Gt(){return this.Di(),this.Ci.Gt}yi(){return this.Di(),this.ki.yi}gt(){this.vt=!0}It(t,e=!1){return Math.max(this.Pi.It(t,e),this.Ri.It(t,e))}Bi(){return this.ki.xi||0}Ai(t){this.ki.xi=t}Oi(){return this.Di(),this.Ci.Ct||this.Ti.Ct}Li(){return this.Di(),this.Ci.Ct}Mt(t){return this.Di(),this.Ci.li=this.Ci.li&&t.F().ticksVisible,this.Ti.li=this.Ti.li&&t.F().ticksVisible,this.Pi.tt(this.Ci,this.ki),this.Ri.tt(this.Ti,this.ki),this.Pi}Ii(){return this.Di(),this.Pi.tt(this.Ci,this.ki),this.Ri.tt(this.Ti,this.ki),this.Ri}Di(){this.vt&&(this.Ci.li=!0,this.Ti.li=!1,this.Ei(this.Ci,this.Ti,this.ki))}},qn=class extends He{constructor(t,e,i){super(),this.$t=t,this.zi=e,this.Vi=i}Ei(t,e,i){t.Ct=!1;let n=this.$t.F().horzLine;if(!n.labelVisible)return;let o=this.zi.Tt();if(!this.$t.Ct()||this.zi.Ni()||o===null)return;let r=qi(n.labelBackgroundColor);i.t=r.t,t.D=r.i;let a=2/12*this.zi.T();i.gi=a,i.wi=a;let l=this.Vi(this.zi);i.yi=l.yi,t.Gt=this.zi.Fi(l.ut,o),t.Ct=!0}},Nl=/[1-9]/g,Zn=class{constructor(){this.zt=null}tt(t){this.zt=t}X(t,e){if(this.zt===null||this.zt.Ct===!1||this.zt.Gt.length===0)return;let i=t.useMediaCoordinateSpace(({context:u})=>(u.font=e.P,Math.round(e.Wi.Si(u,g(this.zt).Gt,Nl))));if(i<=0)return;let n=e.ji,o=i+2*n,r=o/2,a=this.zt.$i,l=this.zt.yi,h=Math.floor(l-r)+.5;h<0?(l+=Math.abs(0-h),h=Math.floor(l-r)+.5):h+o>a&&(l-=Math.abs(a-(h+o)),h=Math.floor(l-r)+.5);let c=h+o,d=Math.ceil(0+e.k+e.C+e.I+e.T+e.A);t.useBitmapCoordinateSpace(({context:u,horizontalPixelRatio:m,verticalPixelRatio:f})=>{let p=g(this.zt);u.fillStyle=p.t;let y=Math.round(h*m),C=Math.round(0*f),L=Math.round(c*m),A=Math.round(d*f),T=Math.round(2*m);if(u.beginPath(),u.moveTo(y,C),u.lineTo(y,A-T),u.arcTo(y,A,y+T,A,T),u.lineTo(L-T,A),u.arcTo(L,A,L,A-T,T),u.lineTo(L,C),u.fill(),p.li){let V=Math.round(p.yi*m),Et=C,at=Math.round((Et+e.C)*f);u.fillStyle=p.D;let Z=Math.max(1,Math.floor(m)),Ce=Math.floor(.5*m);u.fillRect(V-Ce,Et,Z,at-Et)}}),t.useMediaCoordinateSpace(({context:u})=>{let m=g(this.zt),f=0+e.k+e.C+e.I+e.T/2;u.font=e.P,u.textAlign="left",u.textBaseline="middle",u.fillStyle=m.D;let p=e.Wi.Mi(u,"Apr0");u.translate(h+n,f+p),u.fillText(m.Gt,0,0)})}},Jn=class{constructor(t,e,i){this.vt=!0,this.jt=new Zn,this.Wt={Ct:!1,t:"#4c525e",D:"white",Gt:"",$i:0,yi:NaN,li:!0},this.bt=t,this.Hi=e,this.Vi=i}gt(){this.vt=!0}Mt(){return this.vt&&(this.St(),this.vt=!1),this.jt.tt(this.Wt),this.jt}St(){let t=this.Wt;t.Ct=!1;let e=this.bt.F().vertLine;if(!e.labelVisible)return;let i=this.Hi.yt();if(i.Ni())return;t.$i=i.$i();let n=this.Vi();if(n===null)return;t.yi=n.yi;let o=i.Ui(this.bt.xt());t.Gt=i.qi(g(o)),t.Ct=!0;let r=qi(e.labelBackgroundColor);t.t=r.t,t.D=r.i,t.li=i.F().ticksVisible}},Ye=class{constructor(){this.Yi=null,this.Xi=0}Zi(){return this.Xi}Ki(t){this.Xi=t}Bt(){return this.Yi}Gi(t){this.Yi=t}Ji(t){return[]}Qi(){return[]}Ct(){return!0}},Qr;(function(s){s[s.Normal=0]="Normal",s[s.Magnet=1]="Magnet"})(Qr||(Qr={}));var ts=class extends Ye{constructor(t,e){super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this.on=NaN,this._n=NaN,this.Hi=t,this.un=e,this.cn=new $n(t,this),this.dn=((n,o)=>r=>{let a=o(),l=n();if(r===g(this.tn).fn())return{ut:l,yi:a};{let h=g(r.Tt());return{ut:r.pn(a,h),yi:a}}})(()=>this.nn,()=>this.an);let i=((n,o)=>()=>{let r=this.Hi.yt().vn(n()),a=o();return r&&Number.isFinite(a)?{_t:r,yi:a}:null})(()=>this.sn,()=>this.Xt());this.mn=new Jn(this,t,i),this.bn=new Kn(this)}F(){return this.un}gn(t,e){this.on=t,this._n=e}wn(){this.on=NaN,this._n=NaN}Mn(){return this.on}Sn(){return this._n}xn(t,e,i){this.hn||(this.hn=!0),this.en=!0,this.yn(t,e,i)}xt(){return this.sn}Xt(){return this.ln}Zt(){return this.an}Ct(){return this.en}kn(){this.en=!1,this.Cn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.wn()}Tn(t){return this.tn!==null?[this.bn,this.cn]:[]}qt(t){return t===this.tn&&this.un.horzLine.visible}Yt(){return this.un.vertLine.visible}Pn(t,e){this.en&&this.tn===t||this.rn.clear();let i=[];return this.tn===t&&i.push(this.Rn(this.rn,e,this.dn)),i}Qi(){return this.en?[this.mn]:[]}Ht(){return this.tn}Dn(){this.bn.gt(),this.rn.forEach(t=>t.gt()),this.mn.gt(),this.cn.gt()}Bn(t){return t&&!t.fn().Ni()?t.fn():null}yn(t,e,i){this.An(t,e,i)&&this.Dn()}An(t,e,i){let n=this.ln,o=this.an,r=this.nn,a=this.sn,l=this.tn,h=this.Bn(i);this.sn=t,this.ln=isNaN(t)?NaN:this.Hi.yt().Et(t),this.tn=i;let c=h!==null?h.Tt():null;return h!==null&&c!==null?(this.nn=e,this.an=h.Dt(e,c)):(this.nn=NaN,this.an=NaN),n!==this.ln||o!==this.an||a!==this.sn||r!==this.nn||l!==this.tn}Cn(){let t=this.Hi.wt().map(i=>i.Ln().On()).filter(Ll),e=t.length===0?null:Math.max(...t);this.sn=e!==null?e:NaN}Rn(t,e,i){let n=t.get(e);return n===void 0&&(n=new qn(this,e,i),t.set(e,n)),n}};function Ji(s){return s==="left"||s==="right"}var j=class s{constructor(t){this.In=new Map,this.En=[],this.zn=t}Vn(t,e){let i=function(n,o){return n===void 0?o:{Nn:Math.max(n.Nn,o.Nn),Fn:n.Fn||o.Fn}}(this.In.get(t),e);this.In.set(t,i)}Wn(){return this.zn}jn(t){let e=this.In.get(t);return e===void 0?{Nn:this.zn}:{Nn:Math.max(this.zn,e.Nn),Fn:e.Fn}}$n(){this.Hn(),this.En=[{Un:0}]}qn(t){this.Hn(),this.En=[{Un:1,At:t}]}Yn(t){this.Xn(),this.En.push({Un:5,At:t})}Hn(){this.Xn(),this.En.push({Un:6})}Zn(){this.Hn(),this.En=[{Un:4}]}Kn(t){this.Hn(),this.En.push({Un:2,At:t})}Gn(t){this.Hn(),this.En.push({Un:3,At:t})}Jn(){return this.En}Qn(t){for(let e of t.En)this.ts(e);this.zn=Math.max(this.zn,t.zn),t.In.forEach((e,i)=>{this.Vn(i,e)})}static ns(){return new s(2)}static ss(){return new s(3)}ts(t){switch(t.Un){case 0:this.$n();break;case 1:this.qn(t.At);break;case 2:this.Kn(t.At);break;case 3:this.Gn(t.At);break;case 4:this.Zn();break;case 5:this.Yn(t.At);break;case 6:this.Xn()}}Xn(){let t=this.En.findIndex(e=>e.Un===5);t!==-1&&this.En.splice(t,1)}},Kr=".";function St(s,t){if(!mt(s))return"n/a";if(!Ne(t))throw new TypeError("invalid length");if(t<0||t>16)throw new TypeError("invalid length");return t===0?s.toString():("0000000000000000"+s.toString()).slice(-t)}var _e=class{constructor(t,e){if(e||(e=1),mt(t)&&Ne(t)||(t=100),t<0)throw new TypeError("invalid base");this.zi=t,this.es=e,this.rs()}format(t){let e=t<0?"\u2212":"";return t=Math.abs(t),e+this.hs(t)}rs(){if(this.ls=0,this.zi>0&&this.es>0){let t=this.zi;for(;t>1;)t/=10,this.ls++}}hs(t){let e=this.zi/this.es,i=Math.floor(t),n="",o=this.ls!==void 0?this.ls:NaN;if(e>1){let r=+(Math.round(t*e)-i*e).toFixed(this.ls);r>=e&&(r-=e,i+=1),n=Kr+St(+r.toFixed(this.ls)*this.es,o)}else i=Math.round(i*e)/e,o>0&&(n=Kr+St(0,o));return i.toFixed(0)+n}},Ai=class extends _e{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}},es=class{constructor(t){this.os=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this._s(t):t<999995?e+this._s(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this._s(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this._s(t/1e9)+"B")}_s(t){let e,i=Math.pow(10,this.os);return e=(t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.os).replace(/\.?0+$/,""):String(t),e.replace(/(\.[1-9]*)0+$/,(n,o)=>o)}};function za(s,t,e,i,n,o,r){if(t.length===0||i.from>=t.length||i.to<=0)return;let a=s.context,l=t[i.from],h=o(s,l),c=l;if(i.to-i.from<2){let m=n/2;a.beginPath();let f={st:l.st-m,et:l.et},p={st:l.st+m,et:l.et};return a.moveTo(f.st,f.et),a.lineTo(p.st,p.et),void r(a,h,f,p)}let d=(m,f)=>{r(a,h,c,f),a.beginPath(),h=m,c=f},u=c;a.beginPath(),a.moveTo(l.st,l.et);for(let m=i.from+1;m<i.to;++m){u=t[m];let f=o(s,u);switch(e){case 0:a.lineTo(u.st,u.et);break;case 1:a.lineTo(u.st,t[m-1].et),f!==h&&(d(f,u),a.lineTo(u.st,t[m-1].et)),a.lineTo(u.st,u.et);break;case 2:{let[p,y]=Vl(t,m-1,m);a.bezierCurveTo(p.st,p.et,y.st,y.et,u.st,u.et);break}}e!==1&&f!==h&&(d(f,u),a.moveTo(u.st,u.et))}(c!==u||c===u&&e===1)&&r(a,h,c,u)}var qr=6;function On(s,t){return{st:s.st-t.st,et:s.et-t.et}}function Zr(s,t){return{st:s.st/t,et:s.et/t}}function Vl(s,t,e){let i=Math.max(0,t-1),n=Math.min(s.length-1,e+1);var o,r;return[(o=s[t],r=Zr(On(s[e],s[i]),qr),{st:o.st+r.st,et:o.et+r.et}),On(s[e],Zr(On(s[n],s[t]),qr))]}function Hl(s,t,e,i,n){t.lineTo(n.st,s),t.lineTo(i.st,s),t.closePath(),t.fillStyle=e,t.fill()}var Fi=class extends te{constructor(){super(...arguments),this.J=null}tt(t){this.J=t}Z(t){var e;if(this.J===null)return;let{nt:i,it:n,us:o,rt:r,Ft:a,cs:l}=this.J,h=(e=this.J.ds)!==null&&e!==void 0?e:this.J.fs?0:t.mediaSize.height;if(n===null)return;let c=t.context;c.lineCap="butt",c.lineJoin="round",c.lineWidth=r,Jt(c,a),c.lineWidth=1,za(t,i,l,n,o,this.ps.bind(this),Hl.bind(null,h))}},is=class extends Fi{constructor(){super(...arguments),this.vs=null}ps(t,e){let{context:i,mediaSize:n}=t,{bs:o,gs:r}=e,a=n.height;if(this.vs!==null&&this.vs.topColor===o&&this.vs.bottomColor===r&&this.vs.bottom===a)return this.vs.fillStyle;let l=i.createLinearGradient(0,0,0,a);return l.addColorStop(0,o),l.addColorStop(1,r),this.vs={topColor:o,bottomColor:r,fillStyle:l,bottom:a},l}};function Yl(s,t){s.strokeStyle=t,s.stroke()}var Ni=class extends te{constructor(){super(...arguments),this.J=null}tt(t){this.J=t}Z(t){if(this.J===null)return;let{nt:e,it:i,us:n,cs:o,rt:r,Ft:a}=this.J;if(i===null)return;let l=t.context;l.lineCap="butt",l.lineWidth=r,Jt(l,a),l.lineJoin="round",za(t,e,o,i,n,this.ws.bind(this),Yl)}},Vi=class extends Ni{ws(t,e){return e.ot}};function Ge(s,t,e,i=0,n=s.length){let o=n-i;for(;0<o;){let r=o>>1,a=i+r;e(s[a],t)?(i=a+1,o-=r+1):o=r}return i}function La(s,t,e,i=0,n=s.length){let o=n-i;for(;0<o;){let r=o>>1,a=i+r;e(t,s[a])?o=r:(i=a+1,o-=r+1)}return i}function jl(s,t){return s._t<t}function Wl(s,t){return s<t._t}function Ba(s,t,e){let i=t.Ms(),n=t.ci(),o=Ge(s,i,jl),r=La(s,n,Wl);if(!e)return{from:o,to:r};let a=o,l=r;return o>0&&o<s.length&&s[o]._t>=i&&(a=o-1),r>0&&r<s.length&&s[r-1]._t<=n&&(l=r+1),{from:a,to:l}}var Hi=class{constructor(t,e,i){this.Ss=!0,this.xs=!0,this.ys=!0,this.ks=[],this.Cs=null,this.Ts=t,this.Ps=e,this.Rs=i}gt(t){this.Ss=!0,t==="data"&&(this.xs=!0),t==="options"&&(this.ys=!0)}Mt(){return this.Ts.Ct()?(this.Ds(),this.Cs===null?null:this.Bs):null}As(){this.ks=this.ks.map(t=>Object.assign(Object.assign({},t),this.Ts.Ls().Os(t._t)))}Is(){this.Cs=null}Ds(){this.xs&&(this.Es(),this.xs=!1),this.ys&&(this.As(),this.ys=!1),this.Ss&&(this.zs(),this.Ss=!1)}zs(){let t=this.Ts.Bt(),e=this.Ps.yt();if(this.Is(),e.Ni()||t.Ni())return;let i=e.Vs();if(i===null||this.Ts.Ln().Ns()===0)return;let n=this.Ts.Tt();n!==null&&(this.Cs=Ba(this.ks,i,this.Rs),this.Fs(t,e,n.At),this.Ws())}},ve=class extends Hi{constructor(t,e){super(t,e,!0)}Fs(t,e,i){e.js(this.ks,Li(this.Cs)),t.$s(this.ks,i,Li(this.Cs))}Hs(t,e){return{_t:t,ut:e,st:NaN,et:NaN}}Es(){let t=this.Ts.Ls();this.ks=this.Ts.Ln().Us().map(e=>{let i=e.At[3];return this.qs(e.Ys,i,t)})}},ns=class extends ve{constructor(t,e){super(t,e),this.Bs=new Ve,this.Xs=new is,this.Zs=new Vi,this.Bs.Y([this.Xs,this.Zs])}qs(t,e,i){return Object.assign(Object.assign({},this.Hs(t,e)),i.Os(t))}Ws(){let t=this.Ts.F();this.Xs.tt({cs:t.lineType,nt:this.ks,Ft:t.lineStyle,rt:t.lineWidth,ds:null,fs:t.invertFilledArea,it:this.Cs,us:this.Ps.yt().Ks()}),this.Zs.tt({cs:t.lineType,nt:this.ks,Ft:t.lineStyle,rt:t.lineWidth,it:this.Cs,us:this.Ps.yt().Ks()})}},ss=class extends Tt{constructor(){super(...arguments),this.zt=null,this.Gs=0,this.Js=0}tt(t){this.zt=t}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(this.zt===null||this.zt.Ln.length===0||this.zt.it===null)return;this.Gs=this.Qs(e),this.Gs>=2&&Math.max(1,Math.floor(e))%2!=this.Gs%2&&this.Gs--,this.Js=this.zt.te?Math.min(this.Gs,Math.floor(e)):this.Gs;let n=null,o=this.Js<=this.Gs&&this.zt.Ks>=Math.floor(1.5*e);for(let r=this.zt.it.from;r<this.zt.it.to;++r){let a=this.zt.Ln[r];n!==a.ie&&(t.fillStyle=a.ie,n=a.ie);let l=Math.floor(.5*this.Js),h=Math.round(a.st*e),c=h-l,d=this.Js,u=c+d-1,m=Math.min(a.ne,a.se),f=Math.max(a.ne,a.se),p=Math.round(m*i)-l,y=Math.round(f*i)+l,C=Math.max(y-p,this.Js);t.fillRect(c,p,d,C);let L=Math.ceil(1.5*this.Gs);if(o){if(this.zt.ee){let Et=h-L,at=Math.max(p,Math.round(a.re*i)-l),Z=at+d-1;Z>p+C-1&&(Z=p+C-1,at=Z-d+1),t.fillRect(Et,at,c-Et,Z-at+1)}let A=h+L,T=Math.max(p,Math.round(a.he*i)-l),V=T+d-1;V>p+C-1&&(V=p+C-1,T=V-d+1),t.fillRect(u+1,T,A-u,V-T+1)}}}Qs(t){let e=Math.floor(t);return Math.max(e,Math.floor(function(i,n){return Math.floor(.3*i*n)}(g(this.zt).Ks,t)))}},Yi=class extends Hi{constructor(t,e){super(t,e,!1)}Fs(t,e,i){e.js(this.ks,Li(this.Cs)),t.le(this.ks,i,Li(this.Cs))}ae(t,e,i){return{_t:t,oe:e.At[0],_e:e.At[1],ue:e.At[2],ce:e.At[3],st:NaN,re:NaN,ne:NaN,se:NaN,he:NaN}}Es(){let t=this.Ts.Ls();this.ks=this.Ts.Ln().Us().map(e=>this.qs(e.Ys,e,t))}},os=class extends Yi{constructor(){super(...arguments),this.Bs=new ss}qs(t,e,i){return Object.assign(Object.assign({},this.ae(t,e,i)),i.Os(t))}Ws(){let t=this.Ts.F();this.Bs.tt({Ln:this.ks,Ks:this.Ps.yt().Ks(),ee:t.openVisible,te:t.thinBars,it:this.Cs})}};function ji(s,t,e){return Math.min(Math.max(s,t),e)}function Si(s,t,e){return t-s<=e}function Aa(s){return s<=0?NaN:Math.log(s)/Math.log(10)}function Fa(s){let t=Math.ceil(s);return t%2==0?t-1:t}var rs=class extends Fi{constructor(){super(...arguments),this.vs=null}ps(t,e){var i;let{context:n,mediaSize:o}=t,r=this.J,{de:a,fe:l,pe:h,ve:c}=e,d=(i=r.ds)!==null&&i!==void 0?i:o.height,u=o.height;if(this.vs!==null&&this.vs.topFillColor1===a&&this.vs.topFillColor2===l&&this.vs.bottomFillColor1===h&&this.vs.bottomFillColor2===c&&this.vs.baseLevelCoordinate===d&&this.vs.bottom===u)return this.vs.fillStyle;let m=n.createLinearGradient(0,0,0,u),f=ji(d/u,0,1);return m.addColorStop(0,a),m.addColorStop(f,l),m.addColorStop(f,h),m.addColorStop(1,c),this.vs={topFillColor1:a,topFillColor2:l,bottomFillColor1:h,bottomFillColor2:c,fillStyle:m,baseLevelCoordinate:d,bottom:u},m}},as=class extends Ni{constructor(){super(...arguments),this.me=null}ws(t,e){let{context:i,mediaSize:n}=t,o=this.J,{be:r,ge:a}=e,{ds:l}=o,h=n.height;if(this.me!==null&&this.me.topLineColor===r&&this.me.bottomLineColor===a&&this.me.baseLevelCoordinate===l&&this.me.bottom===h)return this.me.strokeStyle;let c=i.createLinearGradient(0,0,0,h),d=ji(l/h,0,1);return c.addColorStop(0,r),c.addColorStop(d,r),c.addColorStop(d,a),c.addColorStop(1,a),this.me={topLineColor:r,bottomLineColor:a,strokeStyle:c,baseLevelCoordinate:l,bottom:h},c}},ls=class extends ve{constructor(t,e){super(t,e),this.Bs=new Ve,this.we=new rs,this.Me=new as,this.Bs.Y([this.we,this.Me])}qs(t,e,i){return Object.assign(Object.assign({},this.Hs(t,e)),i.Os(t))}Ws(){let t=this.Ts.Tt();if(t===null)return;let e=this.Ts.F(),i=this.Ts.Bt().Dt(e.baseValue.price,t.At),n=this.Ps.yt().Ks();this.we.tt({nt:this.ks,rt:e.lineWidth,Ft:e.lineStyle,cs:e.lineType,ds:i,fs:!1,it:this.Cs,us:n}),this.Me.tt({nt:this.ks,rt:e.lineWidth,Ft:e.lineStyle,cs:e.lineType,ds:i,it:this.Cs,us:n})}},hs=class extends Tt{constructor(){super(...arguments),this.zt=null,this.Gs=0}tt(t){this.zt=t}Z(t){if(this.zt===null||this.zt.Ln.length===0||this.zt.it===null)return;let{horizontalPixelRatio:e}=t;this.Gs=function(o,r){if(o>=2.5&&o<=4)return Math.floor(3*r);let a=1-.2*Math.atan(Math.max(4,o)-4)/(.5*Math.PI),l=Math.floor(o*a*r),h=Math.floor(o*r),c=Math.min(l,h);return Math.max(Math.floor(r),c)}(this.zt.Ks,e),this.Gs>=2&&Math.floor(e)%2!=this.Gs%2&&this.Gs--;let i=this.zt.Ln;this.zt.Se&&this.xe(t,i,this.zt.it),this.zt.ui&&this.ye(t,i,this.zt.it);let n=this.ke(e);(!this.zt.ui||this.Gs>2*n)&&this.Ce(t,i,this.zt.it)}xe(t,e,i){if(this.zt===null)return;let{context:n,horizontalPixelRatio:o,verticalPixelRatio:r}=t,a="",l=Math.min(Math.floor(o),Math.floor(this.zt.Ks*o));l=Math.max(Math.floor(o),Math.min(l,this.Gs));let h=Math.floor(.5*l),c=null;for(let d=i.from;d<i.to;d++){let u=e[d];u.Te!==a&&(n.fillStyle=u.Te,a=u.Te);let m=Math.round(Math.min(u.re,u.he)*r),f=Math.round(Math.max(u.re,u.he)*r),p=Math.round(u.ne*r),y=Math.round(u.se*r),C=Math.round(o*u.st)-h,L=C+l-1;c!==null&&(C=Math.max(c+1,C),C=Math.min(C,L));let A=L-C+1;n.fillRect(C,p,A,m-p),n.fillRect(C,f+1,A,y-f),c=L}}ke(t){let e=Math.floor(1*t);this.Gs<=2*e&&(e=Math.floor(.5*(this.Gs-1)));let i=Math.max(Math.floor(t),e);return this.Gs<=2*i?Math.max(Math.floor(t),Math.floor(1*t)):i}ye(t,e,i){if(this.zt===null)return;let{context:n,horizontalPixelRatio:o,verticalPixelRatio:r}=t,a="",l=this.ke(o),h=null;for(let c=i.from;c<i.to;c++){let d=e[c];d.Pe!==a&&(n.fillStyle=d.Pe,a=d.Pe);let u=Math.round(d.st*o)-Math.floor(.5*this.Gs),m=u+this.Gs-1,f=Math.round(Math.min(d.re,d.he)*r),p=Math.round(Math.max(d.re,d.he)*r);if(h!==null&&(u=Math.max(h+1,u),u=Math.min(u,m)),this.zt.Ks*o>2*l)Fl(n,u,f,m-u+1,p-f+1,l);else{let y=m-u+1;n.fillRect(u,f,y,p-f+1)}h=m}}Ce(t,e,i){if(this.zt===null)return;let{context:n,horizontalPixelRatio:o,verticalPixelRatio:r}=t,a="",l=this.ke(o);for(let h=i.from;h<i.to;h++){let c=e[h],d=Math.round(Math.min(c.re,c.he)*r),u=Math.round(Math.max(c.re,c.he)*r),m=Math.round(c.st*o)-Math.floor(.5*this.Gs),f=m+this.Gs-1;if(c.ie!==a){let p=c.ie;n.fillStyle=p,a=p}this.zt.ui&&(m+=l,d+=l,f-=l,u-=l),d>u||n.fillRect(m,d,f-m+1,u-d+1)}}},cs=class extends Yi{constructor(){super(...arguments),this.Bs=new hs}qs(t,e,i){return Object.assign(Object.assign({},this.ae(t,e,i)),i.Os(t))}Ws(){let t=this.Ts.F();this.Bs.tt({Ln:this.ks,Ks:this.Ps.yt().Ks(),Se:t.wickVisible,ui:t.borderVisible,it:this.Cs})}},ds=class extends Tt{constructor(){super(...arguments),this.zt=null,this.Re=[]}tt(t){this.zt=t,this.Re=[]}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(this.zt===null||this.zt.nt.length===0||this.zt.it===null)return;this.Re.length||this.De(e);let n=Math.max(1,Math.floor(i)),o=Math.round(this.zt.Be*i)-Math.floor(n/2),r=o+n;for(let a=this.zt.it.from;a<this.zt.it.to;a++){let l=this.zt.nt[a],h=this.Re[a-this.zt.it.from],c=Math.round(l.et*i),d,u;t.fillStyle=l.ie,c<=o?(d=c,u=r):(d=o,u=c-Math.floor(n/2)+n),t.fillRect(h.Ms,d,h.ci-h.Ms+1,u-d)}}De(t){if(this.zt===null||this.zt.nt.length===0||this.zt.it===null)return void(this.Re=[]);let e=Math.ceil(this.zt.Ks*t)<=1?0:Math.max(1,Math.floor(t)),i=Math.round(this.zt.Ks*t)-e;this.Re=new Array(this.zt.it.to-this.zt.it.from);for(let o=this.zt.it.from;o<this.zt.it.to;o++){let r=this.zt.nt[o],a=Math.round(r.st*t),l,h;if(i%2){let c=(i-1)/2;l=a-c,h=a+c}else{let c=i/2;l=a-c,h=a+c-1}this.Re[o-this.zt.it.from]={Ms:l,ci:h,Ae:a,Oe:r.st*t,_t:r._t}}for(let o=this.zt.it.from+1;o<this.zt.it.to;o++){let r=this.Re[o-this.zt.it.from],a=this.Re[o-this.zt.it.from-1];r._t===a._t+1&&r.Ms-a.ci!==e+1&&(a.Ae>a.Oe?a.ci=r.Ms-e-1:r.Ms=a.ci+e+1)}let n=Math.ceil(this.zt.Ks*t);for(let o=this.zt.it.from;o<this.zt.it.to;o++){let r=this.Re[o-this.zt.it.from];r.ci<r.Ms&&(r.ci=r.Ms);let a=r.ci-r.Ms+1;n=Math.min(a,n)}if(e>0&&n<4)for(let o=this.zt.it.from;o<this.zt.it.to;o++){let r=this.Re[o-this.zt.it.from];r.ci-r.Ms+1>n&&(r.Ae>r.Oe?r.ci-=1:r.Ms+=1)}}},us=class extends ve{constructor(){super(...arguments),this.Bs=new ds}qs(t,e,i){return Object.assign(Object.assign({},this.Hs(t,e)),i.Os(t))}Ws(){let t={nt:this.ks,Ks:this.Ps.yt().Ks(),it:this.Cs,Be:this.Ts.Bt().Dt(this.Ts.F().base,g(this.Ts.Tt()).At)};this.Bs.tt(t)}},ms=class extends ve{constructor(){super(...arguments),this.Bs=new Vi}qs(t,e,i){return Object.assign(Object.assign({},this.Hs(t,e)),i.Os(t))}Ws(){let t=this.Ts.F(),e={nt:this.ks,Ft:t.lineStyle,cs:t.lineType,rt:t.lineWidth,it:this.Cs,us:this.Ps.yt().Ks()};this.Bs.tt(e)}},Ul=/[2-9]/g,ee=class{constructor(t=50){this.Le=0,this.Ie=1,this.Ee=1,this.ze={},this.Ve=new Map,this.Ne=t}Fe(){this.Le=0,this.Ve.clear(),this.Ie=1,this.Ee=1,this.ze={}}Si(t,e,i){return this.We(t,e,i).width}Mi(t,e,i){let n=this.We(t,e,i);return((n.actualBoundingBoxAscent||0)-(n.actualBoundingBoxDescent||0))/2}We(t,e,i){let n=i||Ul,o=String(e).replace(n,"0");if(this.Ve.has(o))return et(this.Ve.get(o)).je;if(this.Le===this.Ne){let a=this.ze[this.Ee];delete this.ze[this.Ee],this.Ve.delete(a),this.Ee++,this.Le--}t.save(),t.textBaseline="middle";let r=t.measureText(o);return t.restore(),r.width===0&&e.length||(this.Ve.set(o,{je:r,$e:this.Ie}),this.ze[this.Ie]=o,this.Le++,this.Ie++),r}},fs=class{constructor(t){this.He=null,this.S=null,this.Ue="right",this.qe=t}Ye(t,e,i){this.He=t,this.S=e,this.Ue=i}X(t){this.S!==null&&this.He!==null&&this.He.X(t,this.S,this.qe,this.Ue)}},Wi=class{constructor(t,e,i){this.Xe=t,this.qe=new ee(50),this.Ze=e,this.N=i,this.W=-1,this.jt=new fs(this.qe)}Mt(){let t=this.N.Ke(this.Ze);if(t===null)return null;let e=t.Ge(this.Ze)?t.Je():this.Ze.Bt();if(e===null)return null;let i=t.Qe(e);if(i==="overlay")return null;let n=this.N.tr();return n.T!==this.W&&(this.W=n.T,this.qe.Fe()),this.jt.Ye(this.Xe.Ii(),n,i),this.jt}},ps=class extends Tt{constructor(){super(...arguments),this.zt=null}tt(t){this.zt=t}ir(t,e){var i;if(!(!((i=this.zt)===null||i===void 0)&&i.Ct))return null;let{et:n,rt:o,nr:r}=this.zt;return e>=n-o-7&&e<=n+o+7?{sr:this.zt,nr:r}:null}Z({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.zt===null||this.zt.Ct===!1)return;let o=Math.round(this.zt.et*n);o<0||o>e.height||(t.lineCap="butt",t.strokeStyle=this.zt.D,t.lineWidth=Math.floor(this.zt.rt*i),Jt(t,this.zt.Ft),Ra(t,o,0,e.width))}},je=class{constructor(t){this.er={et:0,D:"rgba(0, 0, 0, 0)",rt:1,Ft:0,Ct:!1},this.rr=new ps,this.vt=!0,this.Ts=t,this.Ps=t.Ut(),this.rr.tt(this.er)}gt(){this.vt=!0}Mt(){return this.Ts.Ct()?(this.vt&&(this.hr(),this.vt=!1),this.rr):null}},gs=class extends je{constructor(t){super(t)}hr(){this.er.Ct=!1;let t=this.Ts.Bt(),e=t.lr().lr;if(e!==2&&e!==3)return;let i=this.Ts.F();if(!i.baseLineVisible||!this.Ts.Ct())return;let n=this.Ts.Tt();n!==null&&(this.er.Ct=!0,this.er.et=t.Dt(n.At,n.At),this.er.D=i.baseLineColor,this.er.rt=i.baseLineWidth,this.er.Ft=i.baseLineStyle)}},bs=class extends Tt{constructor(){super(...arguments),this.zt=null}tt(t){this.zt=t}ar(){return this.zt}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){let n=this.zt;if(n===null)return;let o=Math.max(1,Math.floor(e)),r=o%2/2,a=Math.round(n.Oe.x*e)+r,l=n.Oe.y*i;t.fillStyle=n._r,t.beginPath();let h=Math.max(2,1.5*n.ur)*e;t.arc(a,l,h,0,2*Math.PI,!1),t.fill(),t.fillStyle=n.cr,t.beginPath(),t.arc(a,l,n.lt*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=o,t.strokeStyle=n.dr,t.beginPath(),t.arc(a,l,n.lt*e+o/2,0,2*Math.PI,!1),t.stroke()}},Xl=[{pr:0,vr:.25,mr:4,br:10,gr:.25,wr:0,Mr:.4,Sr:.8},{pr:.25,vr:.525,mr:10,br:14,gr:0,wr:0,Mr:.8,Sr:0},{pr:.525,vr:1,mr:14,br:14,gr:0,wr:0,Mr:0,Sr:0}];function Jr(s,t,e,i){return function(n,o){if(n==="transparent")return n;let r=zi(n),a=r[3];return`rgba(${r[0]}, ${r[1]}, ${r[2]}, ${o*a})`}(s,e+(i-e)*t)}function ta(s,t){let e=s%2600/2600,i;for(let l of Xl)if(e>=l.pr&&e<=l.vr){i=l;break}ne(i!==void 0,"Last price animation internal logic error");let n=(e-i.pr)/(i.vr-i.pr);return{cr:Jr(t,n,i.gr,i.wr),dr:Jr(t,n,i.Mr,i.Sr),lt:(o=n,r=i.mr,a=i.br,r+(a-r)*o)};var o,r,a}var _s=class{constructor(t){this.jt=new bs,this.vt=!0,this.yr=!0,this.kr=performance.now(),this.Cr=this.kr-1,this.Tr=t}Pr(){this.Cr=this.kr-1,this.gt()}Rr(){if(this.gt(),this.Tr.F().lastPriceAnimation===2){let t=performance.now(),e=this.Cr-t;if(e>0)return void(e<650&&(this.Cr+=2600));this.kr=t,this.Cr=t+2600}}gt(){this.vt=!0}Dr(){this.yr=!0}Ct(){return this.Tr.F().lastPriceAnimation!==0}Br(){switch(this.Tr.F().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Cr}}Mt(){return this.vt?(this.St(),this.vt=!1,this.yr=!1):this.yr&&(this.Ar(),this.yr=!1),this.jt}St(){this.jt.tt(null);let t=this.Tr.Ut().yt(),e=t.Vs(),i=this.Tr.Tt();if(e===null||i===null)return;let n=this.Tr.Or(!0);if(n.Lr||!e.Ir(n.Ys))return;let o={x:t.Et(n.Ys),y:this.Tr.Bt().Dt(n.ut,i.At)},r=n.D,a=this.Tr.F().lineWidth,l=ta(this.Er(),r);this.jt.tt({_r:r,ur:a,cr:l.cr,dr:l.dr,lt:l.lt,Oe:o})}Ar(){let t=this.jt.ar();if(t!==null){let e=ta(this.Er(),t._r);t.cr=e.cr,t.dr=e.dr,t.lt=e.lt}}Er(){return this.Br()?performance.now()-this.kr:2599}};function Le(s,t){return Fa(Math.min(Math.max(s,12),30)*t)}function We(s,t){switch(s){case"arrowDown":case"arrowUp":return Le(t,1);case"circle":return Le(t,.8);case"square":return Le(t,.7)}}function Na(s){return function(t){let e=Math.ceil(t);return e%2!=0?e-1:e}(Le(s,1))}function ea(s){return Math.max(Le(s,.1),3)}function Va(s,t,e,i,n){let o=We("square",e),r=(o-1)/2,a=s-r,l=t-r;return i>=a&&i<=a+o&&n>=l&&n<=l+o}function ia(s,t,e,i,n){let o=(We("arrowUp",n)-1)/2,r=(Fa(n/2)-1)/2;t.beginPath(),s?(t.moveTo(e-o,i),t.lineTo(e,i-o),t.lineTo(e+o,i),t.lineTo(e+r,i),t.lineTo(e+r,i+o),t.lineTo(e-r,i+o),t.lineTo(e-r,i)):(t.moveTo(e-o,i),t.lineTo(e,i+o),t.lineTo(e+o,i),t.lineTo(e+r,i),t.lineTo(e+r,i-o),t.lineTo(e-r,i-o),t.lineTo(e-r,i)),t.fill()}function Gl(s,t,e,i,n,o){return Va(t,e,i,n,o)}var vs=class extends te{constructor(){super(...arguments),this.zt=null,this.qe=new ee,this.W=-1,this.j="",this.zr=""}tt(t){this.zt=t}Ye(t,e){this.W===t&&this.j===e||(this.W=t,this.j=e,this.zr=be(t,e),this.qe.Fe())}ir(t,e){if(this.zt===null||this.zt.it===null)return null;for(let i=this.zt.it.from;i<this.zt.it.to;i++){let n=this.zt.nt[i];if(Ql(n,t,e))return{sr:n.Vr,nr:n.nr}}return null}Z({context:t},e,i){if(this.zt!==null&&this.zt.it!==null){t.textBaseline="middle",t.font=this.zr;for(let n=this.zt.it.from;n<this.zt.it.to;n++){let o=this.zt.nt[n];o.Gt!==void 0&&(o.Gt.$i=this.qe.Si(t,o.Gt.Nr),o.Gt.It=this.W,o.Gt.st=o.st-o.Gt.$i/2),$l(o,t)}}}};function $l(s,t){t.fillStyle=s.D,s.Gt!==void 0&&function(e,i,n,o){e.fillText(i,n,o)}(t,s.Gt.Nr,s.Gt.st,s.Gt.et),function(e,i){if(e.Ns!==0){switch(e.Fr){case"arrowDown":return void ia(!1,i,e.st,e.et,e.Ns);case"arrowUp":return void ia(!0,i,e.st,e.et,e.Ns);case"circle":return void function(n,o,r,a){let l=(We("circle",a)-1)/2;n.beginPath(),n.arc(o,r,l,0,2*Math.PI,!1),n.fill()}(i,e.st,e.et,e.Ns);case"square":return void function(n,o,r,a){let l=We("square",a),h=(l-1)/2,c=o-h,d=r-h;n.fillRect(c,d,l,l)}(i,e.st,e.et,e.Ns)}e.Fr}}(s,t)}function Ql(s,t,e){return!(s.Gt===void 0||!function(i,n,o,r,a,l){let h=r/2;return a>=i&&a<=i+o&&l>=n-h&&l<=n+h}(s.Gt.st,s.Gt.et,s.Gt.$i,s.Gt.It,t,e))||function(i,n,o){if(i.Ns===0)return!1;switch(i.Fr){case"arrowDown":case"arrowUp":return Gl(0,i.st,i.et,i.Ns,n,o);case"circle":return function(r,a,l,h,c){let d=2+We("circle",l)/2,u=r-h,m=a-c;return Math.sqrt(u*u+m*m)<=d}(i.st,i.et,i.Ns,n,o);case"square":return Va(i.st,i.et,i.Ns,n,o)}}(s,t,e)}function Kl(s,t,e,i,n,o,r,a,l){let h=mt(e)?e:e.ce,c=mt(e)?e:e._e,d=mt(e)?e:e.ue,u=mt(t.size)?Math.max(t.size,0):1,m=Na(a.Ks())*u,f=m/2;switch(s.Ns=m,t.position){case"inBar":return s.et=r.Dt(h,l),void(s.Gt!==void 0&&(s.Gt.et=s.et+f+o+.6*n));case"aboveBar":return s.et=r.Dt(c,l)-f-i.Wr,s.Gt!==void 0&&(s.Gt.et=s.et-f-.6*n,i.Wr+=1.2*n),void(i.Wr+=m+o);case"belowBar":return s.et=r.Dt(d,l)+f+i.jr,s.Gt!==void 0&&(s.Gt.et=s.et+f+o+.6*n,i.jr+=1.2*n),void(i.jr+=m+o)}t.position}var ys=class{constructor(t,e){this.vt=!0,this.$r=!0,this.Hr=!0,this.Ur=null,this.jt=new vs,this.Tr=t,this.Hi=e,this.zt={nt:[],it:null}}gt(t){this.vt=!0,this.Hr=!0,t==="data"&&(this.$r=!0)}Mt(t){if(!this.Tr.Ct())return null;this.vt&&this.qr();let e=this.Hi.F().layout;return this.jt.Ye(e.fontSize,e.fontFamily),this.jt.tt(this.zt),this.jt}Yr(){if(this.Hr){if(this.Tr.Xr().length>0){let t=this.Hi.yt().Ks(),e=ea(t),i=1.5*Na(t)+2*e;this.Ur={above:i,below:i}}else this.Ur=null;this.Hr=!1}return this.Ur}qr(){let t=this.Tr.Bt(),e=this.Hi.yt(),i=this.Tr.Xr();this.$r&&(this.zt.nt=i.map(c=>({_t:c.time,st:0,et:0,Ns:0,Fr:c.shape,D:c.color,Vr:c.internalId,nr:c.id,Gt:void 0})),this.$r=!1);let n=this.Hi.F().layout;this.zt.it=null;let o=e.Vs();if(o===null)return;let r=this.Tr.Tt();if(r===null||this.zt.nt.length===0)return;let a=NaN,l=ea(e.Ks()),h={Wr:l,jr:l};this.zt.it=Ba(this.zt.nt,o,!0);for(let c=this.zt.it.from;c<this.zt.it.to;c++){let d=i[c];d.time!==a&&(h.Wr=l,h.jr=l,a=d.time);let u=this.zt.nt[c];u.st=e.Et(d.time),d.text!==void 0&&d.text.length>0&&(u.Gt={Nr:d.text,st:0,et:0,$i:0,It:0});let m=this.Tr.Zr(d.time);m!==null&&Kl(u,d,m,h,n.fontSize,l,t,e,r.At)}this.vt=!1}},Cs=class extends je{constructor(t){super(t)}hr(){let t=this.er;t.Ct=!1;let e=this.Ts.F();if(!e.priceLineVisible||!this.Ts.Ct())return;let i=this.Ts.Or(e.priceLineSource===0);i.Lr||(t.Ct=!0,t.et=i.yi,t.D=this.Ts.Kr(i.D),t.rt=e.priceLineWidth,t.Ft=e.priceLineStyle)}},ws=class extends He{constructor(t){super(),this.$t=t}Ei(t,e,i){t.Ct=!1,e.Ct=!1;let n=this.$t;if(!n.Ct())return;let o=n.F(),r=o.lastValueVisible,a=n.Gr()!=="",l=o.seriesLastValueMode===0,h=n.Or(!1);if(h.Lr)return;r&&(t.Gt=this.Jr(h,r,l),t.Ct=t.Gt.length!==0),(a||l)&&(e.Gt=this.Qr(h,r,a,l),e.Ct=e.Gt.length>0);let c=n.Kr(h.D),d=qi(c);i.t=d.t,i.yi=h.yi,e.Ot=n.Ut().Lt(h.yi/n.Bt().It()),t.Ot=c,t.D=d.i,e.D=d.i}Qr(t,e,i,n){let o="",r=this.$t.Gr();return i&&r.length!==0&&(o+=`${r} `),e&&n&&(o+=this.$t.Bt().th()?t.ih:t.nh),o.trim()}Jr(t,e,i){return e?i?this.$t.Bt().th()?t.nh:t.ih:t.Gt:""}},rt=class s{constructor(t,e){this.sh=t,this.eh=e}rh(t){return t!==null&&this.sh===t.sh&&this.eh===t.eh}hh(){return new s(this.sh,this.eh)}lh(){return this.sh}ah(){return this.eh}oh(){return this.eh-this.sh}Ni(){return this.eh===this.sh||Number.isNaN(this.eh)||Number.isNaN(this.sh)}Qn(t){return t===null?this:new s(Math.min(this.lh(),t.lh()),Math.max(this.ah(),t.ah()))}_h(t){if(!mt(t)||this.eh-this.sh===0)return;let e=.5*(this.eh+this.sh),i=this.eh-e,n=this.sh-e;i*=t,n*=t,this.eh=e+i,this.sh=e+n}uh(t){mt(t)&&(this.eh+=t,this.sh+=t)}dh(){return{minValue:this.sh,maxValue:this.eh}}static fh(t){return t===null?null:new s(t.minValue,t.maxValue)}},Ui=class s{constructor(t,e){this.ph=t,this.mh=e||null}bh(){return this.ph}gh(){return this.mh}dh(){return this.ph===null?null:{priceRange:this.ph.dh(),margins:this.mh||void 0}}static fh(t){return t===null?null:new s(rt.fh(t.priceRange),t.margins)}},Ms=class extends je{constructor(t,e){super(t),this.wh=e}hr(){let t=this.er;t.Ct=!1;let e=this.wh.F();if(!this.Ts.Ct()||!e.lineVisible)return;let i=this.wh.Mh();i!==null&&(t.Ct=!0,t.et=i,t.D=e.color,t.rt=e.lineWidth,t.Ft=e.lineStyle,t.nr=this.wh.F().id)}},xs=class extends He{constructor(t,e){super(),this.Tr=t,this.wh=e}Ei(t,e,i){t.Ct=!1,e.Ct=!1;let n=this.wh.F(),o=n.axisLabelVisible,r=n.title!=="",a=this.Tr;if(!o||!a.Ct())return;let l=this.wh.Mh();if(l===null)return;r&&(e.Gt=n.title,e.Ct=!0),e.Ot=a.Ut().Lt(l/a.Bt().It()),t.Gt=this.Sh(n.price),t.Ct=!0;let h=qi(n.axisLabelColor||n.color);i.t=h.t;let c=n.axisLabelTextColor||h.i;t.D=c,e.D=c,i.yi=l}Sh(t){let e=this.Tr.Tt();return e===null?"":this.Tr.Bt().Fi(t,e.At)}},Ss=class{constructor(t,e){this.Tr=t,this.un=e,this.xh=new Ms(t,this),this.Xe=new xs(t,this),this.yh=new Wi(this.Xe,t,t.Ut())}kh(t){ft(this.un,t),this.gt(),this.Tr.Ut().Ch()}F(){return this.un}Th(){return this.xh}Ph(){return this.yh}Rh(){return this.Xe}gt(){this.xh.gt(),this.Xe.gt()}Mh(){let t=this.Tr,e=t.Bt();if(t.Ut().yt().Ni()||e.Ni())return null;let i=t.Tt();return i===null?null:e.Dt(this.un.price,i.At)}},ks=class extends Ye{constructor(t){super(),this.Hi=t}Ut(){return this.Hi}},ql={Bar:(s,t,e,i)=>{var n;let o=t.upColor,r=t.downColor,a=g(s(e,i)),l=ze(a.At[0])<=ze(a.At[3]);return{ie:(n=a.D)!==null&&n!==void 0?n:l?o:r}},Candlestick:(s,t,e,i)=>{var n,o,r;let a=t.upColor,l=t.downColor,h=t.borderUpColor,c=t.borderDownColor,d=t.wickUpColor,u=t.wickDownColor,m=g(s(e,i)),f=ze(m.At[0])<=ze(m.At[3]);return{ie:(n=m.D)!==null&&n!==void 0?n:f?a:l,Pe:(o=m.Ot)!==null&&o!==void 0?o:f?h:c,Te:(r=m.Dh)!==null&&r!==void 0?r:f?d:u}},Area:(s,t,e,i)=>{var n,o,r,a;let l=g(s(e,i));return{ie:(n=l.ot)!==null&&n!==void 0?n:t.lineColor,ot:(o=l.ot)!==null&&o!==void 0?o:t.lineColor,bs:(r=l.bs)!==null&&r!==void 0?r:t.topColor,gs:(a=l.gs)!==null&&a!==void 0?a:t.bottomColor}},Baseline:(s,t,e,i)=>{var n,o,r,a,l,h;let c=g(s(e,i));return{ie:c.At[3]>=t.baseValue.price?t.topLineColor:t.bottomLineColor,be:(n=c.be)!==null&&n!==void 0?n:t.topLineColor,ge:(o=c.ge)!==null&&o!==void 0?o:t.bottomLineColor,de:(r=c.de)!==null&&r!==void 0?r:t.topFillColor1,fe:(a=c.fe)!==null&&a!==void 0?a:t.topFillColor2,pe:(l=c.pe)!==null&&l!==void 0?l:t.bottomFillColor1,ve:(h=c.ve)!==null&&h!==void 0?h:t.bottomFillColor2}},Line:(s,t,e,i)=>{var n,o;let r=g(s(e,i));return{ie:(n=r.D)!==null&&n!==void 0?n:t.color,ot:(o=r.D)!==null&&o!==void 0?o:t.color}},Histogram:(s,t,e,i)=>{var n;return{ie:(n=g(s(e,i)).D)!==null&&n!==void 0?n:t.color}}},Ts=class{constructor(t){this.Bh=(e,i)=>i!==void 0?i.At:this.Tr.Ln().Ah(e),this.Tr=t,this.Oh=ql[t.Lh()]}Os(t,e){return this.Oh(this.Bh,this.Tr.F(),t,e)}},na;(function(s){s[s.NearestLeft=-1]="NearestLeft",s[s.None=0]="None",s[s.NearestRight=1]="NearestRight"})(na||(na={}));var Ht=30,Es=class{constructor(){this.Ih=[],this.Eh=new Map,this.zh=new Map}Vh(){return this.Ns()>0?this.Ih[this.Ih.length-1]:null}Nh(){return this.Ns()>0?this.Fh(0):null}On(){return this.Ns()>0?this.Fh(this.Ih.length-1):null}Ns(){return this.Ih.length}Ni(){return this.Ns()===0}Ir(t){return this.Wh(t,0)!==null}Ah(t){return this.jh(t)}jh(t,e=0){let i=this.Wh(t,e);return i===null?null:Object.assign(Object.assign({},this.$h(i)),{Ys:this.Fh(i)})}Us(){return this.Ih}Hh(t,e,i){if(this.Ni())return null;let n=null;for(let o of i)n=ki(n,this.Uh(t,e,o));return n}tt(t){this.zh.clear(),this.Eh.clear(),this.Ih=t}Fh(t){return this.Ih[t].Ys}$h(t){return this.Ih[t]}Wh(t,e){let i=this.qh(t);if(i===null&&e!==0)switch(e){case-1:return this.Yh(t);case 1:return this.Xh(t);default:throw new TypeError("Unknown search mode")}return i}Yh(t){let e=this.Zh(t);return e>0&&(e-=1),e!==this.Ih.length&&this.Fh(e)<t?e:null}Xh(t){let e=this.Kh(t);return e!==this.Ih.length&&t<this.Fh(e)?e:null}qh(t){let e=this.Zh(t);return e===this.Ih.length||t<this.Ih[e].Ys?null:e}Zh(t){return Ge(this.Ih,t,(e,i)=>e.Ys<i)}Kh(t){return La(this.Ih,t,(e,i)=>i.Ys>e)}Gh(t,e,i){let n=null;for(let o=t;o<e;o++){let r=this.Ih[o].At[i];Number.isNaN(r)||(n===null?n={Jh:r,Qh:r}:(r<n.Jh&&(n.Jh=r),r>n.Qh&&(n.Qh=r)))}return n}Uh(t,e,i){if(this.Ni())return null;let n=null,o=g(this.Nh()),r=g(this.On()),a=Math.max(t,o),l=Math.min(e,r),h=Math.ceil(a/Ht)*Ht,c=Math.max(h,Math.floor(l/Ht)*Ht);{let u=this.Zh(a),m=this.Kh(Math.min(l,h,e));n=ki(n,this.Gh(u,m,i))}let d=this.Eh.get(i);d===void 0&&(d=new Map,this.Eh.set(i,d));for(let u=Math.max(h+1,a);u<c;u+=Ht){let m=Math.floor(u/Ht),f=d.get(m);if(f===void 0){let p=this.Zh(m*Ht),y=this.Kh((m+1)*Ht-1);f=this.Gh(p,y,i),d.set(m,f)}n=ki(n,f)}{let u=this.Zh(c),m=this.Kh(l);n=ki(n,this.Gh(u,m,i))}return n}};function ki(s,t){return s===null?t:t===null?s:{Jh:Math.min(s.Jh,t.Jh),Qh:Math.max(s.Qh,t.Qh)}}var Ue=class extends ks{constructor(t,e,i){super(t),this.zt=new Es,this.xh=new Cs(this),this.tl=[],this.il=new gs(this),this.nl=null,this.sl=null,this.el=[],this.rl=[],this.hl=null,this.un=e,this.ll=i;let n=new ws(this);this.rn=[n],this.yh=new Wi(n,this,t),i!=="Area"&&i!=="Line"&&i!=="Baseline"||(this.nl=new _s(this)),this.al(),this.ol()}M(){this.hl!==null&&clearTimeout(this.hl)}Kr(t){return this.un.priceLineColor||t}Or(t){let e={Lr:!0},i=this.Bt();if(this.Ut().yt().Ni()||i.Ni()||this.zt.Ni())return e;let n=this.Ut().yt().Vs(),o=this.Tt();if(n===null||o===null)return e;let r,a;if(t){let d=this.zt.Vh();if(d===null)return e;r=d,a=d.Ys}else{let d=this.zt.jh(n.ci(),-1);if(d===null||(r=this.zt.Ah(d.Ys),r===null))return e;a=d.Ys}let l=r.At[3],h=this.Ls().Os(a,{At:r}),c=i.Dt(l,o.At);return{Lr:!1,ut:l,Gt:i.Fi(l,o.At),ih:i._l(l),nh:i.ul(l,o.At),D:h.ie,yi:c,Ys:a}}Ls(){return this.sl!==null||(this.sl=new Ts(this)),this.sl}F(){return this.un}kh(t){let e=t.priceScaleId;e!==void 0&&e!==this.un.priceScaleId&&this.Ut().cl(this,e),ft(this.un,t),t.priceFormat!==void 0&&(this.al(),this.Ut().dl()),this.Ut().fl(this),this.Ut().pl(),this.bn.gt("options")}tt(t,e){this.zt.tt(t),this.vl(),this.bn.gt("data"),this.cn.gt("data"),this.nl!==null&&(e&&e.ml?this.nl.Rr():t.length===0&&this.nl.Pr());let i=this.Ut().Ke(this);this.Ut().bl(i),this.Ut().fl(this),this.Ut().pl(),this.Ut().Ch()}gl(t){this.el=t,this.vl();let e=this.Ut().Ke(this);this.cn.gt("data"),this.Ut().bl(e),this.Ut().fl(this),this.Ut().pl(),this.Ut().Ch()}wl(){return this.el}Xr(){return this.rl}Ml(t){let e=new Ss(this,t);return this.tl.push(e),this.Ut().fl(this),e}Sl(t){let e=this.tl.indexOf(t);e!==-1&&this.tl.splice(e,1),this.Ut().fl(this)}Lh(){return this.ll}Tt(){let t=this.xl();return t===null?null:{At:t.At[3],yl:t._t}}xl(){let t=this.Ut().yt().Vs();if(t===null)return null;let e=t.Ms();return this.zt.jh(e,1)}Ln(){return this.zt}Zr(t){let e=this.zt.Ah(t);return e===null?null:this.ll==="Bar"||this.ll==="Candlestick"?{oe:e.At[0],_e:e.At[1],ue:e.At[2],ce:e.At[3]}:e.At[3]}kl(t){let e=this.nl;return e!==null&&e.Ct()?(this.hl===null&&e.Br()&&(this.hl=setTimeout(()=>{this.hl=null,this.Ut().Cl()},0)),e.Dr(),[e]):[]}Tn(){let t=[];this.Tl()||t.push(this.il),t.push(this.bn,this.xh,this.cn);let e=this.tl.map(i=>i.Th());return t.push(...e),t}Ji(t){return[this.yh,...this.tl.map(e=>e.Ph())]}Pn(t,e){if(e!==this.Yi&&!this.Tl())return[];let i=[...this.rn];for(let n of this.tl)i.push(n.Rh());return i}Pl(t,e){if(this.un.autoscaleInfoProvider!==void 0){let i=this.un.autoscaleInfoProvider(()=>{let n=this.Rl(t,e);return n===null?null:n.dh()});return Ui.fh(i)}return this.Rl(t,e)}Dl(){return this.un.priceFormat.minMove}Bl(){return this.Al}Dn(){var t;this.bn.gt(),this.cn.gt();for(let e of this.rn)e.gt();for(let e of this.tl)e.gt();this.xh.gt(),this.il.gt(),(t=this.nl)===null||t===void 0||t.gt()}Bt(){return g(super.Bt())}kt(t){if(!((this.ll==="Line"||this.ll==="Area"||this.ll==="Baseline")&&this.un.crosshairMarkerVisible))return null;let e=this.zt.Ah(t);return e===null?null:{ut:e.At[3],lt:this.Ol(),Ot:this.Ll(),Rt:this.Il(),Pt:this.El(t)}}Gr(){return this.un.title}Ct(){return this.un.visible}Tl(){return!Ji(this.Bt().zl())}Rl(t,e){if(!Ne(t)||!Ne(e)||this.zt.Ni())return null;let i=this.ll==="Line"||this.ll==="Area"||this.ll==="Baseline"||this.ll==="Histogram"?[3]:[2,1],n=this.zt.Hh(t,e,i),o=n!==null?new rt(n.Jh,n.Qh):null;if(this.Lh()==="Histogram"){let r=this.un.base,a=new rt(r,r);o=o!==null?o.Qn(a):a}return new Ui(o,this.cn.Yr())}Ol(){switch(this.ll){case"Line":case"Area":case"Baseline":return this.un.crosshairMarkerRadius}return 0}Ll(){switch(this.ll){case"Line":case"Area":case"Baseline":{let t=this.un.crosshairMarkerBorderColor;if(t.length!==0)return t}}return null}Il(){switch(this.ll){case"Line":case"Area":case"Baseline":return this.un.crosshairMarkerBorderWidth}return 0}El(t){switch(this.ll){case"Line":case"Area":case"Baseline":{let e=this.un.crosshairMarkerBackgroundColor;if(e.length!==0)return e}}return this.Ls().Os(t).ie}al(){switch(this.un.priceFormat.type){case"custom":this.Al={format:this.un.priceFormat.formatter};break;case"volume":this.Al=new es(this.un.priceFormat.precision);break;case"percent":this.Al=new Ai(this.un.priceFormat.precision);break;default:{let t=Math.pow(10,this.un.priceFormat.precision);this.Al=new _e(t,this.un.priceFormat.minMove*t)}}this.Yi!==null&&this.Yi.Vl()}vl(){let t=this.Ut().yt();if(!t.Nl()||this.zt.Ni())return void(this.rl=[]);let e=g(this.zt.Nh());this.rl=this.el.map((i,n)=>{let o=g(t.Fl(i.time,!0)),r=o<e?1:-1;return{time:g(this.zt.jh(o,r)).Ys,position:i.position,shape:i.shape,color:i.color,id:i.id,internalId:n,text:i.text,size:i.size}})}ol(){switch(this.cn=new ys(this,this.Ut()),this.ll){case"Bar":this.bn=new os(this,this.Ut());break;case"Candlestick":this.bn=new cs(this,this.Ut());break;case"Line":this.bn=new ms(this,this.Ut());break;case"Area":this.bn=new ns(this,this.Ut());break;case"Baseline":this.bn=new ls(this,this.Ut());break;case"Histogram":this.bn=new us(this,this.Ut());break;default:throw Error("Unknown chart style assigned: "+this.ll)}}},Ds=class{constructor(t){this.un=t}Wl(t,e,i){let n=t;if(this.un.mode===0)return n;let o=i.fn(),r=o.Tt();if(r===null)return n;let a=o.Dt(t,r),l=i.jl().filter(c=>c instanceof Ue).reduce((c,d)=>{if(i.Ge(d)||!d.Ct())return c;let u=d.Bt(),m=d.Ln();if(u.Ni()||!m.Ir(e))return c;let f=m.Ah(e);if(f===null)return c;let p=ze(d.Tt());return c.concat([u.Dt(f.At[3],p.At)])},[]);if(l.length===0)return n;l.sort((c,d)=>Math.abs(c-a)-Math.abs(d-a));let h=l[0];return n=o.pn(h,r),n}},Ps=class extends Tt{constructor(){super(...arguments),this.zt=null}tt(t){this.zt=t}Z({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.zt===null)return;let o=Math.max(1,Math.floor(i));t.lineWidth=o,function(r,a){r.save(),r.lineWidth%2&&r.translate(.5,.5),a(),r.restore()}(t,()=>{let r=g(this.zt);if(r.$l){t.strokeStyle=r.Hl,Jt(t,r.Ul),t.beginPath();for(let a of r.ql){let l=Math.round(a.Yl*i);t.moveTo(l,-o),t.lineTo(l,e.height+o)}t.stroke()}if(r.Xl){t.strokeStyle=r.Zl,Jt(t,r.Kl),t.beginPath();for(let a of r.Gl){let l=Math.round(a.Yl*n);t.moveTo(-o,l),t.lineTo(e.width+o,l)}t.stroke()}})}},Rs=class{constructor(t){this.jt=new Ps,this.vt=!0,this.tn=t}gt(){this.vt=!0}Mt(){if(this.vt){let t=this.tn.Ut().F().grid,e={Xl:t.horzLines.visible,$l:t.vertLines.visible,Zl:t.horzLines.color,Hl:t.vertLines.color,Kl:t.horzLines.style,Ul:t.vertLines.style,Gl:this.tn.fn().Jl(),ql:this.tn.Ut().yt().Jl()||[]};this.jt.tt(e),this.vt=!1}return this.jt}},Is=class{constructor(t){this.bn=new Rs(t)}Th(){return this.bn}},zn={Ql:4,ta:1e-4};function pe(s,t){let e=100*(s-t)/t;return t<0?-e:e}function Zl(s,t){let e=pe(s.lh(),t),i=pe(s.ah(),t);return new rt(e,i)}function Be(s,t){let e=100*(s-t)/t+100;return t<0?-e:e}function Jl(s,t){let e=Be(s.lh(),t),i=Be(s.ah(),t);return new rt(e,i)}function Xi(s,t){let e=Math.abs(s);if(e<1e-15)return 0;let i=Aa(e+t.ta)+t.Ql;return s<0?-i:i}function Ae(s,t){let e=Math.abs(s);if(e<1e-15)return 0;let i=Math.pow(10,e-t.Ql)-t.ta;return s<0?-i:i}function Oe(s,t){if(s===null)return null;let e=Xi(s.lh(),t),i=Xi(s.ah(),t);return new rt(e,i)}function Ti(s,t){if(s===null)return null;let e=Ae(s.lh(),t),i=Ae(s.ah(),t);return new rt(e,i)}function Ln(s){if(s===null)return zn;let t=Math.abs(s.ah()-s.lh());if(t>=1||t<1e-15)return zn;let e=Math.ceil(Math.abs(Math.log10(t))),i=zn.Ql+e;return{Ql:i,ta:1/Math.pow(10,i)}}var Fe=class{constructor(t,e){if(this.ia=t,this.na=e,function(i){if(i<0)return!1;for(let n=i;n>1;n/=10)if(n%10!=0)return!1;return!0}(this.ia))this.sa=[2,2.5,2];else{this.sa=[];for(let i=this.ia;i!==1;){if(i%2==0)this.sa.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.sa.push(2,2.5),i/=5}if(this.sa.length>100)throw new Error("something wrong with base")}}}ea(t,e,i){let n=this.ia===0?0:1/this.ia,o=Math.pow(10,Math.max(0,Math.ceil(Aa(t-e)))),r=0,a=this.na[0];for(;;){let d=Si(o,n,1e-14)&&o>n+1e-14,u=Si(o,i*a,1e-14),m=Si(o,1,1e-14);if(!(d&&u&&m))break;o/=a,a=this.na[++r%this.na.length]}if(o<=n+1e-14&&(o=n),o=Math.max(1,o),this.sa.length>0&&(l=o,h=1,c=1e-14,Math.abs(l-h)<c))for(r=0,a=this.sa[0];Si(o,i*a,1e-14)&&o>n+1e-14;)o/=a,a=this.sa[++r%this.sa.length];var l,h,c;return o}},Gi=class{constructor(t,e,i,n){this.ra=[],this.zi=t,this.ia=e,this.ha=i,this.la=n}ea(t,e){if(t<e)throw new Error("high < low");let i=this.zi.It(),n=(t-e)*this.aa()/i,o=new Fe(this.ia,[2,2.5,2]),r=new Fe(this.ia,[2,2,2.5]),a=new Fe(this.ia,[2.5,2,2]),l=[];return l.push(o.ea(t,e,n),r.ea(t,e,n),a.ea(t,e,n)),function(h){if(h.length<1)throw Error("array is empty");let c=h[0];for(let d=1;d<h.length;++d)h[d]<c&&(c=h[d]);return c}(l)}oa(){let t=this.zi,e=t.Tt();if(e===null)return void(this.ra=[]);let i=t.It(),n=this.ha(i-1,e),o=this.ha(0,e),r=this.zi.F().entireTextOnly?this._a()/2:0,a=r,l=i-1-r,h=Math.max(n,o),c=Math.min(n,o);if(h===c)return void(this.ra=[]);let d=this.ea(h,c),u=h%d;u+=u<0?d:0;let m=h>=c?1:-1,f=null,p=0;for(let y=h-u;y>c;y-=d){let C=this.la(y,e,!0);f!==null&&Math.abs(C-f)<this.aa()||C<a||C>l||(p<this.ra.length?(this.ra[p].Yl=C,this.ra[p].ua=t.ca(y)):this.ra.push({Yl:C,ua:t.ca(y)}),p++,f=C,t.da()&&(d=this.ea(y*m,c)))}this.ra.length=p}Jl(){return this.ra}_a(){return this.zi.T()}aa(){return Math.ceil(2.5*this._a())}};function Ha(s){return s.slice().sort((t,e)=>g(t.Zi())-g(e.Zi()))}var sa;(function(s){s[s.Normal=0]="Normal",s[s.Logarithmic=1]="Logarithmic",s[s.Percentage=2]="Percentage",s[s.IndexedTo100=3]="IndexedTo100"})(sa||(sa={}));var oa=new Ai,ra=new _e(100,1),Os=class{constructor(t,e,i,n){this.fa=0,this.pa=null,this.ph=null,this.va=null,this.ma={ba:!1,ga:null},this.wa=0,this.Ma=0,this.Sa=new B,this.xa=new B,this.ya=[],this.ka=null,this.Ca=null,this.Ta=null,this.Pa=null,this.Al=ra,this.Ra=Ln(null),this.Da=t,this.un=e,this.Ba=i,this.Aa=n,this.Oa=new Gi(this,100,this.La.bind(this),this.Ia.bind(this))}zl(){return this.Da}F(){return this.un}kh(t){if(ft(this.un,t),this.Vl(),t.mode!==void 0&&this.Ea({lr:t.mode}),t.scaleMargins!==void 0){let e=et(t.scaleMargins.top),i=et(t.scaleMargins.bottom);if(e<0||e>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(i<0||i>1||e+i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(e+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${e+i}`);this.za(),this.Ca=null}}Va(){return this.un.autoScale}da(){return this.un.mode===1}th(){return this.un.mode===2}Na(){return this.un.mode===3}lr(){return{Fn:this.un.autoScale,Fa:this.un.invertScale,lr:this.un.mode}}Ea(t){let e=this.lr(),i=null;t.Fn!==void 0&&(this.un.autoScale=t.Fn),t.lr!==void 0&&(this.un.mode=t.lr,t.lr!==2&&t.lr!==3||(this.un.autoScale=!0),this.ma.ba=!1),e.lr===1&&t.lr!==e.lr&&(function(o,r){if(o===null)return!1;let a=Ae(o.lh(),r),l=Ae(o.ah(),r);return isFinite(a)&&isFinite(l)}(this.ph,this.Ra)?(i=Ti(this.ph,this.Ra),i!==null&&this.Wa(i)):this.un.autoScale=!0),t.lr===1&&t.lr!==e.lr&&(i=Oe(this.ph,this.Ra),i!==null&&this.Wa(i));let n=e.lr!==this.un.mode;n&&(e.lr===2||this.th())&&this.Vl(),n&&(e.lr===3||this.Na())&&this.Vl(),t.Fa!==void 0&&e.Fa!==t.Fa&&(this.un.invertScale=t.Fa,this.ja()),this.xa.m(e,this.lr())}$a(){return this.xa}T(){return this.Ba.fontSize}It(){return this.fa}Ha(t){this.fa!==t&&(this.fa=t,this.za(),this.Ca=null)}Ua(){if(this.pa)return this.pa;let t=this.It()-this.qa()-this.Ya();return this.pa=t,t}bh(){return this.Xa(),this.ph}Wa(t,e){let i=this.ph;(e||i===null&&t!==null||i!==null&&!i.rh(t))&&(this.Ca=null,this.ph=t)}Ni(){return this.Xa(),this.fa===0||!this.ph||this.ph.Ni()}Za(t){return this.Fa()?t:this.It()-1-t}Dt(t,e){return this.th()?t=pe(t,e):this.Na()&&(t=Be(t,e)),this.Ia(t,e)}$s(t,e,i){this.Xa();let n=this.Ya(),o=g(this.bh()),r=o.lh(),a=o.ah(),l=this.Ua()-1,h=this.Fa(),c=l/(a-r),d=i===void 0?0:i.from,u=i===void 0?t.length:i.to,m=this.Ka();for(let f=d;f<u;f++){let p=t[f],y=p.ut;if(isNaN(y))continue;let C=y;m!==null&&(C=m(p.ut,e));let L=n+c*(C-r),A=h?L:this.fa-1-L;p.et=A}}le(t,e,i){this.Xa();let n=this.Ya(),o=g(this.bh()),r=o.lh(),a=o.ah(),l=this.Ua()-1,h=this.Fa(),c=l/(a-r),d=i===void 0?0:i.from,u=i===void 0?t.length:i.to,m=this.Ka();for(let f=d;f<u;f++){let p=t[f],y=p.oe,C=p._e,L=p.ue,A=p.ce;m!==null&&(y=m(p.oe,e),C=m(p._e,e),L=m(p.ue,e),A=m(p.ce,e));let T=n+c*(y-r),V=h?T:this.fa-1-T;p.re=V,T=n+c*(C-r),V=h?T:this.fa-1-T,p.ne=V,T=n+c*(L-r),V=h?T:this.fa-1-T,p.se=V,T=n+c*(A-r),V=h?T:this.fa-1-T,p.he=V}}pn(t,e){let i=this.La(t,e);return this.Ga(i,e)}Ga(t,e){let i=t;return this.th()?i=function(n,o){return o<0&&(n=-n),n/100*o+o}(i,e):this.Na()&&(i=function(n,o){return n-=100,o<0&&(n=-n),n/100*o+o}(i,e)),i}jl(){return this.ya}Ja(){if(this.ka)return this.ka;let t=[];for(let e=0;e<this.ya.length;e++){let i=this.ya[e];i.Zi()===null&&i.Ki(e+1),t.push(i)}return t=Ha(t),this.ka=t,this.ka}Qa(t){this.ya.indexOf(t)===-1&&(this.ya.push(t),this.Vl(),this.io())}no(t){let e=this.ya.indexOf(t);if(e===-1)throw new Error("source is not attached to scale");this.ya.splice(e,1),this.ya.length===0&&(this.Ea({Fn:!0}),this.Wa(null)),this.Vl(),this.io()}Tt(){let t=null;for(let e of this.ya){let i=e.Tt();i!==null&&(t===null||i.yl<t.yl)&&(t=i)}return t===null?null:t.At}Fa(){return this.un.invertScale}Jl(){let t=this.Tt()===null;if(this.Ca!==null&&(t||this.Ca.so===t))return this.Ca.Jl;this.Oa.oa();let e=this.Oa.Jl();return this.Ca={Jl:e,so:t},this.Sa.m(),e}eo(){return this.Sa}ro(t){this.th()||this.Na()||this.Ta===null&&this.va===null&&(this.Ni()||(this.Ta=this.fa-t,this.va=g(this.bh()).hh()))}ho(t){if(this.th()||this.Na()||this.Ta===null)return;this.Ea({Fn:!1}),(t=this.fa-t)<0&&(t=0);let e=(this.Ta+.2*(this.fa-1))/(t+.2*(this.fa-1)),i=g(this.va).hh();e=Math.max(e,.1),i._h(e),this.Wa(i)}lo(){this.th()||this.Na()||(this.Ta=null,this.va=null)}ao(t){this.Va()||this.Pa===null&&this.va===null&&(this.Ni()||(this.Pa=t,this.va=g(this.bh()).hh()))}oo(t){if(this.Va()||this.Pa===null)return;let e=g(this.bh()).oh()/(this.Ua()-1),i=t-this.Pa;this.Fa()&&(i*=-1);let n=i*e,o=g(this.va).hh();o.uh(n),this.Wa(o,!0),this.Ca=null}_o(){this.Va()||this.Pa!==null&&(this.Pa=null,this.va=null)}Bl(){return this.Al||this.Vl(),this.Al}Fi(t,e){switch(this.un.mode){case 2:return this.Bl().format(pe(t,e));case 3:return this.Bl().format(Be(t,e));default:return this.Sh(t)}}ca(t){switch(this.un.mode){case 2:case 3:return this.Bl().format(t);default:return this.Sh(t)}}_l(t){return this.Sh(t,g(this.uo()).Bl())}ul(t,e){return t=pe(t,e),oa.format(t)}co(){return this.ya}do(t){this.ma={ga:t,ba:!1}}Dn(){this.ya.forEach(t=>t.Dn())}Vl(){this.Ca=null;let t=this.uo(),e=100;t!==null&&(e=Math.round(1/t.Dl())),this.Al=ra,this.th()?(this.Al=oa,e=100):this.Na()?(this.Al=new _e(100,1),e=100):t!==null&&(this.Al=t.Bl()),this.Oa=new Gi(this,e,this.La.bind(this),this.Ia.bind(this)),this.Oa.oa()}io(){this.ka=null}uo(){return this.ya[0]||null}qa(){return this.Fa()?this.un.scaleMargins.bottom*this.It()+this.Ma:this.un.scaleMargins.top*this.It()+this.wa}Ya(){return this.Fa()?this.un.scaleMargins.top*this.It()+this.wa:this.un.scaleMargins.bottom*this.It()+this.Ma}Xa(){this.ma.ba||(this.ma.ba=!0,this.fo())}za(){this.pa=null}Ia(t,e){if(this.Xa(),this.Ni())return 0;t=this.da()&&t?Xi(t,this.Ra):t;let i=g(this.bh()),n=this.Ya()+(this.Ua()-1)*(t-i.lh())/i.oh();return this.Za(n)}La(t,e){if(this.Xa(),this.Ni())return 0;let i=this.Za(t),n=g(this.bh()),o=n.lh()+n.oh()*((i-this.Ya())/(this.Ua()-1));return this.da()?Ae(o,this.Ra):o}ja(){this.Ca=null,this.Oa.oa()}fo(){let t=this.ma.ga;if(t===null)return;let e=null,i=this.co(),n=0,o=0;for(let l of i){if(!l.Ct())continue;let h=l.Tt();if(h===null)continue;let c=l.Pl(t.Ms(),t.ci()),d=c&&c.bh();if(d!==null){switch(this.un.mode){case 1:d=Oe(d,this.Ra);break;case 2:d=Zl(d,h.At);break;case 3:d=Jl(d,h.At)}if(e=e===null?d:e.Qn(g(d)),c!==null){let u=c.gh();u!==null&&(n=Math.max(n,u.above),o=Math.max(n,u.below))}}}if(n===this.wa&&o===this.Ma||(this.wa=n,this.Ma=o,this.Ca=null,this.za()),e!==null){if(e.lh()===e.ah()){let l=this.uo(),h=5*(l===null||this.th()||this.Na()?1:l.Dl());this.da()&&(e=Ti(e,this.Ra)),e=new rt(e.lh()-h,e.ah()+h),this.da()&&(e=Oe(e,this.Ra))}if(this.da()){let l=Ti(e,this.Ra),h=Ln(l);if(r=h,a=this.Ra,r.Ql!==a.Ql||r.ta!==a.ta){let c=this.va!==null?Ti(this.va,this.Ra):null;this.Ra=h,e=Oe(l,h),c!==null&&(this.va=Oe(c,h))}}this.Wa(e)}else this.ph===null&&(this.Wa(new rt(-.5,.5)),this.Ra=Ln(null));var r,a;this.ma.ba=!0}Ka(){return this.th()?pe:this.Na()?Be:this.da()?t=>Xi(t,this.Ra):null}Sh(t,e){return this.Aa.priceFormatter===void 0?(e===void 0&&(e=this.Bl()),e.format(t)):this.Aa.priceFormatter(t)}},zs=class{constructor(t,e){this.ya=[],this.po=new Map,this.fa=0,this.vo=0,this.mo=1e3,this.ka=null,this.bo=new B,this.wo=t,this.Hi=e,this.Mo=new Is(this);let i=e.F();this.So=this.xo("left",i.leftPriceScale),this.yo=this.xo("right",i.rightPriceScale),this.So.$a().l(this.ko.bind(this,this.So),this),this.yo.$a().l(this.ko.bind(this,this.yo),this),this.Co(i)}Co(t){if(t.leftPriceScale&&this.So.kh(t.leftPriceScale),t.rightPriceScale&&this.yo.kh(t.rightPriceScale),t.localization&&(this.So.Vl(),this.yo.Vl()),t.overlayPriceScales){let e=Array.from(this.po.values());for(let i of e){let n=g(i[0].Bt());n.kh(t.overlayPriceScales),t.localization&&n.Vl()}}}To(t){switch(t){case"left":return this.So;case"right":return this.yo}return this.po.has(t)?et(this.po.get(t))[0].Bt():null}M(){this.Ut().Po().v(this),this.So.$a().v(this),this.yo.$a().v(this),this.ya.forEach(t=>{t.M&&t.M()}),this.bo.m()}Ro(){return this.mo}Do(t){this.mo=t}Ut(){return this.Hi}$i(){return this.vo}It(){return this.fa}Bo(t){this.vo=t,this.Ao()}Ha(t){this.fa=t,this.So.Ha(t),this.yo.Ha(t),this.ya.forEach(e=>{if(this.Ge(e)){let i=e.Bt();i!==null&&i.Ha(t)}}),this.Ao()}jl(){return this.ya}Ge(t){let e=t.Bt();return e===null||this.So!==e&&this.yo!==e}Qa(t,e,i){let n=i!==void 0?i:this.Lo().Oo+1;this.Io(t,e,n)}no(t){let e=this.ya.indexOf(t);ne(e!==-1,"removeDataSource: invalid data source"),this.ya.splice(e,1);let i=g(t.Bt()).zl();if(this.po.has(i)){let o=et(this.po.get(i)),r=o.indexOf(t);r!==-1&&(o.splice(r,1),o.length===0&&this.po.delete(i))}let n=t.Bt();n&&n.jl().indexOf(t)>=0&&n.no(t),n!==null&&(n.io(),this.Eo(n)),this.ka=null}Qe(t){return t===this.So?"left":t===this.yo?"right":"overlay"}zo(){return this.So}Vo(){return this.yo}No(t,e){t.ro(e)}Fo(t,e){t.ho(e),this.Ao()}Wo(t){t.lo()}jo(t,e){t.ao(e)}$o(t,e){t.oo(e),this.Ao()}Ho(t){t._o()}Ao(){this.ya.forEach(t=>{t.Dn()})}fn(){let t=null;return this.Hi.F().rightPriceScale.visible&&this.yo.jl().length!==0?t=this.yo:this.Hi.F().leftPriceScale.visible&&this.So.jl().length!==0?t=this.So:this.ya.length!==0&&(t=this.ya[0].Bt()),t===null&&(t=this.yo),t}Je(){let t=null;return this.Hi.F().rightPriceScale.visible?t=this.yo:this.Hi.F().leftPriceScale.visible&&(t=this.So),t}Eo(t){t!==null&&t.Va()&&this.Uo(t)}qo(t){let e=this.wo.Vs();t.Ea({Fn:!0}),e!==null&&t.do(e),this.Ao()}Yo(){this.Uo(this.So),this.Uo(this.yo)}Xo(){this.Eo(this.So),this.Eo(this.yo),this.ya.forEach(t=>{this.Ge(t)&&this.Eo(t.Bt())}),this.Ao(),this.Hi.Ch()}Ja(){return this.ka===null&&(this.ka=Ha(this.ya)),this.ka}Zo(){return this.bo}Ko(){return this.Mo}Uo(t){let e=t.co();if(e&&e.length>0&&!this.wo.Ni()){let i=this.wo.Vs();i!==null&&t.do(i)}t.Dn()}Lo(){let t=this.Ja();if(t.length===0)return{Go:0,Oo:0};let e=0,i=0;for(let n=0;n<t.length;n++){let o=t[n].Zi();o!==null&&(o<e&&(e=o),o>i&&(i=o))}return{Go:e,Oo:i}}Io(t,e,i){let n=this.To(e);if(n===null&&(n=this.xo(e,this.Hi.F().overlayPriceScales)),this.ya.push(t),!Ji(e)){let o=this.po.get(e)||[];o.push(t),this.po.set(e,o)}n.Qa(t),t.Gi(n),t.Ki(i),this.Eo(n),this.ka=null}ko(t,e,i){e.lr!==i.lr&&this.Uo(t)}xo(t,e){let i=Object.assign({visible:!0,autoScale:!0},xt(e)),n=new Os(t,i,this.Hi.F().layout,this.Hi.F().localization);return n.Ha(this.It()),n}},Ya=s=>s.getUTCFullYear(),th=s=>St((t=>t.getUTCDate())(s),2),eh=(s,t)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(t,{month:"long"}),ih=(s,t)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(t,{month:"short"}),nh=s=>St((t=>t.getUTCMonth()+1)(s),2),sh=s=>St(Ya(s)%100,2),oh=s=>St(Ya(s),4),$i=class{constructor(t="yyyy-MM-dd",e="default"){this.Jo=t,this.Qo=e}t_(t){return function(e,i,n){return i.replace(/yyyy/g,oh(e)).replace(/yy/g,sh(e)).replace(/MMMM/g,eh(e,n)).replace(/MMM/g,ih(e,n)).replace(/MM/g,nh(e)).replace(/dd/g,th(e))}(t,this.Jo,this.Qo)}},Ls=class{constructor(t){this.i_=t||"%h:%m:%s"}t_(t){return this.i_.replace("%h",St(t.getUTCHours(),2)).replace("%m",St(t.getUTCMinutes(),2)).replace("%s",St(t.getUTCSeconds(),2))}},rh={n_:"yyyy-MM-dd",s_:"%h:%m:%s",e_:" ",r_:"default"},Bs=class{constructor(t={}){let e=Object.assign(Object.assign({},rh),t);this.h_=new $i(e.n_,e.r_),this.l_=new Ls(e.s_),this.a_=e.e_}t_(t){return`${this.h_.t_(t)}${this.a_}${this.l_.t_(t)}`}},As=class{constructor(t,e=50){this.Le=0,this.Ie=1,this.Ee=1,this.Ve=new Map,this.ze=new Map,this.o_=t,this.Ne=e}t_(t){let e=t._t,i=e.__===void 0?new Date(1e3*e.u_).getTime():new Date(Date.UTC(e.__.year,e.__.month-1,e.__.day)).getTime(),n=this.Ve.get(i);if(n!==void 0)return n.c_;if(this.Le===this.Ne){let r=this.ze.get(this.Ee);this.ze.delete(this.Ee),this.Ve.delete(et(r)),this.Ee++,this.Le--}let o=this.o_(t);return this.Ve.set(i,{c_:o,$e:this.Ie}),this.ze.set(this.Ie,i),this.Le++,this.Ie++,o}},Zt=class{constructor(t,e){ne(t<=e,"right should be >= left"),this.d_=t,this.f_=e}Ms(){return this.d_}ci(){return this.f_}p_(){return this.f_-this.d_+1}Ir(t){return this.d_<=t&&t<=this.f_}rh(t){return this.d_===t.Ms()&&this.f_===t.ci()}};function aa(s,t){return s===null||t===null?s===t:s.rh(t)}var Fs=class{constructor(){this.v_=new Map,this.Ve=null}m_(t,e){this.b_(e),this.Ve=null;for(let i=e;i<t.length;++i){let n=t[i],o=this.v_.get(n.g_);o===void 0&&(o=[],this.v_.set(n.g_,o)),o.push({Ys:i,_t:n._t,w_:n.g_,M_:n.M_})}}S_(t,e){let i=Math.ceil(e/t);return this.Ve!==null&&this.Ve.x_===i||(this.Ve={Jl:this.y_(i),x_:i}),this.Ve.Jl}b_(t){if(t===0)return void this.v_.clear();let e=[];this.v_.forEach((i,n)=>{t<=i[0].Ys?e.push(n):i.splice(Ge(i,t,o=>o.Ys<t),1/0)});for(let i of e)this.v_.delete(i)}y_(t){let e=[];for(let i of Array.from(this.v_.keys()).sort((n,o)=>o-n)){if(!this.v_.get(i))continue;let n=e;e=[];let o=n.length,r=0,a=et(this.v_.get(i)),l=a.length,h=1/0,c=-1/0;for(let d=0;d<l;d++){let u=a[d],m=u.Ys;for(;r<o;){let f=n[r],p=f.Ys;if(!(p<m)){h=p;break}r++,e.push(f),c=p,h=1/0}h-m>=t&&m-c>=t&&(e.push(u),c=m)}for(;r<o;r++)e.push(n[r])}return e}},ge=class s{constructor(t){this.k_=t}C_(){return this.k_===null?null:new Zt(Math.floor(this.k_.Ms()),Math.ceil(this.k_.ci()))}T_(){return this.k_}static P_(){return new s(null)}},la,ha,ca,da,ua;(function(s){s[s.Year=0]="Year",s[s.Month=1]="Month",s[s.DayOfMonth=2]="DayOfMonth",s[s.Time=3]="Time",s[s.TimeWithSeconds=4]="TimeWithSeconds"})(la||(la={}));var Ns=class{constructor(t,e,i){this.vo=0,this.R_=null,this.D_=[],this.Pa=null,this.Ta=null,this.B_=new Fs,this.A_=new Map,this.O_=ge.P_(),this.L_=!0,this.I_=new B,this.E_=new B,this.z_=new B,this.V_=null,this.N_=null,this.F_=[],this.un=e,this.Aa=i,this.W_=e.rightOffset,this.j_=e.barSpacing,this.Hi=t,this.H_()}F(){return this.un}U_(t){ft(this.Aa,t),this.q_(),this.H_()}kh(t,e){var i;ft(this.un,t),this.un.fixLeftEdge&&this.Y_(),this.un.fixRightEdge&&this.X_(),t.barSpacing!==void 0&&this.Hi.Kn(t.barSpacing),t.rightOffset!==void 0&&this.Hi.Gn(t.rightOffset),t.minBarSpacing!==void 0&&this.Hi.Kn((i=t.barSpacing)!==null&&i!==void 0?i:this.j_),this.q_(),this.H_(),this.z_.m()}vn(t){var e,i;return(i=(e=this.D_[t])===null||e===void 0?void 0:e._t)!==null&&i!==void 0?i:null}Ui(t){var e;return(e=this.D_[t])!==null&&e!==void 0?e:null}Fl(t,e){if(this.D_.length<1)return null;if(t.u_>this.D_[this.D_.length-1]._t.u_)return e?this.D_.length-1:null;let i=Ge(this.D_,t.u_,(n,o)=>n._t.u_<o);return t.u_<this.D_[i]._t.u_?e?i:null:i}Ni(){return this.vo===0||this.D_.length===0||this.R_===null}Nl(){return this.D_.length>0}Vs(){return this.Z_(),this.O_.C_()}K_(){return this.Z_(),this.O_.T_()}G_(){let t=this.Vs();if(t===null)return null;let e={from:t.Ms(),to:t.ci()};return this.J_(e)}J_(t){let e=Math.round(t.from),i=Math.round(t.to),n=g(this.Q_()),o=g(this.tu());return{from:g(this.vn(Math.max(n,e))),to:g(this.vn(Math.min(o,i)))}}iu(t){return{from:g(this.Fl(t.from,!0)),to:g(this.Fl(t.to,!0))}}$i(){return this.vo}Bo(t){if(!isFinite(t)||t<=0||this.vo===t)return;let e=this.K_(),i=this.vo;if(this.vo=t,this.L_=!0,this.un.lockVisibleTimeRangeOnResize&&i!==0){let n=this.j_*t/i;this.j_=n}if(this.un.fixLeftEdge&&e!==null&&e.Ms()<=0){let n=i-t;this.W_-=Math.round(n/this.j_)+1,this.L_=!0}this.nu(),this.su()}Et(t){if(this.Ni()||!Ne(t))return 0;let e=this.eu()+this.W_-t;return this.vo-(e+.5)*this.j_-1}js(t,e){let i=this.eu(),n=e===void 0?0:e.from,o=e===void 0?t.length:e.to;for(let r=n;r<o;r++){let a=t[r]._t,l=i+this.W_-a,h=this.vo-(l+.5)*this.j_-1;t[r].st=h}}ru(t){return Math.ceil(this.hu(t))}Gn(t){this.L_=!0,this.W_=t,this.su(),this.Hi.lu(),this.Hi.Ch()}Ks(){return this.j_}Kn(t){this.au(t),this.su(),this.Hi.lu(),this.Hi.Ch()}ou(){return this.W_}Jl(){if(this.Ni())return null;if(this.N_!==null)return this.N_;let t=this.j_,e=5*(this.Hi.F().layout.fontSize+4),i=Math.round(e/t),n=g(this.Vs()),o=Math.max(n.Ms(),n.Ms()-i),r=Math.max(n.ci(),n.ci()-i),a=this.B_.S_(t,e),l=this.Q_()+i,h=this.tu()-i,c=this._u(),d=this.un.fixLeftEdge||c,u=this.un.fixRightEdge||c,m=0;for(let f of a){if(!(o<=f.Ys&&f.Ys<=r))continue;let p;m<this.F_.length?(p=this.F_[m],p.Yl=this.Et(f.Ys),p.ua=this.uu(f),p.w_=f.w_):(p={cu:!1,Yl:this.Et(f.Ys),ua:this.uu(f),w_:f.w_},this.F_.push(p)),this.j_>e/2&&!c?p.cu=!1:p.cu=d&&f.Ys<=l||u&&f.Ys>=h,m++}return this.F_.length=m,this.N_=this.F_,this.F_}du(){this.L_=!0,this.Kn(this.un.barSpacing),this.Gn(this.un.rightOffset)}fu(t){this.L_=!0,this.R_=t,this.su(),this.Y_()}pu(t,e){let i=this.hu(t),n=this.Ks(),o=n+e*(n/10);this.Kn(o),this.un.rightBarStaysOnScroll||this.Gn(this.ou()+(i-this.hu(t)))}ro(t){this.Pa&&this._o(),this.Ta===null&&this.V_===null&&(this.Ni()||(this.Ta=t,this.vu()))}ho(t){if(this.V_===null)return;let e=ji(this.vo-t,0,this.vo),i=ji(this.vo-g(this.Ta),0,this.vo);e!==0&&i!==0&&this.Kn(this.V_.Ks*e/i)}lo(){this.Ta!==null&&(this.Ta=null,this.mu())}ao(t){this.Pa===null&&this.V_===null&&(this.Ni()||(this.Pa=t,this.vu()))}oo(t){if(this.Pa===null)return;let e=(this.Pa-t)/this.Ks();this.W_=g(this.V_).ou+e,this.L_=!0,this.su()}_o(){this.Pa!==null&&(this.Pa=null,this.mu())}bu(){this.gu(this.un.rightOffset)}gu(t,e=400){if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");let i=this.W_,n=performance.now();this.Hi.Yn({wu:o=>(o-n)/e>=1,Mu:o=>{let r=(o-n)/e;return r>=1?t:i+(t-i)*r}})}gt(t,e){this.L_=!0,this.D_=t,this.B_.m_(t,e),this.su()}Su(){return this.I_}xu(){return this.E_}yu(){return this.z_}eu(){return this.R_||0}ku(t){let e=t.p_();this.au(this.vo/e),this.W_=t.ci()-this.eu(),this.su(),this.L_=!0,this.Hi.lu(),this.Hi.Ch()}Cu(){let t=this.Q_(),e=this.tu();t!==null&&e!==null&&this.ku(new Zt(t,e+this.un.rightOffset))}Tu(t){let e=new Zt(t.from,t.to);this.ku(e)}qi(t){return this.Aa.timeFormatter!==void 0?this.Aa.timeFormatter(t.M_):this.Pu.t_(new Date(1e3*t._t.u_))}_u(){let{handleScroll:t,handleScale:e}=this.Hi.F();return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}Q_(){return this.D_.length===0?null:0}tu(){return this.D_.length===0?null:this.D_.length-1}Ru(t){return(this.vo-1-t)/this.j_}hu(t){let e=this.Ru(t),i=this.eu()+this.W_-e;return Math.round(1e6*i)/1e6}au(t){let e=this.j_;this.j_=t,this.nu(),e!==this.j_&&(this.L_=!0,this.Du())}Z_(){if(!this.L_)return;if(this.L_=!1,this.Ni())return void this.Bu(ge.P_());let t=this.eu(),e=this.vo/this.j_,i=this.W_+t,n=new Zt(i-e+1,i);this.Bu(new ge(n))}nu(){let t=this.Au();if(this.j_<t&&(this.j_=t,this.L_=!0),this.vo!==0){let e=.5*this.vo;this.j_>e&&(this.j_=e,this.L_=!0)}}Au(){return this.un.fixLeftEdge&&this.un.fixRightEdge&&this.D_.length!==0?this.vo/this.D_.length:this.un.minBarSpacing}su(){let t=this.Ou();this.W_>t&&(this.W_=t,this.L_=!0);let e=this.Lu();e!==null&&this.W_<e&&(this.W_=e,this.L_=!0)}Lu(){let t=this.Q_(),e=this.R_;return t===null||e===null?null:t-e-1+(this.un.fixLeftEdge?this.vo/this.j_:Math.min(2,this.D_.length))}Ou(){return this.un.fixRightEdge?0:this.vo/this.j_-Math.min(2,this.D_.length)}vu(){this.V_={Ks:this.Ks(),ou:this.ou()}}mu(){this.V_=null}uu(t){let e=this.A_.get(t.w_);return e===void 0&&(e=new As(i=>this.Iu(i)),this.A_.set(t.w_,e)),e.t_(t)}Iu(t){let e=function(i,n,o){switch(i){case 0:case 10:return n?o?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return n?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(t.w_,this.un.timeVisible,this.un.secondsVisible);if(this.un.tickMarkFormatter!==void 0){let i=this.un.tickMarkFormatter(t.M_,e,this.Aa.locale);if(i!==null)return i}return function(i,n,o){let r={};switch(n){case 0:r.year="numeric";break;case 1:r.month="short";break;case 2:r.day="numeric";break;case 3:r.hour12=!1,r.hour="2-digit",r.minute="2-digit";break;case 4:r.hour12=!1,r.hour="2-digit",r.minute="2-digit",r.second="2-digit"}let a=i.__===void 0?new Date(1e3*i.u_):new Date(Date.UTC(i.__.year,i.__.month-1,i.__.day));return new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()).toLocaleString(o,r)}(t._t,e,this.Aa.locale)}Bu(t){let e=this.O_;this.O_=t,aa(e.C_(),this.O_.C_())||this.I_.m(),aa(e.T_(),this.O_.T_())||this.E_.m(),this.Du()}Du(){this.N_=null}q_(){this.Du(),this.A_.clear()}H_(){let t=this.Aa.dateFormat;this.un.timeVisible?this.Pu=new Bs({n_:t,s_:this.un.secondsVisible?"%h:%m:%s":"%h:%m",e_:"   ",r_:this.Aa.locale}):this.Pu=new $i(t,this.Aa.locale)}Y_(){if(!this.un.fixLeftEdge)return;let t=this.Q_();if(t===null)return;let e=this.Vs();if(e===null)return;let i=e.Ms()-t;if(i<0){let n=this.W_-i-1;this.Gn(n)}this.nu()}X_(){this.su(),this.nu()}},Vs=class extends te{constructor(t){super(),this.Eu=new Map,this.zt=t}Z(t){}G(t){if(!this.zt.Ct)return;let{context:e,mediaSize:i}=t,n=0;for(let r of this.zt.zu){if(r.Gt.length===0)continue;e.font=r.P;let a=this.Vu(e,r.Gt);a>i.width?r.pu=i.width/a:r.pu=1,n+=r.Nu*r.pu}let o=0;switch(this.zt.Fu){case"top":o=0;break;case"center":o=Math.max((i.height-n)/2,0);break;case"bottom":o=Math.max(i.height-n,0)}e.fillStyle=this.zt.D;for(let r of this.zt.zu){e.save();let a=0;switch(this.zt.Wu){case"left":e.textAlign="left",a=r.Nu/2;break;case"center":e.textAlign="center",a=i.width/2;break;case"right":e.textAlign="right",a=i.width-1-r.Nu/2}e.translate(a,o),e.textBaseline="top",e.font=r.P,e.scale(r.pu,r.pu),e.fillText(r.Gt,0,r.ju),e.restore(),o+=r.Nu*r.pu}}Vu(t,e){let i=this.$u(t.font),n=i.get(e);return n===void 0&&(n=t.measureText(e).width,i.set(e,n)),n}$u(t){let e=this.Eu.get(t);return e===void 0&&(e=new Map,this.Eu.set(t,e)),e}},Hs=class{constructor(t){this.vt=!0,this.Wt={Ct:!1,D:"",zu:[],Fu:"center",Wu:"center"},this.jt=new Vs(this.Wt),this.$t=t}gt(){this.vt=!0}Mt(){return this.vt&&(this.St(),this.vt=!1),this.jt}St(){let t=this.$t.F(),e=this.Wt;e.Ct=t.visible,e.Ct&&(e.D=t.color,e.Wu=t.horzAlign,e.Fu=t.vertAlign,e.zu=[{Gt:t.text,P:be(t.fontSize,t.fontFamily,t.fontStyle),Nu:1.2*t.fontSize,ju:0,pu:0}])}},Ys=class extends Ye{constructor(t,e){super(),this.un=e,this.bn=new Hs(this)}Pn(){return[]}Tn(){return[this.bn]}F(){return this.un}Dn(){this.bn.gt()}};(function(s){s[s.OnTouchEnd=0]="OnTouchEnd",s[s.OnNextTap=1]="OnNextTap"})(ha||(ha={}));var js=class{constructor(t,e){this.Hu=[],this.Uu=[],this.vo=0,this.qu=null,this.Yu=new B,this.Xu=new B,this.Zu=null,this.Ku=t,this.un=e,this.Gu=new Xn(this),this.wo=new Ns(this,e.timeScale,this.un.localization),this.bt=new ts(this,e.crosshair),this.Ju=new Ds(e.crosshair),this.Qu=new Ys(this,e.watermark),this.tc(),this.Hu[0].Do(2e3),this.ic=this.nc(0),this.sc=this.nc(1)}dl(){this.ec(j.ss())}Ch(){this.ec(j.ns())}Cl(){this.ec(new j(1))}fl(t){let e=this.rc(t);this.ec(e)}hc(){return this.qu}lc(t){let e=this.qu;this.qu=t,e!==null&&this.fl(e.ac),t!==null&&this.fl(t.ac)}F(){return this.un}kh(t){ft(this.un,t),this.Hu.forEach(e=>e.Co(t)),t.timeScale!==void 0&&this.wo.kh(t.timeScale),t.localization!==void 0&&this.wo.U_(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.Yu.m(),this.ic=this.nc(0),this.sc=this.nc(1),this.dl()}oc(t,e){if(t==="left")return void this.kh({leftPriceScale:e});if(t==="right")return void this.kh({rightPriceScale:e});let i=this._c(t);i!==null&&(i.Bt.kh(e),this.Yu.m())}_c(t){for(let e of this.Hu){let i=e.To(t);if(i!==null)return{Ht:e,Bt:i}}return null}yt(){return this.wo}uc(){return this.Hu}cc(){return this.Qu}dc(){return this.bt}fc(){return this.Xu}vc(t,e){t.Ha(e),this.lu()}Bo(t){this.vo=t,this.wo.Bo(this.vo),this.Hu.forEach(e=>e.Bo(t)),this.lu()}tc(t){let e=new zs(this.wo,this);t!==void 0?this.Hu.splice(t,0,e):this.Hu.push(e);let i=t===void 0?this.Hu.length-1:t,n=j.ss();return n.Vn(i,{Nn:0,Fn:!0}),this.ec(n),e}No(t,e,i){t.No(e,i)}Fo(t,e,i){t.Fo(e,i),this.pl(),this.ec(this.mc(t,2))}Wo(t,e){t.Wo(e),this.ec(this.mc(t,2))}jo(t,e,i){e.Va()||t.jo(e,i)}$o(t,e,i){e.Va()||(t.$o(e,i),this.pl(),this.ec(this.mc(t,2)))}Ho(t,e){e.Va()||(t.Ho(e),this.ec(this.mc(t,2)))}qo(t,e){t.qo(e),this.ec(this.mc(t,2))}bc(t){this.wo.ro(t)}gc(t,e){let i=this.yt();if(i.Ni()||e===0)return;let n=i.$i();t=Math.max(1,Math.min(t,n)),i.pu(t,e),this.lu()}wc(t){this.Mc(0),this.Sc(t),this.xc()}yc(t){this.wo.ho(t),this.lu()}kc(){this.wo.lo(),this.Ch()}Mc(t){this.wo.ao(t)}Sc(t){this.wo.oo(t),this.lu()}xc(){this.wo._o(),this.Ch()}wt(){return this.Uu}Cc(t,e,i,n){this.bt.gn(t,e);let o=NaN,r=this.wo.ru(t),a=this.wo.Vs();a!==null&&(r=Math.min(Math.max(a.Ms(),r),a.ci()));let l=n.fn(),h=l.Tt();h!==null&&(o=l.pn(e,h)),o=this.Ju.Wl(o,r,n),this.bt.xn(r,o,n),this.Cl(),this.Xu.m(this.bt.xt(),{x:t,y:e},i)}Tc(){this.dc().kn(),this.Cl(),this.Xu.m(null,null,null)}pl(){let t=this.bt.Ht();if(t!==null){let e=this.bt.Mn(),i=this.bt.Sn();this.Cc(e,i,null,t)}this.bt.Dn()}Pc(t,e,i){let n=this.wo.vn(0);e!==void 0&&i!==void 0&&this.wo.gt(e,i);let o=this.wo.vn(0),r=this.wo.eu(),a=this.wo.Vs();if(a!==null&&n!==null&&o!==null){let l=a.Ir(r),h=n.u_>o.u_,c=t!==null&&t>r&&!h,d=l&&this.wo.F().shiftVisibleRangeOnNewBar;if(c&&!d){let u=t-r;this.wo.Gn(this.wo.ou()-u)}}this.wo.fu(t)}bl(t){t!==null&&t.Xo()}Ke(t){let e=this.Hu.find(i=>i.Ja().includes(t));return e===void 0?null:e}lu(){this.Qu.Dn(),this.Hu.forEach(t=>t.Xo()),this.pl()}M(){this.Hu.forEach(t=>t.M()),this.Hu.length=0,this.un.localization.priceFormatter=void 0,this.un.localization.timeFormatter=void 0}Rc(){return this.Gu}tr(){return this.Gu.F()}Po(){return this.Yu}Dc(t,e){let i=this.Hu[0],n=this.Bc(e,t,i);return this.Uu.push(n),this.Uu.length===1?this.dl():this.Ch(),n}Ac(t){let e=this.Ke(t),i=this.Uu.indexOf(t);ne(i!==-1,"Series not found"),this.Uu.splice(i,1),g(e).no(t),t.M&&t.M()}cl(t,e){let i=g(this.Ke(t));i.no(t);let n=this._c(e);if(n===null){let o=t.Zi();i.Qa(t,e,o)}else{let o=n.Ht===i?t.Zi():void 0;n.Ht.Qa(t,e,o)}}Cu(){let t=j.ns();t.$n(),this.ec(t)}Oc(t){let e=j.ns();e.qn(t),this.ec(e)}Zn(){let t=j.ns();t.Zn(),this.ec(t)}Kn(t){let e=j.ns();e.Kn(t),this.ec(e)}Gn(t){let e=j.ns();e.Gn(t),this.ec(e)}Yn(t){let e=j.ns();e.Yn(t),this.ec(e)}Hn(){let t=j.ns();t.Hn(),this.ec(t)}Lc(){return this.un.rightPriceScale.visible?"right":"left"}Ic(){return this.sc}U(){return this.ic}Lt(t){let e=this.sc,i=this.ic;if(e===i)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),this.Zu===null||this.Zu.bs!==i||this.Zu.gs!==e)this.Zu={bs:i,gs:e,Ec:new Map};else{let o=this.Zu.Ec.get(t);if(o!==void 0)return o}let n=function(o,r,a){let[l,h,c,d]=zi(o),[u,m,f,p]=zi(r),y=[tt(l+a*(u-l)),tt(h+a*(m-h)),tt(c+a*(f-c)),Ia(d+a*(p-d))];return`rgba(${y[0]}, ${y[1]}, ${y[2]}, ${y[3]})`}(i,e,t/100);return this.Zu.Ec.set(t,n),n}mc(t,e){let i=new j(e);if(t!==null){let n=this.Hu.indexOf(t);i.Vn(n,{Nn:e})}return i}rc(t,e){return e===void 0&&(e=2),this.mc(this.Ke(t),e)}ec(t){this.Ku&&this.Ku(t),this.Hu.forEach(e=>e.Ko().Th().gt())}Bc(t,e,i){let n=new Ue(this,t,e),o=t.priceScaleId!==void 0?t.priceScaleId:this.Lc();return i.Qa(n,o),Ji(o)||n.kh(t),n}nc(t){let e=this.un.layout;return e.background.type==="gradient"?t===0?e.background.topColor:e.background.bottomColor:e.background.color}};function oo(s){return!mt(s)&&!no(s)}function ja(s){return mt(s)}(function(s){s[s.Disabled=0]="Disabled",s[s.Continuous=1]="Continuous",s[s.OnDataUpdate=2]="OnDataUpdate"})(ca||(ca={})),function(s){s[s.LastBar=0]="LastBar",s[s.LastVisible=1]="LastVisible"}(da||(da={})),function(s){s.Solid="solid",s.VerticalGradient="gradient"}(ua||(ua={}));var ye=typeof window<"u";function ma(){return!!ye&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Bn(){return!!ye&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Ws(s){return s+s%2}function An(s,t){return s.zc-t.zc}function Fn(s,t,e){let i=(s.zc-t.zc)/(s._t-t._t);return Math.sign(i)*Math.min(Math.abs(i),e)}var Us=class{constructor(t,e,i,n){this.Vc=null,this.Nc=null,this.Fc=null,this.Wc=null,this.jc=null,this.$c=0,this.Hc=0,this.Uc=t,this.qc=e,this.Yc=i,this.es=n}Xc(t,e){if(this.Vc!==null){if(this.Vc._t===e)return void(this.Vc.zc=t);if(Math.abs(this.Vc.zc-t)<this.es)return}this.Wc=this.Fc,this.Fc=this.Nc,this.Nc=this.Vc,this.Vc={_t:e,zc:t}}pr(t,e){if(this.Vc===null||this.Nc===null||e-this.Vc._t>50)return;let i=0,n=Fn(this.Vc,this.Nc,this.qc),o=An(this.Vc,this.Nc),r=[n],a=[o];if(i+=o,this.Fc!==null){let h=Fn(this.Nc,this.Fc,this.qc);if(Math.sign(h)===Math.sign(n)){let c=An(this.Nc,this.Fc);if(r.push(h),a.push(c),i+=c,this.Wc!==null){let d=Fn(this.Fc,this.Wc,this.qc);if(Math.sign(d)===Math.sign(n)){let u=An(this.Fc,this.Wc);r.push(d),a.push(u),i+=u}}}}let l=0;for(let h=0;h<r.length;++h)l+=a[h]/i*r[h];Math.abs(l)<this.Uc||(this.jc={zc:t,_t:e},this.Hc=l,this.$c=function(h,c){let d=Math.log(c);return Math.log(1*d/-h)/d}(Math.abs(l),this.Yc))}Mu(t){let e=g(this.jc),i=t-e._t;return e.zc+this.Hc*(Math.pow(this.Yc,i)-1)/Math.log(this.Yc)}wu(t){return this.jc===null||this.Zc(t)===this.$c}Zc(t){let e=t-g(this.jc)._t;return Math.min(e,this.$c)}};function ie(s,t){let e=g(s.ownerDocument).createElement("canvas");s.appendChild(e);let i=Rn(e,{type:"device-pixel-content-box",options:{allowResizeObserver:!1},transform:(n,o)=>({width:Math.max(n.width,o.width),height:Math.max(n.height,o.height)})});return i.resizeCanvasElement(t),i}function ah(s){ye&&window.chrome!==void 0&&s.addEventListener("mousedown",t=>{if(t.button===1)return t.preventDefault(),!1})}var Xe=class{constructor(t,e,i){this.Kc=0,this.Gc=null,this.Jc={st:Number.NEGATIVE_INFINITY,et:Number.POSITIVE_INFINITY},this.Qc=0,this.td=null,this.nd={st:Number.NEGATIVE_INFINITY,et:Number.POSITIVE_INFINITY},this.sd=null,this.ed=!1,this.rd=null,this.hd=null,this.ld=!1,this.ad=!1,this.od=!1,this._d=null,this.ud=null,this.dd=null,this.fd=null,this.pd=null,this.vd=null,this.md=null,this.bd=0,this.gd=!1,this.wd=!1,this.Md=!1,this.Sd=0,this.xd=null,this.yd=!Bn(),this.kd=n=>{this.Cd(n)},this.Td=n=>{if(this.Pd(n)){let o=this.Rd(n);if(++this.Qc,this.td&&this.Qc>1){let{Dd:r}=this.Bd(ut(n),this.nd);r<30&&!this.od&&this.Ad(o,this.Ld.Od),this.Id()}}else{let o=this.Rd(n);if(++this.Kc,this.Gc&&this.Kc>1){let{Dd:r}=this.Bd(ut(n),this.Jc);r<5&&!this.ad&&this.Ed(o,this.Ld.zd),this.Vd()}}},this.Nd=t,this.Ld=e,this.un=i,this.Fd()}M(){this._d!==null&&(this._d(),this._d=null),this.ud!==null&&(this.ud(),this.ud=null),this.fd!==null&&(this.fd(),this.fd=null),this.pd!==null&&(this.pd(),this.pd=null),this.vd!==null&&(this.vd(),this.vd=null),this.dd!==null&&(this.dd(),this.dd=null),this.Wd(),this.Vd()}jd(t){this.fd&&this.fd();let e=this.$d.bind(this);if(this.fd=()=>{this.Nd.removeEventListener("mousemove",e)},this.Nd.addEventListener("mousemove",e),this.Pd(t))return;let i=this.Rd(t);this.Ed(i,this.Ld.Hd),this.yd=!0}Vd(){this.Gc!==null&&clearTimeout(this.Gc),this.Kc=0,this.Gc=null,this.Jc={st:Number.NEGATIVE_INFINITY,et:Number.POSITIVE_INFINITY}}Id(){this.td!==null&&clearTimeout(this.td),this.Qc=0,this.td=null,this.nd={st:Number.NEGATIVE_INFINITY,et:Number.POSITIVE_INFINITY}}$d(t){if(this.Md||this.hd!==null||this.Pd(t))return;let e=this.Rd(t);this.Ed(e,this.Ld.Ud),this.yd=!0}qd(t){let e=Nn(t.changedTouches,g(this.xd));if(e===null||(this.Sd=Ei(t),this.md!==null)||this.wd)return;this.gd=!0;let i=this.Bd(ut(e),g(this.hd)),{Yd:n,Xd:o,Dd:r}=i;if(this.ld||!(r<5)){if(!this.ld){let a=.5*n,l=o>=a&&!this.un.Zd(),h=a>o&&!this.un.Kd();l||h||(this.wd=!0),this.ld=!0,this.od=!0,this.Wd(),this.Id()}if(!this.wd){let a=this.Rd(t,e);this.Ad(a,this.Ld.Gd),me(t)}}}Jd(t){if(t.button!==0)return;let e=this.Bd(ut(t),g(this.rd)),{Dd:i}=e;if(i>=5&&(this.ad=!0,this.Vd()),this.ad){let n=this.Rd(t);this.Ed(n,this.Ld.Qd)}}Bd(t,e){let i=Math.abs(e.st-t.st),n=Math.abs(e.et-t.et);return{Yd:i,Xd:n,Dd:i+n}}tf(t){let e=Nn(t.changedTouches,g(this.xd));if(e===null&&t.touches.length===0&&(e=t.changedTouches[0]),e===null)return;this.xd=null,this.Sd=Ei(t),this.Wd(),this.hd=null,this.vd&&(this.vd(),this.vd=null);let i=this.Rd(t,e);if(this.Ad(i,this.Ld.if),++this.Qc,this.td&&this.Qc>1){let{Dd:n}=this.Bd(ut(e),this.nd);n<30&&!this.od&&this.Ad(i,this.Ld.Od),this.Id()}else this.od||(this.Ad(i,this.Ld.nf),this.Ld.nf&&me(t));this.Qc===0&&me(t),t.touches.length===0&&this.ed&&(this.ed=!1,me(t))}Cd(t){if(t.button!==0)return;let e=this.Rd(t);if(this.rd=null,this.Md=!1,this.pd&&(this.pd(),this.pd=null),ma()&&this.Nd.ownerDocument.documentElement.removeEventListener("mouseleave",this.kd),!this.Pd(t))if(this.Ed(e,this.Ld.sf),++this.Kc,this.Gc&&this.Kc>1){let{Dd:i}=this.Bd(ut(t),this.Jc);i<5&&!this.ad&&this.Ed(e,this.Ld.zd),this.Vd()}else this.ad||this.Ed(e,this.Ld.ef)}Wd(){this.sd!==null&&(clearTimeout(this.sd),this.sd=null)}rf(t){if(this.xd!==null)return;let e=t.changedTouches[0];this.xd=e.identifier,this.Sd=Ei(t);let i=this.Nd.ownerDocument.documentElement;this.od=!1,this.ld=!1,this.wd=!1,this.hd=ut(e),this.vd&&(this.vd(),this.vd=null);{let o=this.qd.bind(this),r=this.tf.bind(this);this.vd=()=>{i.removeEventListener("touchmove",o),i.removeEventListener("touchend",r)},i.addEventListener("touchmove",o,{passive:!1}),i.addEventListener("touchend",r,{passive:!1}),this.Wd(),this.sd=setTimeout(this.hf.bind(this,t),240)}let n=this.Rd(t,e);this.Ad(n,this.Ld.lf),this.td||(this.Qc=0,this.td=setTimeout(this.Id.bind(this),500),this.nd=ut(e))}af(t){if(t.button!==0)return;let e=this.Nd.ownerDocument.documentElement;ma()&&e.addEventListener("mouseleave",this.kd),this.ad=!1,this.rd=ut(t),this.pd&&(this.pd(),this.pd=null);{let n=this.Jd.bind(this),o=this.Cd.bind(this);this.pd=()=>{e.removeEventListener("mousemove",n),e.removeEventListener("mouseup",o)},e.addEventListener("mousemove",n),e.addEventListener("mouseup",o)}if(this.Md=!0,this.Pd(t))return;let i=this.Rd(t);this.Ed(i,this.Ld._f),this.Gc||(this.Kc=0,this.Gc=setTimeout(this.Vd.bind(this),500),this.Jc=ut(t))}Fd(){this.Nd.addEventListener("mouseenter",this.jd.bind(this)),this.Nd.addEventListener("touchcancel",this.Wd.bind(this));{let t=this.Nd.ownerDocument,e=i=>{this.Ld.uf&&(i.composed&&this.Nd.contains(i.composedPath()[0])||i.target&&this.Nd.contains(i.target)||this.Ld.uf())};this.ud=()=>{t.removeEventListener("touchstart",e)},this._d=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}Bn()&&(this.dd=()=>{this.Nd.removeEventListener("dblclick",this.Td)},this.Nd.addEventListener("dblclick",this.Td)),this.Nd.addEventListener("mouseleave",this.cf.bind(this)),this.Nd.addEventListener("touchstart",this.rf.bind(this),{passive:!0}),ah(this.Nd),this.Nd.addEventListener("mousedown",this.af.bind(this)),this.df(),this.Nd.addEventListener("touchmove",()=>{},{passive:!1})}df(){this.Ld.ff===void 0&&this.Ld.pf===void 0&&this.Ld.vf===void 0||(this.Nd.addEventListener("touchstart",t=>this.mf(t.touches),{passive:!0}),this.Nd.addEventListener("touchmove",t=>{if(t.touches.length===2&&this.md!==null&&this.Ld.pf!==void 0){let e=fa(t.touches[0],t.touches[1])/this.bd;this.Ld.pf(this.md,e),me(t)}},{passive:!1}),this.Nd.addEventListener("touchend",t=>{this.mf(t.touches)}))}mf(t){t.length===1&&(this.gd=!1),t.length!==2||this.gd||this.ed?this.bf():this.gf(t)}gf(t){let e=this.Nd.getBoundingClientRect()||{left:0,top:0};this.md={st:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,et:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.bd=fa(t[0],t[1]),this.Ld.ff!==void 0&&this.Ld.ff(),this.Wd()}bf(){this.md!==null&&(this.md=null,this.Ld.vf!==void 0&&this.Ld.vf())}cf(t){if(this.fd&&this.fd(),this.Pd(t)||!this.yd)return;let e=this.Rd(t);this.Ed(e,this.Ld.wf),this.yd=!Bn()}hf(t){let e=Nn(t.touches,g(this.xd));if(e===null)return;let i=this.Rd(t,e);this.Ad(i,this.Ld.Mf),this.od=!0,this.ed=!0}Pd(t){return t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents!==void 0?t.sourceCapabilities.firesTouchEvents:Ei(t)<this.Sd+500}Ad(t,e){e&&e.call(this.Ld,t)}Ed(t,e){e&&e.call(this.Ld,t)}Rd(t,e){let i=e||t,n=this.Nd.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-n.left,localY:i.clientY-n.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,Sf:!t.type.startsWith("mouse")&&t.type!=="contextmenu"&&t.type!=="click",xf:t.type,yf:i.target,kf:t.view,Cf:()=>{t.type!=="touchstart"&&me(t)}}}};function fa(s,t){let e=s.clientX-t.clientX,i=s.clientY-t.clientY;return Math.sqrt(e*e+i*i)}function me(s){s.cancelable&&s.preventDefault()}function ut(s){return{st:s.pageX,et:s.pageY}}function Ei(s){return s.timeStamp||performance.now()}function Nn(s,t){for(let e=0;e<s.length;++e)if(s[e].identifier===t)return s[e];return null}var Qi=class{constructor(t,e,i,n){this.zi=null,this.Tf=null,this.Pf=!1,this.Rf=new ee(200),this.zr=null,this.Df=0,this.Bf=!1,this.Af=()=>{this.Bf||this.tn.Of().Ut().Ch()},this.Lf=()=>{this.Bf||this.tn.Of().Ut().Ch()},this.tn=t,this.un=e,this.Ba=e.layout,this.Gu=i,this.If=n==="left",this.Ef=document.createElement("div"),this.Ef.style.height="100%",this.Ef.style.overflow="hidden",this.Ef.style.width="25px",this.Ef.style.left="0",this.Ef.style.position="relative",this.zf=ie(this.Ef,k({width:16,height:16})),this.zf.subscribeSuggestedBitmapSizeChanged(this.Af);let o=this.zf.canvasElement;o.style.position="absolute",o.style.zIndex="1",o.style.left="0",o.style.top="0",this.Vf=ie(this.Ef,k({width:16,height:16})),this.Vf.subscribeSuggestedBitmapSizeChanged(this.Lf);let r=this.Vf.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0";let a={_f:this.Nf.bind(this),lf:this.Nf.bind(this),Qd:this.Ff.bind(this),Gd:this.Ff.bind(this),uf:this.Wf.bind(this),sf:this.jf.bind(this),if:this.jf.bind(this),zd:this.$f.bind(this),Od:this.$f.bind(this),Hd:this.Hf.bind(this),wf:this.Uf.bind(this)};this.qf=new Xe(this.Vf.canvasElement,a,{Zd:()=>!1,Kd:()=>!0})}M(){this.qf.M(),this.Vf.unsubscribeSuggestedBitmapSizeChanged(this.Lf),this.Vf.dispose(),this.zf.unsubscribeSuggestedBitmapSizeChanged(this.Af),this.zf.dispose(),this.zi!==null&&this.zi.eo().v(this),this.zi=null}Yf(){return this.Ef}T(){return this.Ba.fontSize}Xf(){let t=this.Gu.F();return this.zr!==t.P&&(this.Rf.Fe(),this.zr=t.P),t}Zf(){if(this.zi===null)return 0;let t=0,e=this.Xf(),i=g(this.zf.canvasElement.getContext("2d"));i.save();let n=this.zi.Jl();i.font=this.Kf(),n.length>0&&(t=Math.max(this.Rf.Si(i,n[0].ua),this.Rf.Si(i,n[n.length-1].ua)));let o=this.Gf();for(let l=o.length;l--;){let h=this.Rf.Si(i,o[l].Gt());h>t&&(t=h)}let r=this.zi.Tt();if(r!==null&&this.Tf!==null){let l=this.zi.pn(1,r),h=this.zi.pn(this.Tf.height-2,r);t=Math.max(t,this.Rf.Si(i,this.zi.Fi(Math.floor(Math.min(l,h))+.11111111111111,r)),this.Rf.Si(i,this.zi.Fi(Math.ceil(Math.max(l,h))-.11111111111111,r)))}i.restore();let a=t||34;return Ws(Math.ceil(e.k+e.C+e.O+e.L+5+a))}Jf(t){this.Tf!==null&&dt(this.Tf,t)||(this.Tf=t,this.Bf=!0,this.zf.resizeCanvasElement(t),this.Vf.resizeCanvasElement(t),this.Bf=!1,this.Ef.style.width=`${t.width}px`,this.Ef.style.height=`${t.height}px`)}Qf(){return g(this.Tf).width}Gi(t){this.zi!==t&&(this.zi!==null&&this.zi.eo().v(this),this.zi=t,t.eo().l(this.Sa.bind(this),this))}Bt(){return this.zi}Fe(){let t=this.tn.tp();this.tn.Of().Ut().qo(t,g(this.Bt()))}ip(t){if(this.Tf===null)return;if(t!==1){this.np(),this.zf.applySuggestedBitmapSize();let i=Mt(this.zf);i!==null&&(i.useBitmapCoordinateSpace(n=>{this.sp(n),this.ye(n)}),this.ep(i),this.rp(i))}this.Vf.applySuggestedBitmapSize();let e=Mt(this.Vf);e!==null&&(e.useBitmapCoordinateSpace(({context:i,bitmapSize:n})=>{i.clearRect(0,0,n.width,n.height)}),this.hp(e))}lp(){return this.zf.bitmapSize}ap(t,e,i){let n=this.lp();n.width>0&&n.height>0&&t.drawImage(this.zf.canvasElement,e,i)}gt(){var t;(t=this.zi)===null||t===void 0||t.Jl()}Nf(t){if(this.zi===null||this.zi.Ni()||!this.un.handleScale.axisPressedMouseMove.price)return;let e=this.tn.Of().Ut(),i=this.tn.tp();this.Pf=!0,e.No(i,this.zi,t.localY)}Ff(t){if(this.zi===null||!this.un.handleScale.axisPressedMouseMove.price)return;let e=this.tn.Of().Ut(),i=this.tn.tp(),n=this.zi;e.Fo(i,n,t.localY)}Wf(){if(this.zi===null||!this.un.handleScale.axisPressedMouseMove.price)return;let t=this.tn.Of().Ut(),e=this.tn.tp(),i=this.zi;this.Pf&&(this.Pf=!1,t.Wo(e,i))}jf(t){if(this.zi===null||!this.un.handleScale.axisPressedMouseMove.price)return;let e=this.tn.Of().Ut(),i=this.tn.tp();this.Pf=!1,e.Wo(i,this.zi)}$f(t){this.un.handleScale.axisDoubleClickReset.price&&this.Fe()}Hf(t){this.zi!==null&&(!this.tn.Of().Ut().F().handleScale.axisPressedMouseMove.price||this.zi.th()||this.zi.Na()||this.op(1))}Uf(t){this.op(0)}Gf(){let t=[],e=this.zi===null?void 0:this.zi;return(i=>{for(let n=0;n<i.length;++n){let o=i[n].Pn(this.tn.tp(),e);for(let r=0;r<o.length;r++)t.push(o[r])}})(this.tn.tp().Ja()),t}sp({context:t,bitmapSize:e}){let{width:i,height:n}=e,o=this.tn.tp().Ut(),r=o.U(),a=o.Ic();r===a?Zi(t,0,0,i,n,r):Oa(t,0,0,i,n,r,a)}ye({context:t,bitmapSize:e,horizontalPixelRatio:i}){if(this.Tf===null||this.zi===null||!this.zi.F().borderVisible)return;t.fillStyle=this.zi.F().borderColor;let n=Math.max(1,Math.floor(this.Xf().k*i)),o;o=this.If?e.width-n:0,t.fillRect(o,0,n,e.height)}ep(t){if(this.Tf===null||this.zi===null)return;let e=this.zi.Jl(),i=this.zi.F(),n=this.Xf(),o=this.If?this.Tf.width-n.C:0;i.borderVisible&&i.ticksVisible&&t.useBitmapCoordinateSpace(({context:r,horizontalPixelRatio:a,verticalPixelRatio:l})=>{r.fillStyle=i.borderColor;let h=Math.max(1,Math.floor(l)),c=Math.floor(.5*l),d=Math.round(n.C*a);r.beginPath();for(let u of e)r.rect(Math.floor(o*a),Math.round(u.Yl*l)-c,d,h);r.fill()}),t.useMediaCoordinateSpace(({context:r})=>{var a;r.font=this.Kf(),r.fillStyle=(a=i.textColor)!==null&&a!==void 0?a:this.Ba.textColor,r.textAlign=this.If?"right":"left",r.textBaseline="middle";let l=this.If?Math.round(o-n.O):Math.round(o+n.C+n.O),h=e.map(c=>this.Rf.Mi(r,c.ua));for(let c=e.length;c--;){let d=e[c];r.fillText(d.ua,l,d.Yl+h[c])}})}np(){if(this.Tf===null||this.zi===null)return;let t=this.Tf.height/2,e=[],i=this.zi.Ja().slice(),n=this.tn.tp(),o=this.Xf();this.zi===n.Je()&&this.tn.tp().Ja().forEach(l=>{n.Ge(l)&&i.push(l)});let r=this.zi.jl()[0],a=this.zi;i.forEach(l=>{let h=l.Pn(n,a);h.forEach(c=>{c.Ai(null),c.Oi()&&e.push(c)}),r===l&&h.length>0&&(t=h[0].yi())}),e.forEach(l=>l.Ai(l.yi())),this.zi.F().alignLabels&&this._p(e,o,t)}_p(t,e,i){if(this.Tf===null)return;let n=t.filter(r=>r.yi()<=i),o=t.filter(r=>r.yi()>i);n.sort((r,a)=>a.yi()-r.yi()),n.length&&o.length&&o.push(n[0]),o.sort((r,a)=>r.yi()-a.yi());for(let r of t){let a=Math.floor(r.It(e)/2),l=r.yi();l>-a&&l<a&&r.Ai(a),l>this.Tf.height-a&&l<this.Tf.height+a&&r.Ai(this.Tf.height-a)}for(let r=1;r<n.length;r++){let a=n[r],l=n[r-1],h=l.It(e,!1),c=a.yi(),d=l.Bi();c>d-h&&a.Ai(d-h)}for(let r=1;r<o.length;r++){let a=o[r],l=o[r-1],h=l.It(e,!0),c=a.yi(),d=l.Bi();c<d+h&&a.Ai(d+h)}}rp(t){if(this.Tf===null)return;let e=this.Gf(),i=this.Xf(),n=this.If?"right":"left";e.forEach(o=>{o.Li()&&o.Mt(g(this.zi)).X(t,i,this.Rf,n)})}hp(t){if(this.Tf===null||this.zi===null)return;let e=this.tn.Of().Ut(),i=[],n=this.tn.tp(),o=e.dc().Pn(n,this.zi);o.length&&i.push(o);let r=this.Xf(),a=this.If?"right":"left";i.forEach(l=>{l.forEach(h=>{h.Mt(g(this.zi)).X(t,r,this.Rf,a)})})}op(t){this.Ef.style.cursor=t===1?"ns-resize":"default"}Sa(){let t=this.Zf();this.Df<t&&this.tn.Of().Ut().dl(),this.Df=t}Kf(){return be(this.Ba.fontSize,this.Ba.fontFamily)}};function pa(s,t,e,i){s.K&&s.K(t,e,i)}function Vn(s,t,e,i){s.X(t,e,i)}function Di(s,t){return s.Tn(t)}function lh(s,t){return s.Ji(t)}function hh(s,t){return s.kl!==void 0?s.kl(t):[]}var Xs=class s{constructor(t,e){this.Tf=k({width:0,height:0}),this.up=null,this.cp=null,this.dp=null,this.fp=!1,this.pp=new B,this.vp=0,this.mp=!1,this.bp=null,this.gp=!1,this.wp=null,this.Mp=null,this.Bf=!1,this.Af=()=>{this.Bf||this.Sp===null||this.Hi().Ch()},this.Lf=()=>{this.Bf||this.Sp===null||this.Hi().Ch()},this.xp=t,this.Sp=e,this.Sp.Zo().l(this.yp.bind(this),this,!0),this.kp=document.createElement("td"),this.kp.style.padding="0",this.kp.style.position="relative";let i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.Cp=document.createElement("td"),this.Cp.style.padding="0",this.Tp=document.createElement("td"),this.Tp.style.padding="0",this.kp.appendChild(i),this.zf=ie(i,k({width:16,height:16})),this.zf.subscribeSuggestedBitmapSizeChanged(this.Af);let n=this.zf.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Vf=ie(i,k({width:16,height:16})),this.Vf.subscribeSuggestedBitmapSizeChanged(this.Lf);let o=this.Vf.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0",this.Pp=document.createElement("tr"),this.Pp.appendChild(this.Cp),this.Pp.appendChild(this.kp),this.Pp.appendChild(this.Tp),this.Rp(),this.qf=new Xe(this.Vf.canvasElement,this,{Zd:()=>this.bp===null&&!this.xp.F().handleScroll.vertTouchDrag,Kd:()=>this.bp===null&&!this.xp.F().handleScroll.horzTouchDrag})}M(){this.up!==null&&this.up.M(),this.cp!==null&&this.cp.M(),this.Vf.unsubscribeSuggestedBitmapSizeChanged(this.Lf),this.Vf.dispose(),this.zf.unsubscribeSuggestedBitmapSizeChanged(this.Af),this.zf.dispose(),this.Sp!==null&&this.Sp.Zo().v(this),this.qf.M()}tp(){return g(this.Sp)}Dp(t){this.Sp!==null&&this.Sp.Zo().v(this),this.Sp=t,this.Sp!==null&&this.Sp.Zo().l(s.prototype.yp.bind(this),this,!0),this.Rp()}Of(){return this.xp}Yf(){return this.Pp}Rp(){if(this.Sp!==null&&(this.Bp(),this.Hi().wt().length!==0)){if(this.up!==null){let t=this.Sp.zo();this.up.Gi(g(t))}if(this.cp!==null){let t=this.Sp.Vo();this.cp.Gi(g(t))}}}Ap(){this.up!==null&&this.up.gt(),this.cp!==null&&this.cp.gt()}Ro(){return this.Sp!==null?this.Sp.Ro():0}Do(t){this.Sp&&this.Sp.Do(t)}Hd(t){if(!this.Sp)return;this.Op();let e=t.localX,i=t.localY;this.Lp(e,i,t)}_f(t){this.Op(),this.Ip(),this.Lp(t.localX,t.localY,t)}Ud(t){if(!this.Sp)return;this.Op();let e=t.localX,i=t.localY;this.Lp(e,i,t);let n=this.ir(e,i);this.Hi().lc(n&&{ac:n.ac,Ep:n.Ep})}ef(t){this.Sp!==null&&(this.Op(),this.zp(t))}Qd(t){this.Op(),this.Vp(t),this.Lp(t.localX,t.localY,t)}sf(t){this.Sp!==null&&(this.Op(),this.mp=!1,this.Np(t))}nf(t){this.Sp!==null&&this.zp(t)}Mf(t){if(this.mp=!0,this.bp===null){let e={x:t.localX,y:t.localY};this.Fp(e,e,t)}}wf(t){this.Sp!==null&&(this.Op(),this.Sp.Ut().lc(null),this.Wp())}jp(){return this.pp}ff(){this.vp=1,this.Hi().Hn()}pf(t,e){if(!this.xp.F().handleScale.pinch)return;let i=5*(e-this.vp);this.vp=e,this.Hi().gc(t.st,i)}lf(t){if(this.mp=!1,this.gp=this.bp!==null,this.Ip(),this.bp!==null){let e=this.Hi().dc();this.wp={x:e.Xt(),y:e.Zt()},this.bp={x:t.localX,y:t.localY}}}Gd(t){if(this.Sp===null)return;let e=t.localX,i=t.localY;if(this.bp===null)this.Vp(t);else{this.gp=!1;let n=g(this.wp),o=n.x+(e-this.bp.x),r=n.y+(i-this.bp.y);this.Lp(o,r,t)}}if(t){this.Of().F().trackingMode.exitMode===0&&(this.gp=!0),this.$p(),this.Np(t)}ir(t,e){let i=this.Sp;if(i===null)return null;let n=i.Ja();for(let o of n){let r=this.Hp(o.Tn(i),t,e);if(r!==null)return{ac:o,kf:r.kf,Ep:r.Ep}}return null}Up(t,e){g(e==="left"?this.up:this.cp).Jf(k({width:t,height:this.Tf.height}))}qp(){return this.Tf}Jf(t){dt(this.Tf,t)||(this.Tf=t,this.Bf=!0,this.zf.resizeCanvasElement(t),this.Vf.resizeCanvasElement(t),this.Bf=!1,this.kp.style.width=t.width+"px",this.kp.style.height=t.height+"px")}Yp(){let t=g(this.Sp);t.Eo(t.zo()),t.Eo(t.Vo());for(let e of t.jl())if(t.Ge(e)){let i=e.Bt();i!==null&&t.Eo(i),e.Dn()}}lp(){return this.zf.bitmapSize}ap(t,e,i){let n=this.lp();n.width>0&&n.height>0&&t.drawImage(this.zf.canvasElement,e,i)}ip(t){if(t===0||this.Sp===null)return;if(t>1&&this.Yp(),this.up!==null&&this.up.ip(t),this.cp!==null&&this.cp.ip(t),t!==1){this.zf.applySuggestedBitmapSize();let i=Mt(this.zf);i!==null&&(i.useBitmapCoordinateSpace(n=>{this.sp(n)}),this.Sp&&(this.Xp(i),this.Zp(i),this.Kp(i,Di),this.Kp(i,lh)))}this.Vf.applySuggestedBitmapSize();let e=Mt(this.Vf);e!==null&&(e.useBitmapCoordinateSpace(({context:i,bitmapSize:n})=>{i.clearRect(0,0,n.width,n.height)}),this.Kp(e,hh),this.Gp(e))}Jp(){return this.up}Qp(){return this.cp}yp(){this.Sp!==null&&this.Sp.Zo().v(this),this.Sp=null}zp(t){let e=t.localX,i=t.localY;this.pp.g()&&this.pp.m(this.Hi().yt().ru(e),{x:e,y:i},t)}sp({context:t,bitmapSize:e}){let{width:i,height:n}=e,o=this.Hi(),r=o.U(),a=o.Ic();r===a?Zi(t,0,0,i,n,a):Oa(t,0,0,i,n,r,a)}Xp(t){let e=g(this.Sp).Ko().Th().Mt();e!==null&&e.X(t,!1)}Zp(t){let e=this.Hi().cc();this.tv(t,Di,pa,e),this.tv(t,Di,Vn,e)}Gp(t){this.tv(t,Di,Vn,this.Hi().dc())}Kp(t,e){let i=g(this.Sp).Ja();for(let n of i)this.tv(t,e,pa,n);for(let n of i)this.tv(t,e,Vn,n)}tv(t,e,i,n){let o=g(this.Sp),r=e(n,o),a=o.Ut().hc(),l=a!==null&&a.ac===n,h=a!==null&&l&&a.Ep!==void 0?a.Ep.sr:void 0;for(let c of r){let d=c.Mt();d!==null&&i(d,t,l,h)}}Hp(t,e,i){for(let n of t){let o=n.Mt();if(o!==null&&o.ir){let r=o.ir(e,i);if(r!==null)return{kf:n,Ep:r}}}return null}Bp(){if(this.Sp===null)return;let t=this.xp,e=this.Sp.zo().F().visible,i=this.Sp.Vo().F().visible;e||this.up===null||(this.Cp.removeChild(this.up.Yf()),this.up.M(),this.up=null),i||this.cp===null||(this.Tp.removeChild(this.cp.Yf()),this.cp.M(),this.cp=null);let n=t.Ut().Rc();e&&this.up===null&&(this.up=new Qi(this,t.F(),n,"left"),this.Cp.appendChild(this.up.Yf())),i&&this.cp===null&&(this.cp=new Qi(this,t.F(),n,"right"),this.Tp.appendChild(this.cp.Yf()))}iv(t){return t.Sf&&this.mp||this.bp!==null}nv(t){return Math.max(0,Math.min(t,this.Tf.width-1))}sv(t){return Math.max(0,Math.min(t,this.Tf.height-1))}Lp(t,e,i){this.Hi().Cc(this.nv(t),this.sv(e),i,g(this.Sp))}Wp(){this.Hi().Tc()}$p(){this.gp&&(this.bp=null,this.Wp())}Fp(t,e,i){this.bp=t,this.gp=!1,this.Lp(e.x,e.y,i);let n=this.Hi().dc();this.wp={x:n.Xt(),y:n.Zt()}}Hi(){return this.xp.Ut()}Np(t){if(!this.fp)return;let e=this.Hi(),i=this.tp();if(e.Ho(i,i.fn()),this.dp=null,this.fp=!1,e.xc(),this.Mp!==null){let n=performance.now(),o=e.yt();this.Mp.pr(o.ou(),n),this.Mp.wu(n)||e.Yn(this.Mp)}}Op(){this.bp=null}Ip(){if(this.Sp){if(this.Hi().Hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)g(document.activeElement).blur();else{let t=document.getSelection();t!==null&&t.removeAllRanges()}!this.Sp.fn().Ni()&&this.Hi().yt().Ni()}}Vp(t){if(this.Sp===null)return;let e=this.Hi(),i=e.yt();if(i.Ni())return;let n=this.xp.F(),o=n.handleScroll,r=n.kineticScroll;if((!o.pressedMouseMove||t.Sf)&&(!o.horzTouchDrag&&!o.vertTouchDrag||!t.Sf))return;let a=this.Sp.fn(),l=performance.now();if(this.dp!==null||this.iv(t)||(this.dp={x:t.clientX,y:t.clientY,u_:l,ev:t.localX,rv:t.localY}),this.dp!==null&&!this.fp&&(this.dp.x!==t.clientX||this.dp.y!==t.clientY)){if(t.Sf&&r.touch||!t.Sf&&r.mouse){let h=i.Ks();this.Mp=new Us(.2/h,7/h,.997,15/h),this.Mp.Xc(i.ou(),this.dp.u_)}else this.Mp=null;a.Ni()||e.jo(this.Sp,a,t.localY),e.Mc(t.localX),this.fp=!0}this.fp&&(a.Ni()||e.$o(this.Sp,a,t.localY),e.Sc(t.localX),this.Mp!==null&&this.Mp.Xc(i.ou(),l))}},Ki=class{constructor(t,e,i,n,o){this.vt=!0,this.Tf=k({width:0,height:0}),this.Af=()=>this.ip(3),this.If=t==="left",this.Gu=i.Rc,this.un=e,this.hv=n,this.lv=o,this.Ef=document.createElement("div"),this.Ef.style.width="25px",this.Ef.style.height="100%",this.Ef.style.overflow="hidden",this.zf=ie(this.Ef,k({width:16,height:16})),this.zf.subscribeSuggestedBitmapSizeChanged(this.Af)}M(){this.zf.unsubscribeSuggestedBitmapSizeChanged(this.Af),this.zf.dispose()}Yf(){return this.Ef}qp(){return this.Tf}Jf(t){dt(this.Tf,t)||(this.Tf=t,this.zf.resizeCanvasElement(t),this.Ef.style.width=`${t.width}px`,this.Ef.style.height=`${t.height}px`,this.vt=!0)}ip(t){if(t<3&&!this.vt||this.Tf.width===0||this.Tf.height===0)return;this.vt=!1,this.zf.applySuggestedBitmapSize();let e=Mt(this.zf);e!==null&&e.useBitmapCoordinateSpace(i=>{this.sp(i),this.ye(i)})}lp(){return this.zf.bitmapSize}ap(t,e,i){let n=this.lp();n.width>0&&n.height>0&&t.drawImage(this.zf.canvasElement,e,i)}ye({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(!this.hv())return;t.fillStyle=this.un.timeScale.borderColor;let o=Math.floor(this.Gu.F().k*i),r=Math.floor(this.Gu.F().k*n),a=this.If?e.width-o:0;t.fillRect(a,0,o,r)}sp({context:t,bitmapSize:e}){Zi(t,0,0,e.width,e.height,this.lv())}};function ch(s,t){return s.w_>t.w_?s:t}var Gs=class{constructor(t){this.av=null,this.ov=null,this.S=null,this._v=!1,this.Tf=k({width:0,height:0}),this.uv=new B,this.Rf=new ee(5),this.Bf=!1,this.Af=()=>{this.Bf||this.xp.Ut().Ch()},this.Lf=()=>{this.Bf||this.xp.Ut().Ch()},this.xp=t,this.un=t.F().layout,this.cv=document.createElement("tr"),this.dv=document.createElement("td"),this.dv.style.padding="0",this.fv=document.createElement("td"),this.fv.style.padding="0",this.Ef=document.createElement("td"),this.Ef.style.height="25px",this.Ef.style.padding="0",this.pv=document.createElement("div"),this.pv.style.width="100%",this.pv.style.height="100%",this.pv.style.position="relative",this.pv.style.overflow="hidden",this.Ef.appendChild(this.pv),this.zf=ie(this.pv,k({width:16,height:16})),this.zf.subscribeSuggestedBitmapSizeChanged(this.Af);let e=this.zf.canvasElement;e.style.position="absolute",e.style.zIndex="1",e.style.left="0",e.style.top="0",this.Vf=ie(this.pv,k({width:16,height:16})),this.Vf.subscribeSuggestedBitmapSizeChanged(this.Lf);let i=this.Vf.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.cv.appendChild(this.dv),this.cv.appendChild(this.Ef),this.cv.appendChild(this.fv),this.vv(),this.xp.Ut().Po().l(this.vv.bind(this),this),this.qf=new Xe(this.Vf.canvasElement,this,{Zd:()=>!0,Kd:()=>!1})}M(){this.qf.M(),this.av!==null&&this.av.M(),this.ov!==null&&this.ov.M(),this.Vf.unsubscribeSuggestedBitmapSizeChanged(this.Lf),this.Vf.dispose(),this.zf.unsubscribeSuggestedBitmapSizeChanged(this.Af),this.zf.dispose()}Yf(){return this.cv}mv(){return this.av}bv(){return this.ov}_f(t){if(this._v)return;this._v=!0;let e=this.xp.Ut();!e.yt().Ni()&&this.xp.F().handleScale.axisPressedMouseMove.time&&e.bc(t.localX)}lf(t){this._f(t)}uf(){let t=this.xp.Ut();!t.yt().Ni()&&this._v&&(this._v=!1,this.xp.F().handleScale.axisPressedMouseMove.time&&t.kc())}Qd(t){let e=this.xp.Ut();!e.yt().Ni()&&this.xp.F().handleScale.axisPressedMouseMove.time&&e.yc(t.localX)}Gd(t){this.Qd(t)}sf(){this._v=!1;let t=this.xp.Ut();t.yt().Ni()&&!this.xp.F().handleScale.axisPressedMouseMove.time||t.kc()}if(){this.sf()}zd(){this.xp.F().handleScale.axisDoubleClickReset.time&&this.xp.Ut().Zn()}Od(){this.zd()}Hd(){this.xp.Ut().F().handleScale.axisPressedMouseMove.time&&this.op(1)}wf(){this.op(0)}qp(){return this.Tf}gv(){return this.uv}wv(t,e,i){dt(this.Tf,t)||(this.Tf=t,this.Bf=!0,this.zf.resizeCanvasElement(t),this.Vf.resizeCanvasElement(t),this.Bf=!1,this.Ef.style.width=`${t.width}px`,this.Ef.style.height=`${t.height}px`,this.uv.m(t)),this.av!==null&&this.av.Jf(k({width:e,height:t.height})),this.ov!==null&&this.ov.Jf(k({width:i,height:t.height}))}Mv(){let t=this.Sv();return Math.ceil(t.k+t.C+t.T+t.I+t.A+t.xv)}gt(){this.xp.Ut().yt().Jl()}lp(){return this.zf.bitmapSize}ap(t,e,i){let n=this.lp();n.width>0&&n.height>0&&t.drawImage(this.zf.canvasElement,e,i)}ip(t){if(t===0)return;if(t!==1){this.zf.applySuggestedBitmapSize();let i=Mt(this.zf);i!==null&&(i.useBitmapCoordinateSpace(n=>{this.sp(n),this.ye(n)}),this.ep(i)),this.av!==null&&this.av.ip(t),this.ov!==null&&this.ov.ip(t)}this.Vf.applySuggestedBitmapSize();let e=Mt(this.Vf);e!==null&&(e.useBitmapCoordinateSpace(({context:i,bitmapSize:n})=>{i.clearRect(0,0,n.width,n.height)}),this.yv([this.xp.Ut().dc()],e))}sp({context:t,bitmapSize:e}){Zi(t,0,0,e.width,e.height,this.xp.Ut().Ic())}ye({context:t,bitmapSize:e,verticalPixelRatio:i}){if(this.xp.F().timeScale.borderVisible){t.fillStyle=this.kv();let n=Math.max(1,Math.floor(this.Sv().k*i));t.fillRect(0,0,e.width,n)}}ep(t){let e=this.xp.Ut().yt(),i=e.Jl();if(!i||i.length===0)return;let n=i.reduce(ch,i[0]).w_;n>30&&n<50&&(n=30);let o=this.Sv(),r=e.F();r.borderVisible&&r.ticksVisible&&t.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:l,verticalPixelRatio:h})=>{a.strokeStyle=this.kv(),a.fillStyle=this.kv();let c=Math.max(1,Math.floor(l)),d=Math.floor(.5*l);a.beginPath();let u=Math.round(o.C*h);for(let m=i.length;m--;){let f=Math.round(i[m].Yl*l);a.rect(f-d,0,c,u)}a.fill()}),t.useMediaCoordinateSpace(({context:a})=>{let l=o.k+o.C+o.I+o.T/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.$(),a.font=this.Kf();for(let h of i)if(h.w_<n){let c=h.cu?this.Cv(a,h.Yl,h.ua):h.Yl;a.fillText(h.ua,c,l)}a.font=this.Tv();for(let h of i)if(h.w_>=n){let c=h.cu?this.Cv(a,h.Yl,h.ua):h.Yl;a.fillText(h.ua,c,l)}})}Cv(t,e,i){let n=this.Rf.Si(t,i),o=n/2,r=Math.floor(e-o)+.5;return r<0?e+=Math.abs(0-r):r+n>this.Tf.width&&(e-=Math.abs(this.Tf.width-(r+n))),e}yv(t,e){let i=this.Sv();for(let n of t)for(let o of n.Qi())o.Mt().X(e,i)}kv(){return this.xp.F().timeScale.borderColor}$(){return this.un.textColor}W(){return this.un.fontSize}Kf(){return be(this.W(),this.un.fontFamily)}Tv(){return be(this.W(),this.un.fontFamily,"bold")}Sv(){this.S===null&&(this.S={k:1,V:NaN,I:NaN,A:NaN,ji:NaN,C:5,T:NaN,P:"",Wi:new ee,xv:0});let t=this.S,e=this.Kf();if(t.P!==e){let i=this.W();t.T=i,t.P=e,t.I=3*i/12,t.A=3*i/12,t.ji=9*i/12,t.V=0,t.xv=4*i/12,t.Wi.Fe()}return this.S}op(t){this.Ef.style.cursor=t===1?"ew-resize":"default"}vv(){let t=this.xp.Ut(),e=t.F();e.leftPriceScale.visible||this.av===null||(this.dv.removeChild(this.av.Yf()),this.av.M(),this.av=null),e.rightPriceScale.visible||this.ov===null||(this.fv.removeChild(this.ov.Yf()),this.ov.M(),this.ov=null);let i={Rc:this.xp.Ut().Rc()},n=()=>e.leftPriceScale.borderVisible&&t.yt().F().borderVisible,o=()=>t.Ic();e.leftPriceScale.visible&&this.av===null&&(this.av=new Ki("left",e,i,n,o),this.dv.appendChild(this.av.Yf())),e.rightPriceScale.visible&&this.ov===null&&(this.ov=new Ki("right",e,i,n,o),this.fv.appendChild(this.ov.Yf()))}},dh=!!ye&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(s=>s.brand.includes("Chromium"))&&!!ye&&(!((Hn=navigator?.userAgentData)===null||Hn===void 0)&&Hn.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0),Hn,$s=class{constructor(t,e){var i;this.Pv=[],this.Rv=0,this.fa=0,this.vo=0,this.Dv=0,this.Bv=0,this.Av=null,this.Ov=!1,this.pp=new B,this.Xu=new B,this.Lv=null,this.Iv=t,this.un=e,this.cv=document.createElement("div"),this.cv.classList.add("tv-lightweight-charts"),this.cv.style.overflow="hidden",this.cv.style.width="100%",this.cv.style.height="100%",(i=this.cv).style.userSelect="none",i.style.webkitUserSelect="none",i.style.msUserSelect="none",i.style.MozUserSelect="none",i.style.webkitTapHighlightColor="transparent",this.Ev=document.createElement("table"),this.Ev.setAttribute("cellspacing","0"),this.cv.appendChild(this.Ev),this.zv=this.Vv.bind(this),Yn(this.un)&&this.Nv(!0),this.Hi=new js(this.Ku.bind(this),this.un),this.Ut().fc().l(this.Fv.bind(this),this),this.Wv=new Gs(this),this.Ev.appendChild(this.Wv.Yf());let n=e.autoSize&&this.jv(),o=this.un.width,r=this.un.height;if(n||o===0||r===0){let a=t.getBoundingClientRect();o=o||a.width,r=r||a.height}this.$v(o,r),this.Hv(),t.appendChild(this.cv),this.Uv(),this.Hi.yt().yu().l(this.Hi.dl.bind(this.Hi),this),this.Hi.Po().l(this.Hi.dl.bind(this.Hi),this)}Ut(){return this.Hi}F(){return this.un}qv(){return this.Pv}Yv(){return this.Wv}M(){this.Nv(!1),this.Rv!==0&&window.cancelAnimationFrame(this.Rv),this.Hi.fc().v(this),this.Hi.yt().yu().v(this),this.Hi.Po().v(this),this.Hi.M();for(let t of this.Pv)this.Ev.removeChild(t.Yf()),t.jp().v(this),t.M();this.Pv=[],g(this.Wv).M(),this.cv.parentElement!==null&&this.cv.parentElement.removeChild(this.cv),this.Xu.M(),this.pp.M(),this.Xv()}$v(t,e,i=!1){if(this.fa===e&&this.vo===t)return;let n=function(a){let l=Math.floor(a.width),h=Math.floor(a.height);return k({width:l-l%2,height:h-h%2})}(k({width:t,height:e}));this.fa=n.height,this.vo=n.width;let o=this.fa+"px",r=this.vo+"px";g(this.cv).style.height=o,g(this.cv).style.width=r,this.Ev.style.height=o,this.Ev.style.width=r,i?this.Zv(j.ss(),performance.now()):this.Hi.dl()}ip(t){t===void 0&&(t=j.ss());for(let e=0;e<this.Pv.length;e++)this.Pv[e].ip(t.jn(e).Nn);this.un.timeScale.visible&&this.Wv.ip(t.Wn())}kh(t){let e=Yn(this.un);this.Hi.kh(t);let i=Yn(this.un);i!==e&&this.Nv(i),this.Uv(),this.Kv(t)}jp(){return this.pp}fc(){return this.Xu}Gv(){this.Av!==null&&(this.Zv(this.Av,performance.now()),this.Av=null);let t=this.Jv(null),e=document.createElement("canvas");e.width=t.width,e.height=t.height;let i=g(e.getContext("2d"));return this.Jv(i),e}Qv(t){return t==="left"&&!this.tm()||t==="right"&&!this.im()||this.Pv.length===0?0:g(t==="left"?this.Pv[0].Jp():this.Pv[0].Qp()).Qf()}nm(){return this.un.autoSize&&this.Lv!==null}Kv(t){(t.autoSize!==void 0||!this.Lv||t.width===void 0&&t.height===void 0)&&(t.autoSize&&!this.Lv&&this.jv(),t.autoSize===!1&&this.Lv!==null&&this.Xv(),t.autoSize||t.width===void 0&&t.height===void 0||this.$v(t.width||this.vo,t.height||this.fa))}Jv(t){let e=0,i=0,n=this.Pv[0],o=(a,l)=>{let h=0;for(let c=0;c<this.Pv.length;c++){let d=this.Pv[c],u=g(a==="left"?d.Jp():d.Qp()),m=u.lp();t!==null&&u.ap(t,l,h),h+=m.height}};this.tm()&&(o("left",0),e+=g(n.Jp()).lp().width);for(let a=0;a<this.Pv.length;a++){let l=this.Pv[a],h=l.lp();t!==null&&l.ap(t,e,i),i+=h.height}e+=n.lp().width,this.im()&&(o("right",e),e+=g(n.Qp()).lp().width);let r=(a,l,h)=>{g(a==="left"?this.Wv.mv():this.Wv.bv()).ap(g(t),l,h)};if(this.un.timeScale.visible){let a=this.Wv.lp();if(t!==null){let l=0;this.tm()&&(r("left",l,i),l=g(n.Jp()).lp().width),this.Wv.ap(t,l,i),l+=a.width,this.im()&&r("right",l,i)}i+=a.height}return k({width:e,height:i})}sm(){let t=0,e=0,i=0;for(let f of this.Pv)this.tm()&&(e=Math.max(e,g(f.Jp()).Zf())),this.im()&&(i=Math.max(i,g(f.Qp()).Zf())),t+=f.Ro();e=Ws(e),i=Ws(i);let n=this.vo,o=this.fa,r=Math.max(n-e-i,0),a=this.un.timeScale.visible,l=a?this.Wv.Mv():0;var h;l=(h=l)+h%2;let c=0+l,d=o<c?0:o-c,u=d/t,m=0;for(let f=0;f<this.Pv.length;++f){let p=this.Pv[f];p.Dp(this.Hi.uc()[f]);let y=0,C=0;C=f===this.Pv.length-1?d-m:Math.round(p.Ro()*u),y=Math.max(C,2),m+=y,p.Jf(k({width:r,height:y})),this.tm()&&p.Up(e,"left"),this.im()&&p.Up(i,"right"),p.tp()&&this.Hi.vc(p.tp(),y)}this.Wv.wv(k({width:a?r:0,height:l}),a?e:0,a?i:0),this.Hi.Bo(r),this.Dv!==e&&(this.Dv=e),this.Bv!==i&&(this.Bv=i)}Nv(t){t?this.cv.addEventListener("wheel",this.zv,{passive:!1}):this.cv.removeEventListener("wheel",this.zv)}rm(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return dh?1/window.devicePixelRatio:1}Vv(t){if(!(t.deltaX!==0&&this.un.handleScroll.mouseWheel||t.deltaY!==0&&this.un.handleScale.mouseWheel))return;let e=this.rm(t),i=e*t.deltaX/100,n=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),n!==0&&this.un.handleScale.mouseWheel){let o=Math.sign(n)*Math.min(1,Math.abs(n)),r=t.clientX-this.cv.getBoundingClientRect().left;this.Ut().gc(r,o)}i!==0&&this.un.handleScroll.mouseWheel&&this.Ut().wc(-80*i)}Zv(t,e){var i;let n=t.Wn();n===3&&this.hm(),n!==3&&n!==2||(this.lm(t),this.am(t,e),this.Wv.gt(),this.Pv.forEach(o=>{o.Ap()}),((i=this.Av)===null||i===void 0?void 0:i.Wn())===3&&(this.Av.Qn(t),this.hm(),this.lm(this.Av),this.am(this.Av,e),t=this.Av,this.Av=null)),this.ip(t)}am(t,e){for(let i of t.Jn())this.ts(i,e)}lm(t){let e=this.Hi.uc();for(let i=0;i<e.length;i++)t.jn(i).Fn&&e[i].Yo()}ts(t,e){let i=this.Hi.yt();switch(t.Un){case 0:i.Cu();break;case 1:i.Tu(t.At);break;case 2:i.Kn(t.At);break;case 3:i.Gn(t.At);break;case 4:i.du();break;case 5:t.At.wu(e)||i.Gn(t.At.Mu(e))}}Ku(t){this.Av!==null?this.Av.Qn(t):this.Av=t,this.Ov||(this.Ov=!0,this.Rv=window.requestAnimationFrame(e=>{if(this.Ov=!1,this.Rv=0,this.Av!==null){let i=this.Av;this.Av=null,this.Zv(i,e);for(let n of i.Jn())if(n.Un===5&&!n.At.wu(e)){this.Ut().Yn(n.At);break}}}))}hm(){this.Hv()}Hv(){let t=this.Hi.uc(),e=t.length,i=this.Pv.length;for(let n=e;n<i;n++){let o=et(this.Pv.pop());this.Ev.removeChild(o.Yf()),o.jp().v(this),o.M()}for(let n=i;n<e;n++){let o=new Xs(this,t[n]);o.jp().l(this.om.bind(this),this),this.Pv.push(o),this.Ev.insertBefore(o.Yf(),this.Wv.Yf())}for(let n=0;n<e;n++){let o=t[n],r=this.Pv[n];r.tp()!==o?r.Dp(o):r.Rp()}this.Uv(),this.sm()}_m(t,e,i){var n;let o=new Map;t!==null&&this.Hi.wt().forEach(c=>{let d=c.Ln().jh(t);d!==null&&o.set(c,d)});let r;if(t!==null){let c=(n=this.Hi.yt().Ui(t))===null||n===void 0?void 0:n.M_;c!==void 0&&(r=c)}let a=this.Ut().hc(),l=a!==null&&a.ac instanceof Ue?a.ac:void 0,h=a!==null&&a.Ep!==void 0?a.Ep.nr:void 0;return{_t:r,Ys:t??void 0,um:e??void 0,dm:l,fm:o,pm:h,vm:i??void 0}}om(t,e,i){this.pp.m(()=>this._m(t,e,i))}Fv(t,e,i){this.Xu.m(()=>this._m(t,e,i))}Uv(){let t=this.un.timeScale.visible?"":"none";this.Wv.Yf().style.display=t}tm(){return this.Pv[0].tp().zo().F().visible}im(){return this.Pv[0].tp().Vo().F().visible}jv(){return"ResizeObserver"in window&&(this.Lv=new ResizeObserver(t=>{let e=t.find(i=>i.target===this.Iv);e&&this.$v(e.contentRect.width,e.contentRect.height)}),this.Lv.observe(this.Iv,{box:"border-box"}),!0)}Xv(){this.Lv!==null&&this.Lv.disconnect()}};function Yn(s){return!!(s.handleScroll.mouseWheel||s.handleScale.mouseWheel)}function ga(s,t,e,i){let n=e.value,o={Ys:t,_t:s,At:[n,n,n,n],M_:i};return e.color!==void 0&&(o.D=e.color),o}function Pi(s){return s.At!==void 0}function fe(s){return(t,e,i,n)=>{return(o=i).open===void 0&&o.value===void 0?{_t:t,Ys:e,M_:n}:s(t,e,i,n);var o}}var uh={Candlestick:fe(function(s,t,e,i){let n={Ys:t,_t:s,At:[e.open,e.high,e.low,e.close],M_:i};return e.color!==void 0&&(n.D=e.color),e.borderColor!==void 0&&(n.Ot=e.borderColor),e.wickColor!==void 0&&(n.Dh=e.wickColor),n}),Bar:fe(function(s,t,e,i){let n={Ys:t,_t:s,At:[e.open,e.high,e.low,e.close],M_:i};return e.color!==void 0&&(n.D=e.color),n}),Area:fe(function(s,t,e,i){let n=e.value,o={Ys:t,_t:s,At:[n,n,n,n],M_:i};return e.lineColor!==void 0&&(o.ot=e.lineColor),e.topColor!==void 0&&(o.bs=e.topColor),e.bottomColor!==void 0&&(o.gs=e.bottomColor),o}),Baseline:fe(function(s,t,e,i){let n=e.value,o={Ys:t,_t:s,At:[n,n,n,n],M_:i};return e.topLineColor!==void 0&&(o.be=e.topLineColor),e.bottomLineColor!==void 0&&(o.ge=e.bottomLineColor),e.topFillColor1!==void 0&&(o.de=e.topFillColor1),e.topFillColor2!==void 0&&(o.fe=e.topFillColor2),e.bottomFillColor1!==void 0&&(o.pe=e.bottomFillColor1),e.bottomFillColor2!==void 0&&(o.ve=e.bottomFillColor2),o}),Histogram:fe(ga),Line:fe(ga)};function ba(s){return uh[s]}function Ri(s){return 60*s*60*1e3}function jn(s){return 60*s*1e3}var Ii=[{bm:(_a=1,1e3*_a),w_:10},{bm:jn(1),w_:20},{bm:jn(5),w_:21},{bm:jn(30),w_:22},{bm:Ri(1),w_:30},{bm:Ri(3),w_:31},{bm:Ri(6),w_:32},{bm:Ri(12),w_:33}],_a;function va(s,t){if(s.getUTCFullYear()!==t.getUTCFullYear())return 70;if(s.getUTCMonth()!==t.getUTCMonth())return 60;if(s.getUTCDate()!==t.getUTCDate())return 50;for(let e=Ii.length-1;e>=0;--e)if(Math.floor(t.getTime()/Ii[e].bm)!==Math.floor(s.getTime()/Ii[e].bm))return Ii[e].w_;return 0}function ya(s,t=0){if(s.length===0)return;let e=t===0?null:s[t-1]._t.u_,i=e!==null?new Date(1e3*e):null,n=0;for(let o=t;o<s.length;++o){let r=s[o],a=new Date(1e3*r._t.u_);i!==null&&(r.g_=va(a,i)),n+=r._t.u_-(e||r._t.u_),e=r._t.u_,i=a}if(t===0&&s.length>1){let o=Math.ceil(n/(s.length-1)),r=new Date(1e3*(s[0]._t.u_-o));s[0].g_=va(new Date(1e3*s[0]._t.u_),r)}}function Qs(s){if(!oo(s))throw new Error("time must be of type BusinessDay");let t=new Date(Date.UTC(s.year,s.month-1,s.day,0,0,0,0));return{u_:Math.round(t.getTime()/1e3),__:s}}function Wa(s){if(!ja(s))throw new Error("time must be of type isUTCTimestamp");return{u_:s}}function Ca(s){return s.length===0?null:oo(s[0].time)?Qs:Wa}function Oi(s){return ja(s)?Wa(s):oo(s)?Qs(s):Qs(Ua(s))}function Ua(s){let t=new Date(s);if(isNaN(t.getTime()))throw new Error(`Invalid date string=${s}, expected format=yyyy-mm-dd`);return{day:t.getUTCDate(),month:t.getUTCMonth()+1,year:t.getUTCFullYear()}}function wa(s){no(s.time)&&(s.time=Ua(s.time))}function Ma(s){return{Ys:0,gm:new Map,yl:s}}function xa(s){if(s!==void 0&&s.length!==0)return{wm:s[0]._t.u_,Mm:s[s.length-1]._t.u_}}function Sa(s){let t;return s.forEach(e=>{t===void 0&&(t=e.M_)}),et(t)}function ka(s){s.M_===void 0&&(s.M_=s.time)}var Ks=class{constructor(){this.Sm=new Map,this.xm=new Map,this.ym=new Map,this.km=[]}M(){this.Sm.clear(),this.xm.clear(),this.ym.clear(),this.km=[]}Cm(t,e){let i=this.Sm.size!==0,n=!1,o=this.xm.get(t);if(o!==void 0)if(this.xm.size===1)i=!1,n=!0,this.Sm.clear();else for(let l of this.km)l.pointData.gm.delete(t)&&(n=!0);let r=[];if(e.length!==0){let l=e;l.forEach(d=>ka(d)),function(d){d.forEach(wa)}(e);let h=g(Ca(e)),c=ba(t.Lh());r=l.map(d=>{let u=h(d.time),m=this.Sm.get(u.u_);m===void 0&&(m=Ma(u),this.Sm.set(u.u_,m),n=!0);let f=c(u,m.Ys,d,d.M_);return m.gm.set(t,f),f})}i&&this.Tm(),this.Pm(t,r);let a=-1;if(n){let l=[];this.Sm.forEach(h=>{l.push({g_:0,_t:h.yl,pointData:h,M_:Sa(h.gm)})}),l.sort((h,c)=>h._t.u_-c._t.u_),a=this.Rm(l)}return this.Dm(t,a,function(l,h){let c=xa(l),d=xa(h);if(c!==void 0&&d!==void 0)return{ml:c.Mm>=d.Mm&&c.wm>=d.wm}}(this.xm.get(t),o))}Ac(t){return this.Cm(t,[])}Bm(t,e){let i=e;ka(i),wa(e);let n=g(Ca([e]))(e.time),o=this.ym.get(t);if(o!==void 0&&n.u_<o.u_)throw new Error(`Cannot update oldest data, last time=${o.u_}, new time=${n.u_}`);let r=this.Sm.get(n.u_),a=r===void 0;r===void 0&&(r=Ma(n),this.Sm.set(n.u_,r));let l=ba(t.Lh())(n,r.Ys,e,i.M_);r.gm.set(t,l),this.Am(t,l);let h={ml:Pi(l)};if(!a)return this.Dm(t,-1,h);let c={g_:0,_t:r.yl,pointData:r,M_:Sa(r.gm)},d=Ge(this.km,c._t.u_,(u,m)=>u._t.u_<m);this.km.splice(d,0,c);for(let u=d;u<this.km.length;++u)Wn(this.km[u].pointData,u);return ya(this.km,d),this.Dm(t,d,h)}Am(t,e){let i=this.xm.get(t);i===void 0&&(i=[],this.xm.set(t,i));let n=i.length!==0?i[i.length-1]:null;n===null||e._t.u_>n._t.u_?Pi(e)&&i.push(e):Pi(e)?i[i.length-1]=e:i.splice(-1,1),this.ym.set(t,e._t)}Pm(t,e){e.length!==0?(this.xm.set(t,e.filter(Pi)),this.ym.set(t,e[e.length-1]._t)):(this.xm.delete(t),this.ym.delete(t))}Tm(){for(let t of this.km)t.pointData.gm.size===0&&this.Sm.delete(t._t.u_)}Rm(t){let e=-1;for(let i=0;i<this.km.length&&i<t.length;++i){let n=this.km[i],o=t[i];if(n._t.u_!==o._t.u_){e=i;break}o.g_=n.g_,Wn(o.pointData,i)}if(e===-1&&this.km.length!==t.length&&(e=Math.min(this.km.length,t.length)),e===-1)return-1;for(let i=e;i<t.length;++i)Wn(t[i].pointData,i);return ya(t,e),this.km=t,e}Om(){if(this.xm.size===0)return null;let t=0;return this.xm.forEach(e=>{e.length!==0&&(t=Math.max(t,e[e.length-1].Ys))}),t}Dm(t,e,i){let n={Lm:new Map,yt:{eu:this.Om()}};if(e!==-1)this.xm.forEach((o,r)=>{n.Lm.set(r,{ar:o,Im:r===t?i:void 0})}),this.xm.has(t)||n.Lm.set(t,{ar:[],Im:i}),n.yt.Em=this.km,n.yt.zm=e;else{let o=this.xm.get(t);n.Lm.set(t,{ar:o||[],Im:i})}return n}};function Wn(s,t){s.Ys=t,s.gm.forEach(e=>{e.Ys=t})}function qs(s){return{value:s.At[3],time:s.M_}}function Ta(s){let t=qs(s);return s.D!==void 0&&(t.color=s.D),t}function Ea(s){return{open:s.At[0],high:s.At[1],low:s.At[2],close:s.At[3],time:s.M_}}var mh={Area:function(s){let t=qs(s);return s.ot!==void 0&&(t.lineColor=s.ot),s.bs!==void 0&&(t.topColor=s.bs),s.gs!==void 0&&(t.bottomColor=s.gs),t},Line:Ta,Baseline:function(s){let t=qs(s);return s.be!==void 0&&(t.topLineColor=s.be),s.ge!==void 0&&(t.bottomLineColor=s.ge),s.de!==void 0&&(t.topFillColor1=s.de),s.fe!==void 0&&(t.topFillColor2=s.fe),s.pe!==void 0&&(t.bottomFillColor1=s.pe),s.ve!==void 0&&(t.bottomFillColor2=s.ve),t},Histogram:Ta,Bar:function(s){let t=Ea(s);return s.D!==void 0&&(t.color=s.D),t},Candlestick:function(s){let t=Ea(s),{D:e,Ot:i,Dh:n}=s;return e!==void 0&&(t.color=e),i!==void 0&&(t.borderColor=i),n!==void 0&&(t.wickColor=n),t}};function Xa(s){return mh[s]}var Un={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2}},fh={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:so,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"},Da={width:0,height:0,autoSize:!1,layout:{background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:so},crosshair:{vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},grid:{vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},overlayPriceScales:Object.assign({},Un),leftPriceScale:Object.assign(Object.assign({},Un),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},Un),{visible:!0}),timeScale:{rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,ticksVisible:!1},watermark:fh,localization:{locale:ye?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}},ph={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},gh={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},bh={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},_h={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},vh={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},yh={color:"#26a69a",base:0},Ch={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}},Zs=class{constructor(t,e){this.Vm=t,this.Nm=e}applyOptions(t){this.Vm.Ut().oc(this.Nm,t)}options(){return this.zi().F()}width(){return Ji(this.Nm)?this.Vm.Qv(this.Nm):0}zi(){return g(this.Vm.Ut()._c(this.Nm)).Bt}},wh={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""},Js=class{constructor(t){this.wh=t}applyOptions(t){this.wh.kh(t)}options(){return this.wh.F()}Fm(){return this.wh}},to=class{constructor(t,e,i){this.Ts=t,this.Wm=e,this.jm=i}priceFormatter(){return this.Ts.Bl()}priceToCoordinate(t){let e=this.Ts.Tt();return e===null?null:this.Ts.Bt().Dt(t,e.At)}coordinateToPrice(t){let e=this.Ts.Tt();return e===null?null:this.Ts.Bt().pn(t,e.At)}barsInLogicalRange(t){if(t===null)return null;let e=new ge(new Zt(t.from,t.to)).C_(),i=this.Ts.Ln();if(i.Ni())return null;let n=i.jh(e.Ms(),1),o=i.jh(e.ci(),-1),r=g(i.Nh()),a=g(i.On());if(n!==null&&o!==null&&n.Ys>o.Ys)return{barsBefore:t.from-r,barsAfter:a-t.to};let l={barsBefore:n===null||n.Ys===r?t.from-r:n.Ys-r,barsAfter:o===null||o.Ys===a?a-t.to:a-o.Ys};return n!==null&&o!==null&&(l.from=n._t.__||n._t.u_,l.to=o._t.__||o._t.u_),l}setData(t){this.Ts.Lh(),this.Wm.$m(this.Ts,t)}update(t){this.Ts.Lh(),this.Wm.Hm(this.Ts,t)}dataByIndex(t,e){let i=this.Ts.Ln().jh(t,e);return i===null?null:Xa(this.seriesType())(i)}setMarkers(t){let e=t.map(i=>Object.assign(Object.assign({},i),{originalTime:i.time,time:Oi(i.time)}));this.Ts.gl(e)}markers(){return this.Ts.wl().map(t=>{let{originalTime:e,time:i}=t,n=function(o,r){var a={};for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&r.indexOf(l)<0&&(a[l]=o[l]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(l=Object.getOwnPropertySymbols(o);h<l.length;h++)r.indexOf(l[h])<0&&Object.prototype.propertyIsEnumerable.call(o,l[h])&&(a[l[h]]=o[l[h]])}return a}(t,["originalTime","time"]);return Object.assign({time:e},n)})}applyOptions(t){this.Ts.kh(t)}options(){return xt(this.Ts.F())}priceScale(){return this.jm.priceScale(this.Ts.Bt().zl())}createPriceLine(t){let e=ft(xt(wh),t),i=this.Ts.Ml(e);return new Js(i)}removePriceLine(t){this.Ts.Sl(t.Fm())}seriesType(){return this.Ts.Lh()}},eo=class{constructor(t,e){this.Um=new B,this.E_=new B,this.uv=new B,this.Hi=t,this.wo=t.yt(),this.Wv=e,this.wo.Su().l(this.qm.bind(this)),this.wo.xu().l(this.Ym.bind(this)),this.Wv.gv().l(this.Xm.bind(this))}M(){this.wo.Su().v(this),this.wo.xu().v(this),this.Wv.gv().v(this),this.Um.M(),this.E_.M(),this.uv.M()}scrollPosition(){return this.wo.ou()}scrollToPosition(t,e){e?this.wo.gu(t,1e3):this.Hi.Gn(t)}scrollToRealTime(){this.wo.bu()}getVisibleRange(){var t,e;let i=this.wo.G_();return i===null?null:{from:(t=i.from.__)!==null&&t!==void 0?t:i.from.u_,to:(e=i.to.__)!==null&&e!==void 0?e:i.to.u_}}setVisibleRange(t){let e={from:Oi(t.from),to:Oi(t.to)},i=this.wo.iu(e);this.Hi.Oc(i)}getVisibleLogicalRange(){let t=this.wo.K_();return t===null?null:{from:t.Ms(),to:t.ci()}}setVisibleLogicalRange(t){ne(t.from<=t.to,"The from index cannot be after the to index."),this.Hi.Oc(t)}resetTimeScale(){this.Hi.Zn()}fitContent(){this.Hi.Cu()}logicalToCoordinate(t){let e=this.Hi.yt();return e.Ni()?null:e.Et(t)}coordinateToLogical(t){return this.wo.Ni()?null:this.wo.ru(t)}timeToCoordinate(t){let e=Oi(t),i=this.wo.Fl(e,!1);return i===null?null:this.wo.Et(i)}coordinateToTime(t){var e;let i=this.Hi.yt(),n=i.ru(t),o=i.vn(n);return o===null?null:(e=o.__)!==null&&e!==void 0?e:o.u_}width(){return this.Wv.qp().width}height(){return this.Wv.qp().height}subscribeVisibleTimeRangeChange(t){this.Um.l(t)}unsubscribeVisibleTimeRangeChange(t){this.Um.p(t)}subscribeVisibleLogicalRangeChange(t){this.E_.l(t)}unsubscribeVisibleLogicalRangeChange(t){this.E_.p(t)}subscribeSizeChange(t){this.uv.l(t)}unsubscribeSizeChange(t){this.uv.p(t)}applyOptions(t){this.wo.kh(t)}options(){return xt(this.wo.F())}qm(){this.Um.g()&&this.Um.m(this.getVisibleRange())}Ym(){this.E_.g()&&this.E_.m(this.getVisibleLogicalRange())}Xm(t){this.uv.m(t.width,t.height)}};function Mh(s){if(s===void 0||s.type==="custom")return;let t=s;t.minMove!==void 0&&t.precision===void 0&&(t.precision=function(e){if(e>=1)return 0;let i=0;for(;i<8;i++){let n=Math.round(e);if(Math.abs(n-e)<1e-8)return i;e*=10}return i}(t.minMove))}function Pa(s){return function(t){if(xi(t.handleScale)){let i=t.handleScale;t.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(t.handleScale!==void 0){let{axisPressedMouseMove:i,axisDoubleClickReset:n}=t.handleScale;xi(i)&&(t.handleScale.axisPressedMouseMove={time:i,price:i}),xi(n)&&(t.handleScale.axisDoubleClickReset={time:n,price:n})}let e=t.handleScroll;xi(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})}(s),s}var io=class{constructor(t,e){this.Zm=new Ks,this.Km=new Map,this.Gm=new Map,this.Jm=new B,this.Qm=new B;let i=e===void 0?xt(Da):ft(xt(Da),Pa(e));this.Vm=new $s(t,i),this.Vm.jp().l(o=>{this.Jm.g()&&this.Jm.m(this.tb(o()))},this),this.Vm.fc().l(o=>{this.Qm.g()&&this.Qm.m(this.tb(o()))},this);let n=this.Vm.Ut();this.ib=new eo(n,this.Vm.Yv())}remove(){this.Vm.jp().v(this),this.Vm.fc().v(this),this.ib.M(),this.Vm.M(),this.Km.clear(),this.Gm.clear(),this.Jm.M(),this.Qm.M(),this.Zm.M()}resize(t,e,i){this.autoSizeActive()||this.Vm.$v(t,e,i)}addAreaSeries(t){return this.nb("Area",_h,t)}addBaselineSeries(t){return this.nb("Baseline",vh,t)}addBarSeries(t){return this.nb("Bar",gh,t)}addCandlestickSeries(t={}){return function(e){e.borderColor!==void 0&&(e.borderUpColor=e.borderColor,e.borderDownColor=e.borderColor),e.wickColor!==void 0&&(e.wickUpColor=e.wickColor,e.wickDownColor=e.wickColor)}(t),this.nb("Candlestick",ph,t)}addHistogramSeries(t){return this.nb("Histogram",yh,t)}addLineSeries(t){return this.nb("Line",bh,t)}removeSeries(t){let e=et(this.Km.get(t)),i=this.Zm.Ac(e);this.Vm.Ut().Ac(e),this.sb(i),this.Km.delete(t),this.Gm.delete(e)}$m(t,e){this.sb(this.Zm.Cm(t,e))}Hm(t,e){this.sb(this.Zm.Bm(t,e))}subscribeClick(t){this.Jm.l(t)}unsubscribeClick(t){this.Jm.p(t)}subscribeCrosshairMove(t){this.Qm.l(t)}unsubscribeCrosshairMove(t){this.Qm.p(t)}priceScale(t){return new Zs(this.Vm,t)}timeScale(){return this.ib}applyOptions(t){this.Vm.kh(Pa(t))}options(){return this.Vm.F()}takeScreenshot(){return this.Vm.Gv()}autoSizeActive(){return this.Vm.nm()}nb(t,e,i={}){Mh(i.priceFormat);let n=ft(xt(Ch),xt(e),i),o=this.Vm.Ut().Dc(t,n),r=new to(o,this,this);return this.Km.set(r,o),this.Gm.set(o,r),r}sb(t){let e=this.Vm.Ut();e.Pc(t.yt.eu,t.yt.Em,t.yt.zm),t.Lm.forEach((i,n)=>n.tt(i.ar,i.Im)),e.lu()}eb(t){return et(this.Gm.get(t))}tb(t){let e=new Map;t.fm.forEach((n,o)=>{let r=Xa(o.Lh())(n);ne(function(a){return a.open!==void 0||a.value!==void 0}(r)),e.set(this.eb(o),r)});let i=t.dm===void 0?void 0:this.eb(t.dm);return{time:t._t,logical:t.Ys,point:t.um,hoveredSeries:i,hoveredObjectId:t.pm,seriesData:e,sourceEvent:t.vm}}};function Ga(s,t){let e;if(no(s)){let i=document.getElementById(s);ne(i!==null,`Cannot find element in DOM with id=${s}`),e=i}else e=s;return new io(e,t)}var tn=class s{constructor(t,e){this.apiService=t;this.indicatorService=e}getHistory(t,e){return this.apiService.getKlineData(t,e,400).pipe(it(i=>i.map(n=>({time:n.openTime/1e3,open:parseFloat(n.open),high:parseFloat(n.high),low:parseFloat(n.low),close:parseFloat(n.close)}))))}getEma(t,e,i){return this.indicatorService.calculateIndicators(t,e).pipe(it(n=>{if(!n)return[];let o=[];i===20&&(o=n.ema20),i===50&&(o=n.ema50),i===200&&(o=n.ema200);let r=[],a=n.closes.map((l,h)=>this.getKlineOpenTime(n,h)/1e3);return o.forEach((l,h)=>{l!==null&&r.push({time:a[h],value:l})}),r}))}getBollingerBands(t,e){return this.indicatorService.calculateIndicators(t,e).pipe(it(i=>{let n={upper:[],middle:[],lower:[]};if(!i)return n;let o=i.closes.map((h,c)=>this.getKlineOpenTime(i,c)/1e3),{upper:r,middle:a,lower:l}=i.bollingerBands;return r.forEach((h,c)=>h!==null&&n.upper.push({time:o[c],value:h})),a.forEach((h,c)=>h!==null&&n.middle.push({time:o[c],value:h})),l.forEach((h,c)=>h!==null&&n.lower.push({time:o[c],value:h})),n}))}getMacd(t,e){return this.indicatorService.calculateIndicators(t,e).pipe(it(i=>{let n={macdLine:[],signalLine:[],hist:[]};if(!i)return n;let o=i.closes.map((h,c)=>this.getKlineOpenTime(i,c)/1e3),{macdLine:r,signalLine:a,histogram:l}=i.macd;return r.forEach((h,c)=>h!==null&&n.macdLine.push({time:o[c],value:h})),a.forEach((h,c)=>h!==null&&n.signalLine.push({time:o[c],value:h})),l.forEach((h,c)=>{h!==null&&n.hist.push({time:o[c],value:h,color:h>=0?"rgba(38, 166, 154, 0.5)":"rgba(239, 83, 80, 0.5)"})}),n}))}getRsi(t,e){return this.indicatorService.calculateIndicators(t,e).pipe(it(i=>{let n=[];if(!i)return n;let o=i.closes.map((r,a)=>this.getKlineOpenTime(i,a)/1e3);return i.rsi.forEach((r,a)=>r!==null&&n.push({time:o[a],value:r})),n}))}getKlineOpenTime(t,e){return Date.now()-(t.closes.length-e)*3600*1e3}static \u0275fac=function(e){return new(e||s)(cn(ci),cn(di))};static \u0275prov=lt({token:s,factory:s.\u0275fac,providedIn:"root"})};var Th=["chartContainer"],en=class s{constructor(t,e){this.chartDataService=t;this.uiStateService=e}symbol;timeframe;chartContainer;chart;candlestickSeries;themeSubscription;visibleIndicators=new Map;rsiPane=null;macdPane=null;ngOnChanges(t){this.chart&&t.timeframe&&t.timeframe.currentValue!==t.timeframe.previousValue&&this.loadChartData()}ngAfterViewInit(){this.initializeChart(),this.loadChartData(),this.themeSubscription=this.uiStateService.isDarkMode$.subscribe(t=>{this.chart&&this.applyTheme(t)})}toggleIndicator(t){console.log("toggled"),this.visibleIndicators.has(t)?this.removeIndicator(t):this.addIndicator(t)}addIndicator(t){switch(t){case"EMA":this.addEma();break;case"BB":this.addBollingerBands();break;case"MACD":this.addMacd();break;case"RSI":this.addRsi();break}}addEma(){this.chartDataService.getEma(this.symbol,this.timeframe,20).subscribe(t=>{let e=this.createLineSeries("#42A5F5",2);e.setData(t),this.addSeriesToMap("EMA",e)}),this.chartDataService.getEma(this.symbol,this.timeframe,50).subscribe(t=>{let e=this.createLineSeries("#FFCA28",2);e.setData(t),this.addSeriesToMap("EMA",e)})}addBollingerBands(){this.chartDataService.getBollingerBands(this.symbol,this.timeframe).subscribe(t=>{let e=this.createLineSeries("rgba(150, 150, 150, 0.7)",1,"right",kt.Dotted),i=this.createLineSeries("rgba(255, 100, 100, 0.7)",1,"right",kt.Dashed),n=this.createLineSeries("rgba(150, 150, 150, 0.7)",1,"right",kt.Dotted);e.setData(t.upper),i.setData(t.middle),n.setData(t.lower),this.addSeriesToMap("BB",e),this.addSeriesToMap("BB",i),this.addSeriesToMap("BB",n)})}addMacd(){this.chartDataService.getMacd(this.symbol,this.timeframe).subscribe(t=>{let e=this.chart.addHistogramSeries({priceScaleId:"macd",lastValueVisible:!1});e.setData(t.hist),this.addSeriesToMap("MACD",e);let i=this.createLineSeries("#2962FF",2,"macd"),n=this.createLineSeries("#FF6D00",2,"macd");i.setData(t.macdLine),n.setData(t.signalLine),this.addSeriesToMap("MACD",i),this.addSeriesToMap("MACD",n)})}addRsi(){this.chartDataService.getRsi(this.symbol,this.timeframe).subscribe(t=>{let e={priceScaleId:"rsi",lineColor:"rgba(255, 217, 102, 1)",topColor:"rgba(255, 217, 102, 0.2)",bottomColor:"rgba(255, 217, 102, 0)",lineWidth:2,lastValueVisible:!0,priceLineVisible:!1},i=this.chart.addAreaSeries(e);i.setData(t),this.addSeriesToMap("RSI",i);let n={price:70,color:"#EF5350",lineWidth:1,lineStyle:kt.Dashed,axisLabelVisible:!0,title:"70"},o={price:30,color:"#26A69A",lineWidth:1,lineStyle:kt.Dashed,axisLabelVisible:!0,title:"30"};i.createPriceLine(n),i.createPriceLine(o)})}removeIndicator(t){let e=this.visibleIndicators.get(t);e&&(e.forEach(i=>this.chart.removeSeries(i)),this.visibleIndicators.delete(t))}createLineSeries(t,e,i="right",n=kt.Solid){return this.chart.addLineSeries({color:t,lineWidth:2,priceScaleId:i,lineStyle:n,lastValueVisible:!1,priceLineVisible:!1,crosshairMarkerVisible:!1})}addSeriesToMap(t,e){this.visibleIndicators.has(t)||this.visibleIndicators.set(t,[]),this.visibleIndicators.get(t)?.push(e)}loadChartData(){this.chart&&(this.removeAllIndicators(),this.chartDataService.getHistory(this.symbol,this.timeframe).subscribe(t=>{this.candlestickSeries.setData(t),this.chart.timeScale().fitContent()}))}removeAllIndicators(){this.visibleIndicators.forEach((t,e)=>{t.forEach(i=>this.chart.removeSeries(i))}),this.visibleIndicators.clear()}initializeChart(){this.chart=Ga(this.chartContainer.nativeElement,{width:this.chartContainer.nativeElement.clientWidth,height:600,layout:{background:{color:"transparent"},textColor:"#FFFFFF"},grid:{vertLines:{color:"rgba(255, 255, 255, 0.1)"},horzLines:{color:"rgba(255, 255, 255, 0.1)"}},timeScale:{timeVisible:!0,secondsVisible:!1,borderVisible:!0},rightPriceScale:{borderVisible:!0}}),this.candlestickSeries=this.chart.addCandlestickSeries({priceScaleId:"right"})}applyTheme(t){this.chart.applyOptions({layout:{background:{color:t?"#1E1E1E":"#FFFFFF"},textColor:t?"#FFFFFF":"#000000"},grid:{vertLines:{color:t?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},horzLines:{color:t?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"}}})}ngOnDestroy(){this.themeSubscription&&this.themeSubscription.unsubscribe(),this.chart&&this.chart.remove()}static \u0275fac=function(e){return new(e||s)(Ot(tn),Ot(fr))};static \u0275cmp=Y({type:s,selectors:[["app-interactive-chart"]],viewQuery:function(e,i){if(e&1&&F(Th,5),e&2){let n;E(n=D())&&(i.chartContainer=n.first)}},inputs:{symbol:"symbol",timeframe:"timeframe"},features:[xe],decls:2,vars:0,consts:[["chartContainer",""],[1,"chart-container"]],template:function(e,i){e&1&&Eo(0,"div",1,0)},dependencies:[le],styles:["[_nghost-%COMP%], .chart-container[_ngcontent-%COMP%]{display:block;width:100%;height:500px}"]})};var co=["*"];function Eh(s,t){s&1&&Bt(0)}var Dh=["tabListContainer"],Ph=["tabList"],Rh=["tabListInner"],Ih=["nextPaginator"],Oh=["previousPaginator"],zh=["content"];function Lh(s,t){}var Bh=["tabBodyWrapper"],Ah=["tabHeader"];function Fh(s,t){}function Nh(s,t){if(s&1&&nt(0,Fh,0,0,"ng-template",12),s&2){let e=I().$implicit;P("cdkPortalOutlet",e.templateLabel)}}function Vh(s,t){if(s&1&&S(0),s&2){let e=I().$implicit;Ct(e.textLabel)}}function Hh(s,t){if(s&1){let e=st();_(0,"div",7,2),R("click",function(){let n=M(e),o=n.$implicit,r=n.$index,a=I(),l=yt(1);return x(a._handleClick(o,l,r))})("cdkFocusChange",function(n){let o=M(e).$index,r=I();return x(r._tabFocusChanged(n,o))}),K(2,"span",8)(3,"div",9),_(4,"span",10)(5,"span",11),Se(6,Nh,1,1,null,12)(7,Vh,1,1),v()()()}if(s&2){let e=t.$implicit,i=t.$index,n=yt(1),o=I();re(e.labelClass),q("mdc-tab--active",o.selectedIndex===i),P("id",o._getTabLabelId(e,i))("disabled",e.disabled)("fitInkBarToContent",o.fitInkBarToContent),Q("tabIndex",o._getTabIndex(i))("aria-posinset",i+1)("aria-setsize",o._tabs.length)("aria-controls",o._getTabContentId(i))("aria-selected",o.selectedIndex===i)("aria-label",e.ariaLabel||null)("aria-labelledby",!e.ariaLabel&&e.ariaLabelledby?e.ariaLabelledby:null),w(3),P("matRippleTrigger",n)("matRippleDisabled",e.disabled||o.disableRipple),w(3),ke(e.templateLabel?6:7)}}function Yh(s,t){s&1&&Bt(0)}function jh(s,t){if(s&1){let e=st();_(0,"mat-tab-body",13),R("_onCentered",function(){M(e);let n=I();return x(n._removeTabBodyWrapperHeight())})("_onCentering",function(n){M(e);let o=I();return x(o._setTabBodyWrapperHeight(n))})("_beforeCentering",function(n){M(e);let o=I();return x(o._bodyCentered(n))}),v()}if(s&2){let e=t.$implicit,i=t.$index,n=I();re(e.bodyClass),P("id",n._getTabContentId(i))("content",e.content)("position",e.position)("animationDuration",n.animationDuration)("preserveContent",n.preserveContent),Q("tabindex",n.contentTabIndex!=null&&n.selectedIndex===i?n.contentTabIndex:null)("aria-labelledby",n._getTabLabelId(e,i))("aria-hidden",n.selectedIndex!==i)}}var Wh=new $("MatTabContent"),Uh=(()=>{class s{template=b(bt);constructor(){}static \u0275fac=function(i){return new(i||s)};static \u0275dir=G({type:s,selectors:[["","matTabContent",""]],features:[At([{provide:Wh,useExisting:s}])]})}return s})(),Xh=new $("MatTabLabel"),qa=new $("MAT_TAB"),Gh=(()=>{class s extends pr{_closestTab=b(qa,{optional:!0});static \u0275fac=(()=>{let e;return function(n){return(e||(e=It(s)))(n||s)}})();static \u0275dir=G({type:s,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],features:[At([{provide:Xh,useExisting:s}]),ct]})}return s})(),Za=new $("MAT_TAB_GROUP"),uo=(()=>{class s{_viewContainerRef=b(zt);_closestTabGroup=b(Za,{optional:!0});disabled=!1;get templateLabel(){return this._templateLabel}set templateLabel(e){this._setTemplateLabelInput(e)}_templateLabel;_explicitContent=void 0;_implicitContent;textLabel="";ariaLabel;ariaLabelledby;labelClass;bodyClass;id=null;_contentPortal=null;get content(){return this._contentPortal}_stateChanges=new W;position=null;origin=null;isActive=!1;constructor(){b(Xt).load(oi)}ngOnChanges(e){(e.hasOwnProperty("textLabel")||e.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new wt(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(e){e&&e._closestTab===this&&(this._templateLabel=e)}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=Y({type:s,selectors:[["mat-tab"]],contentQueries:function(i,n,o){if(i&1&&(vt(o,Gh,5),vt(o,Uh,7,bt)),i&2){let r;E(r=D())&&(n.templateLabel=r.first),E(r=D())&&(n._explicitContent=r.first)}},viewQuery:function(i,n){if(i&1&&F(bt,7),i&2){let o;E(o=D())&&(n._implicitContent=o.first)}},hostAttrs:["hidden",""],hostVars:1,hostBindings:function(i,n){i&2&&Q("id",null)},inputs:{disabled:[2,"disabled","disabled",N],textLabel:[0,"label","textLabel"],ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass",id:"id"},exportAs:["matTab"],features:[At([{provide:qa,useExisting:s}]),xe],ngContentSelectors:co,decls:1,vars:0,template:function(i,n){i&1&&(Wt(),Ze(0,Eh,1,0,"ng-template"))},encapsulation:2})}return s})(),ro="mdc-tab-indicator--active",$a="mdc-tab-indicator--no-transition",ao=class{_items;_currentItem;constructor(t){this._items=t}hide(){this._items.forEach(t=>t.deactivateInkBar()),this._currentItem=void 0}alignToElement(t){let e=this._items.find(n=>n.elementRef.nativeElement===t),i=this._currentItem;if(e!==i&&(i?.deactivateInkBar(),e)){let n=i?.elementRef.nativeElement.getBoundingClientRect?.();e.activateInkBar(n),this._currentItem=e}}},$h=(()=>{class s{_elementRef=b(X);_inkBarElement;_inkBarContentElement;_fitToContent=!1;get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(e){this._fitToContent!==e&&(this._fitToContent=e,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(e){let i=this._elementRef.nativeElement;if(!e||!i.getBoundingClientRect||!this._inkBarContentElement){i.classList.add(ro);return}let n=i.getBoundingClientRect(),o=e.width/n.width,r=e.left-n.left;i.classList.add($a),this._inkBarContentElement.style.setProperty("transform",`translateX(${r}px) scaleX(${o})`),i.getBoundingClientRect(),i.classList.remove($a),i.classList.add(ro),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this._elementRef.nativeElement.classList.remove(ro)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){let e=this._elementRef.nativeElement.ownerDocument||document,i=this._inkBarElement=e.createElement("span"),n=this._inkBarContentElement=e.createElement("span");i.className="mdc-tab-indicator",n.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",i.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){this._inkBarElement;let e=this._fitToContent?this._elementRef.nativeElement.querySelector(".mdc-tab__content"):this._elementRef.nativeElement;e.appendChild(this._inkBarElement)}static \u0275fac=function(i){return new(i||s)};static \u0275dir=G({type:s,inputs:{fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",N]}})}return s})();var Ja=(()=>{class s extends $h{elementRef=b(X);disabled=!1;focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}static \u0275fac=(()=>{let e;return function(n){return(e||(e=It(s)))(n||s)}})();static \u0275dir=G({type:s,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(i,n){i&2&&(Q("aria-disabled",!!n.disabled),q("mat-mdc-tab-disabled",n.disabled))},inputs:{disabled:[2,"disabled","disabled",N]},features:[ct]})}return s})(),Qa={passive:!0},Qh=650,Kh=100,qh=(()=>{class s{_elementRef=b(X);_changeDetectorRef=b(Nt);_viewportRuler=b(Vt);_dir=b(Gt,{optional:!0});_ngZone=b(J);_platform=b(Ut);_sharedResizeObserver=b(er);_injector=b(H);_renderer=b(jt);_animationsDisabled=$t();_eventCleanups;_scrollDistance=0;_selectedIndexChanged=!1;_destroyed=new W;_showPaginationControls=!1;_disableScrollAfter=!0;_disableScrollBefore=!0;_tabLabelCount;_scrollDistanceChanged;_keyManager;_currentTextContent;_stopScrolling=new W;disablePagination=!1;get selectedIndex(){return this._selectedIndex}set selectedIndex(e){let i=isNaN(e)?0:e;this._selectedIndex!=i&&(this._selectedIndexChanged=!0,this._selectedIndex=i,this._keyManager&&this._keyManager.updateActiveItem(i))}_selectedIndex=0;selectFocusedIndex=new O;indexFocused=new O;constructor(){this._eventCleanups=this._ngZone.runOutsideAngular(()=>[this._renderer.listen(this._elementRef.nativeElement,"mouseleave",()=>this._stopInterval())])}ngAfterViewInit(){this._eventCleanups.push(this._renderer.listen(this._previousPaginator.nativeElement,"touchstart",()=>this._handlePaginatorPress("before"),Qa),this._renderer.listen(this._nextPaginator.nativeElement,"touchstart",()=>this._handlePaginatorPress("after"),Qa))}ngAfterContentInit(){let e=this._dir?this._dir.change:Me("ltr"),i=this._sharedResizeObserver.observe(this._elementRef.nativeElement).pipe(yo(32),Yt(this._destroyed)),n=this._viewportRuler.change(150).pipe(Yt(this._destroyed)),o=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new si(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(Math.max(this._selectedIndex,0)),_t(o,{injector:this._injector}),Dt(e,n,i,this._items.changes,this._itemsResized()).pipe(Yt(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),o()})}),this._keyManager?.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(r=>{this.indexFocused.emit(r),this._setTabFocus(r)})}_itemsResized(){return typeof ResizeObserver!="function"?_o:this._items.changes.pipe(Pt(this._items),gt(e=>new bo(i=>this._ngZone.runOutsideAngular(()=>{let n=new ResizeObserver(o=>i.next(o));return e.forEach(o=>n.observe(o.elementRef.nativeElement)),()=>{n.disconnect()}}))),wo(1),oe(e=>e.some(i=>i.contentRect.width>0&&i.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._eventCleanups.forEach(e=>e()),this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(e){if(!ni(e))switch(e.keyCode){case 13:case 32:if(this.focusIndex!==this.selectedIndex){let i=this._items.get(this.focusIndex);i&&!i.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(e))}break;default:this._keyManager?.onKeydown(e)}}_onContentChanges(){let e=this._elementRef.nativeElement.textContent;e!==this._currentTextContent&&(this._currentTextContent=e||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(e){!this._isValidIndex(e)||this.focusIndex===e||!this._keyManager||this._keyManager.setActiveItem(e)}_isValidIndex(e){return this._items?!!this._items.toArray()[e]:!0}_setTabFocus(e){if(this._showPaginationControls&&this._scrollToLabel(e),this._items&&this._items.length){this._items.toArray()[e].focus();let i=this._tabListContainer.nativeElement;this._getLayoutDirection()=="ltr"?i.scrollLeft=0:i.scrollLeft=i.scrollWidth-i.offsetWidth}}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;let e=this.scrollDistance,i=this._getLayoutDirection()==="ltr"?-e:e;this._tabList.nativeElement.style.transform=`translateX(${Math.round(i)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(e){this._scrollTo(e)}_scrollHeader(e){let i=this._tabListContainer.nativeElement.offsetWidth,n=(e=="before"?-1:1)*i/3;return this._scrollTo(this._scrollDistance+n)}_handlePaginatorClick(e){this._stopInterval(),this._scrollHeader(e)}_scrollToLabel(e){if(this.disablePagination)return;let i=this._items?this._items.toArray()[e]:null;if(!i)return;let n=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:o,offsetWidth:r}=i.elementRef.nativeElement,a,l;this._getLayoutDirection()=="ltr"?(a=o,l=a+r):(l=this._tabListInner.nativeElement.offsetWidth-o,a=l-r);let h=this.scrollDistance,c=this.scrollDistance+n;a<h?this.scrollDistance-=h-a:l>c&&(this.scrollDistance+=Math.min(l-c,a-h))}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{let e=this._tabListInner.nativeElement.scrollWidth,i=this._elementRef.nativeElement.offsetWidth,n=e-i>=5;n||(this.scrollDistance=0),n!==this._showPaginationControls&&(this._showPaginationControls=n,this._changeDetectorRef.markForCheck())}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=this.scrollDistance==0,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){let e=this._tabListInner.nativeElement.scrollWidth,i=this._tabListContainer.nativeElement.offsetWidth;return e-i||0}_alignInkBarToSelectedTab(){let e=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,i=e?e.elementRef.nativeElement:null;i?this._inkBar.alignToElement(i):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(e,i){i&&i.button!=null&&i.button!==0||(this._stopInterval(),vo(Qh,Kh).pipe(Yt(Dt(this._stopScrolling,this._destroyed))).subscribe(()=>{let{maxScrollDistance:n,distance:o}=this._scrollHeader(e);(o===0||o>=n)&&this._stopInterval()}))}_scrollTo(e){if(this.disablePagination)return{maxScrollDistance:0,distance:0};let i=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(i,e)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:i,distance:this._scrollDistance}}static \u0275fac=function(i){return new(i||s)};static \u0275dir=G({type:s,inputs:{disablePagination:[2,"disablePagination","disablePagination",N],selectedIndex:[2,"selectedIndex","selectedIndex",ei]},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"}})}return s})(),Zh=(()=>{class s extends qh{_items;_tabListContainer;_tabList;_tabListInner;_nextPaginator;_previousPaginator;_inkBar;ariaLabel;ariaLabelledby;disableRipple=!1;ngAfterContentInit(){this._inkBar=new ao(this._items),super.ngAfterContentInit()}_itemSelected(e){e.preventDefault()}static \u0275fac=(()=>{let e;return function(n){return(e||(e=It(s)))(n||s)}})();static \u0275cmp=Y({type:s,selectors:[["mat-tab-header"]],contentQueries:function(i,n,o){if(i&1&&vt(o,Ja,4),i&2){let r;E(r=D())&&(n._items=r)}},viewQuery:function(i,n){if(i&1&&(F(Dh,7),F(Ph,7),F(Rh,7),F(Ih,5),F(Oh,5)),i&2){let o;E(o=D())&&(n._tabListContainer=o.first),E(o=D())&&(n._tabList=o.first),E(o=D())&&(n._tabListInner=o.first),E(o=D())&&(n._nextPaginator=o.first),E(o=D())&&(n._previousPaginator=o.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(i,n){i&2&&q("mat-mdc-tab-header-pagination-controls-enabled",n._showPaginationControls)("mat-mdc-tab-header-rtl",n._getLayoutDirection()=="rtl")},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],disableRipple:[2,"disableRipple","disableRipple",N]},features:[ct],ngContentSelectors:co,decls:13,vars:10,consts:[["previousPaginator",""],["tabListContainer",""],["tabList",""],["tabListInner",""],["nextPaginator",""],["mat-ripple","",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"click","mousedown","touchend","matRippleDisabled"],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],[1,"mat-mdc-tab-labels"],["mat-ripple","",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"mousedown","click","touchend","matRippleDisabled"]],template:function(i,n){if(i&1){let o=st();Wt(),_(0,"div",5,0),R("click",function(){return M(o),x(n._handlePaginatorClick("before"))})("mousedown",function(a){return M(o),x(n._handlePaginatorPress("before",a))})("touchend",function(){return M(o),x(n._stopInterval())}),K(2,"div",6),v(),_(3,"div",7,1),R("keydown",function(a){return M(o),x(n._handleKeydown(a))}),_(5,"div",8,2),R("cdkObserveContent",function(){return M(o),x(n._onContentChanges())}),_(7,"div",9,3),Bt(9),v()()(),_(10,"div",10,4),R("mousedown",function(a){return M(o),x(n._handlePaginatorPress("after",a))})("click",function(){return M(o),x(n._handlePaginatorClick("after"))})("touchend",function(){return M(o),x(n._stopInterval())}),K(12,"div",6),v()}i&2&&(q("mat-mdc-tab-header-pagination-disabled",n._disableScrollBefore),P("matRippleDisabled",n._disableScrollBefore||n.disableRipple),w(3),q("_mat-animation-noopable",n._animationsDisabled),w(2),Q("aria-label",n.ariaLabel||null)("aria-labelledby",n.ariaLabelledby||null),w(5),q("mat-mdc-tab-header-pagination-disabled",n._disableScrollAfter),P("matRippleDisabled",n._disableScrollAfter||n.disableRipple))},dependencies:[Te,Zo],styles:[`.mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mdc-tab-indicator .mdc-tab-indicator__content{transition-duration:var(--mat-tab-animation-duration, 250ms)}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;outline:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-inactive-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px;border-color:var(--mat-tab-pagination-icon-color, var(--mat-sys-on-surface))}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1;border-bottom-style:solid;border-bottom-width:var(--mat-tab-divider-height, 1px);border-bottom-color:var(--mat-tab-divider-color, var(--mat-sys-surface-variant))}.mat-mdc-tab-group-inverted-header .mat-mdc-tab-label-container{border-bottom:none;border-top-style:solid;border-top-width:var(--mat-tab-divider-height, 1px);border-top-color:var(--mat-tab-divider-color, var(--mat-sys-surface-variant))}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.cdk-drop-list .mat-mdc-tab-labels,.mat-mdc-tab-labels.cdk-drop-list{min-height:var(--mat-tab-container-height, 48px)}.mat-mdc-tab::before{margin:5px}@media(forced-colors: active){.mat-mdc-tab[aria-disabled=true]{color:GrayText}}
`],encapsulation:2})}return s})(),Jh=new $("MAT_TABS_CONFIG"),Ka=(()=>{class s extends Mn{_host=b(lo);_centeringSub=U.EMPTY;_leavingSub=U.EMPTY;constructor(){super()}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(Pt(this._host._isCenterPosition())).subscribe(e=>{this._host._content&&e&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}static \u0275fac=function(i){return new(i||s)};static \u0275dir=G({type:s,selectors:[["","matTabBodyHost",""]],features:[ct]})}return s})(),lo=(()=>{class s{_elementRef=b(X);_dir=b(Gt,{optional:!0});_ngZone=b(J);_injector=b(H);_renderer=b(jt);_diAnimationsDisabled=$t();_eventCleanups;_initialized;_fallbackTimer;_positionIndex;_dirChangeSubscription=U.EMPTY;_position;_previousPosition;_onCentering=new O;_beforeCentering=new O;_afterLeavingCenter=new O;_onCentered=new O(!0);_portalHost;_contentElement;_content;animationDuration="500ms";preserveContent=!1;set position(e){this._positionIndex=e,this._computePositionAnimationState()}constructor(){if(this._dir){let e=b(Nt);this._dirChangeSubscription=this._dir.change.subscribe(i=>{this._computePositionAnimationState(i),e.markForCheck()})}}ngOnInit(){this._bindTransitionEvents(),this._position==="center"&&(this._setActiveClass(!0),_t(()=>this._onCentering.emit(this._elementRef.nativeElement.clientHeight),{injector:this._injector})),this._initialized=!0}ngOnDestroy(){clearTimeout(this._fallbackTimer),this._eventCleanups?.forEach(e=>e()),this._dirChangeSubscription.unsubscribe()}_bindTransitionEvents(){this._ngZone.runOutsideAngular(()=>{let e=this._elementRef.nativeElement,i=n=>{n.target===this._contentElement?.nativeElement&&(this._elementRef.nativeElement.classList.remove("mat-tab-body-animating"),n.type==="transitionend"&&this._transitionDone())};this._eventCleanups=[this._renderer.listen(e,"transitionstart",n=>{n.target===this._contentElement?.nativeElement&&(this._elementRef.nativeElement.classList.add("mat-tab-body-animating"),this._transitionStarted())}),this._renderer.listen(e,"transitionend",i),this._renderer.listen(e,"transitioncancel",i)]})}_transitionStarted(){clearTimeout(this._fallbackTimer);let e=this._position==="center";this._beforeCentering.emit(e),e&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_transitionDone(){this._position==="center"?this._onCentered.emit():this._previousPosition==="center"&&this._afterLeavingCenter.emit()}_setActiveClass(e){this._elementRef.nativeElement.classList.toggle("mat-mdc-tab-body-active",e)}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_isCenterPosition(){return this._positionIndex===0}_computePositionAnimationState(e=this._getLayoutDirection()){this._previousPosition=this._position,this._positionIndex<0?this._position=e=="ltr"?"left":"right":this._positionIndex>0?this._position=e=="ltr"?"right":"left":this._position="center",this._animationsDisabled()?this._simulateTransitionEvents():this._initialized&&(this._position==="center"||this._previousPosition==="center")&&(clearTimeout(this._fallbackTimer),this._fallbackTimer=this._ngZone.runOutsideAngular(()=>setTimeout(()=>this._simulateTransitionEvents(),100)))}_simulateTransitionEvents(){this._transitionStarted(),_t(()=>this._transitionDone(),{injector:this._injector})}_animationsDisabled(){return this._diAnimationsDisabled||this.animationDuration==="0ms"||this.animationDuration==="0s"}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=Y({type:s,selectors:[["mat-tab-body"]],viewQuery:function(i,n){if(i&1&&(F(Ka,5),F(zh,5)),i&2){let o;E(o=D())&&(n._portalHost=o.first),E(o=D())&&(n._contentElement=o.first)}},hostAttrs:[1,"mat-mdc-tab-body"],hostVars:1,hostBindings:function(i,n){i&2&&Q("inert",n._position==="center"?null:"")},inputs:{_content:[0,"content","_content"],animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_onCentered:"_onCentered"},decls:3,vars:6,consts:[["content",""],["cdkScrollable","",1,"mat-mdc-tab-body-content"],["matTabBodyHost",""]],template:function(i,n){i&1&&(_(0,"div",1,0),nt(2,Lh,0,0,"ng-template",2),v()),i&2&&q("mat-tab-body-content-left",n._position==="left")("mat-tab-body-content-right",n._position==="right")("mat-tab-body-content-can-animate",n._position==="center"||n._previousPosition==="center")},dependencies:[Ka,hr],styles:[`.mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto;transform:none;visibility:hidden}.mat-tab-body-animating>.mat-mdc-tab-body-content,.mat-mdc-tab-body-active>.mat-mdc-tab-body-content{visibility:visible}.mat-tab-body-animating>.mat-mdc-tab-body-content{min-height:1px}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-tab-body-content-can-animate{transition:transform var(--mat-tab-animation-duration) 1ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable .mat-tab-body-content-can-animate{transition:none}.mat-tab-body-content-left{transform:translate3d(-100%, 0, 0)}.mat-tab-body-content-right{transform:translate3d(100%, 0, 0)}
`],encapsulation:2})}return s})(),tl=(()=>{class s{_elementRef=b(X);_changeDetectorRef=b(Nt);_ngZone=b(J);_tabsSubscription=U.EMPTY;_tabLabelSubscription=U.EMPTY;_tabBodySubscription=U.EMPTY;_diAnimationsDisabled=$t();_allTabs;_tabBodies;_tabBodyWrapper;_tabHeader;_tabs=new Ke;_indexToSelect=0;_lastFocusedTabIndex=null;_tabBodyWrapperHeight=0;color;get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(e){this._fitInkBarToContent=e,this._changeDetectorRef.markForCheck()}_fitInkBarToContent=!1;stretchTabs=!0;alignTabs=null;dynamicHeight=!1;get selectedIndex(){return this._selectedIndex}set selectedIndex(e){this._indexToSelect=isNaN(e)?null:e}_selectedIndex=null;headerPosition="above";get animationDuration(){return this._animationDuration}set animationDuration(e){let i=e+"";this._animationDuration=/^\d+$/.test(i)?e+"ms":i}_animationDuration;get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(e){this._contentTabIndex=isNaN(e)?null:e}_contentTabIndex;disablePagination=!1;disableRipple=!1;preserveContent=!1;get backgroundColor(){return this._backgroundColor}set backgroundColor(e){let i=this._elementRef.nativeElement.classList;i.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),e&&i.add("mat-tabs-with-background",`mat-background-${e}`),this._backgroundColor=e}_backgroundColor;ariaLabel;ariaLabelledby;selectedIndexChange=new O;focusChange=new O;animationDone=new O;selectedTabChange=new O(!0);_groupId;_isServer=!b(Ut).isBrowser;constructor(){let e=b(Jh,{optional:!0});this._groupId=b(he).getId("mat-tab-group-"),this.animationDuration=e&&e.animationDuration?e.animationDuration:"500ms",this.disablePagination=e&&e.disablePagination!=null?e.disablePagination:!1,this.dynamicHeight=e&&e.dynamicHeight!=null?e.dynamicHeight:!1,e?.contentTabIndex!=null&&(this.contentTabIndex=e.contentTabIndex),this.preserveContent=!!e?.preserveContent,this.fitInkBarToContent=e&&e.fitInkBarToContent!=null?e.fitInkBarToContent:!1,this.stretchTabs=e&&e.stretchTabs!=null?e.stretchTabs:!0,this.alignTabs=e&&e.alignTabs!=null?e.alignTabs:null}ngAfterContentChecked(){let e=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=e){let i=this._selectedIndex==null;if(!i){this.selectedTabChange.emit(this._createChangeEvent(e));let n=this._tabBodyWrapper.nativeElement;n.style.minHeight=n.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((n,o)=>n.isActive=o===e),i||(this.selectedIndexChange.emit(e),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((i,n)=>{i.position=n-e,this._selectedIndex!=null&&i.position==0&&!i.origin&&(i.origin=e-this._selectedIndex)}),this._selectedIndex!==e&&(this._selectedIndex=e,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{let e=this._clampTabIndex(this._indexToSelect);if(e===this._selectedIndex){let i=this._tabs.toArray(),n;for(let o=0;o<i.length;o++)if(i[o].isActive){this._indexToSelect=this._selectedIndex=o,this._lastFocusedTabIndex=null,n=i[o];break}!n&&i[e]&&Promise.resolve().then(()=>{i[e].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(e))})}this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._tabBodySubscription=this._tabBodies.changes.subscribe(()=>this._bodyCentered(!0))}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(Pt(this._allTabs)).subscribe(e=>{this._tabs.reset(e.filter(i=>i._closestTabGroup===this||!i._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe(),this._tabBodySubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(e){let i=this._tabHeader;i&&(i.focusIndex=e)}_focusChanged(e){this._lastFocusedTabIndex=e,this.focusChange.emit(this._createChangeEvent(e))}_createChangeEvent(e){let i=new ho;return i.index=e,this._tabs&&this._tabs.length&&(i.tab=this._tabs.toArray()[e]),i}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=Dt(...this._tabs.map(e=>e._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(e){return Math.min(this._tabs.length-1,Math.max(e||0,0))}_getTabLabelId(e,i){return e.id||`${this._groupId}-label-${i}`}_getTabContentId(e){return`${this._groupId}-content-${e}`}_setTabBodyWrapperHeight(e){if(!this.dynamicHeight||!this._tabBodyWrapperHeight){this._tabBodyWrapperHeight=e;return}let i=this._tabBodyWrapper.nativeElement;i.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(i.style.height=e+"px")}_removeTabBodyWrapperHeight(){let e=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=e.clientHeight,e.style.height="",this._ngZone.run(()=>this.animationDone.emit())}_handleClick(e,i,n){i.focusIndex=n,e.disabled||(this.selectedIndex=n)}_getTabIndex(e){let i=this._lastFocusedTabIndex??this.selectedIndex;return e===i?0:-1}_tabFocusChanged(e,i){e&&e!=="mouse"&&e!=="touch"&&(this._tabHeader.focusIndex=i)}_bodyCentered(e){e&&this._tabBodies?.forEach((i,n)=>i._setActiveClass(n===this._selectedIndex))}_animationsDisabled(){return this._diAnimationsDisabled||this.animationDuration==="0"||this.animationDuration==="0ms"}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=Y({type:s,selectors:[["mat-tab-group"]],contentQueries:function(i,n,o){if(i&1&&vt(o,uo,5),i&2){let r;E(r=D())&&(n._allTabs=r)}},viewQuery:function(i,n){if(i&1&&(F(Bh,5),F(Ah,5),F(lo,5)),i&2){let o;E(o=D())&&(n._tabBodyWrapper=o.first),E(o=D())&&(n._tabHeader=o.first),E(o=D())&&(n._tabBodies=o)}},hostAttrs:[1,"mat-mdc-tab-group"],hostVars:11,hostBindings:function(i,n){i&2&&(Q("mat-align-tabs",n.alignTabs),re("mat-"+(n.color||"primary")),Oo("--mat-tab-animation-duration",n.animationDuration),q("mat-mdc-tab-group-dynamic-height",n.dynamicHeight)("mat-mdc-tab-group-inverted-header",n.headerPosition==="below")("mat-mdc-tab-group-stretch-tabs",n.stretchTabs))},inputs:{color:"color",fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",N],stretchTabs:[2,"mat-stretch-tabs","stretchTabs",N],alignTabs:[0,"mat-align-tabs","alignTabs"],dynamicHeight:[2,"dynamicHeight","dynamicHeight",N],selectedIndex:[2,"selectedIndex","selectedIndex",ei],headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:[2,"contentTabIndex","contentTabIndex",ei],disablePagination:[2,"disablePagination","disablePagination",N],disableRipple:[2,"disableRipple","disableRipple",N],preserveContent:[2,"preserveContent","preserveContent",N],backgroundColor:"backgroundColor",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"]},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},exportAs:["matTabGroup"],features:[At([{provide:Za,useExisting:s}])],ngContentSelectors:co,decls:9,vars:8,consts:[["tabHeader",""],["tabBodyWrapper",""],["tabNode",""],[3,"indexFocused","selectFocusedIndex","selectedIndex","disableRipple","disablePagination","aria-label","aria-labelledby"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-focus-indicator",3,"id","mdc-tab--active","class","disabled","fitInkBarToContent"],[1,"mat-mdc-tab-body-wrapper"],["role","tabpanel",3,"id","class","content","position","animationDuration","preserveContent"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-focus-indicator",3,"click","cdkFocusChange","id","disabled","fitInkBarToContent"],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"_onCentered","_onCentering","_beforeCentering","id","content","position","animationDuration","preserveContent"]],template:function(i,n){if(i&1){let o=st();Wt(),_(0,"mat-tab-header",3,0),R("indexFocused",function(a){return M(o),x(n._focusChanged(a))})("selectFocusedIndex",function(a){return M(o),x(n.selectedIndex=a)}),fn(2,Hh,8,17,"div",4,mn),v(),Se(4,Yh,1,0),_(5,"div",5,1),fn(7,jh,1,10,"mat-tab-body",6,mn),v()}i&2&&(P("selectedIndex",n.selectedIndex||0)("disableRipple",n.disableRipple)("disablePagination",n.disablePagination)("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledby),w(2),pn(n._tabs),w(2),ke(n._isServer?4:-1),w(),q("_mat-animation-noopable",n._animationsDisabled()),w(2),pn(n._tabs))},dependencies:[Zh,Ja,qo,Te,Mn,lo],styles:[`.mdc-tab{min-width:90px;padding:0 24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;z-index:1;touch-action:manipulation}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab--active .mdc-tab__text-label{transition-delay:100ms}._mat-animation-noopable .mdc-tab__text-label{transition:none}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transition:var(--mat-tab-animation-duration, 250ms) transform cubic-bezier(0.4, 0, 0.2, 1);transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}._mat-animation-noopable .mdc-tab-indicator__content,.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mat-mdc-tab-ripple.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-decoration:none;background:none;height:var(--mat-tab-container-height, 48px);font-family:var(--mat-tab-label-text-font, var(--mat-sys-title-small-font));font-size:var(--mat-tab-label-text-size, var(--mat-sys-title-small-size));letter-spacing:var(--mat-tab-label-text-tracking, var(--mat-sys-title-small-tracking));line-height:var(--mat-tab-label-text-line-height, var(--mat-sys-title-small-line-height));font-weight:var(--mat-tab-label-text-weight, var(--mat-sys-title-small-weight))}.mat-mdc-tab.mdc-tab{flex-grow:0}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mat-tab-active-indicator-height, 2px);border-radius:var(--mat-tab-active-indicator-shape, 0)}.mat-mdc-tab:hover .mdc-tab__text-label{color:var(--mat-tab-inactive-hover-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-tab:focus .mdc-tab__text-label{color:var(--mat-tab-inactive-focus-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:var(--mat-tab-active-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-tab.mdc-tab--active .mdc-tab__ripple::before,.mat-mdc-tab.mdc-tab--active .mat-ripple-element{background-color:var(--mat-tab-active-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab__text-label{color:var(--mat-tab-active-hover-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-active-hover-indicator-color, var(--mat-sys-primary))}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab__text-label{color:var(--mat-tab-active-focus-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-active-focus-indicator-color, var(--mat-sys-primary))}.mat-mdc-tab.mat-mdc-tab-disabled{opacity:.4;pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__content{pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__ripple::before,.mat-mdc-tab.mat-mdc-tab-disabled .mat-ripple-element{background-color:var(--mat-tab-disabled-ripple-color, var(--mat-sys-on-surface-variant))}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none;background-color:var(--mat-tab-inactive-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-inactive-label-text-color, var(--mat-sys-on-surface));display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative;pointer-events:auto}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-inactive-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-tab-background-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mat-tab-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-focus-indicator::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-focus-indicator::before{border-color:var(--mat-tab-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-tab-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{color:var(--mat-tab-foreground-color)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}
`],encapsulation:2})}return s})(),ho=class{index;tab};var el=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275mod=Lt({type:s});static \u0275inj=Rt({imports:[ce,ce]})}return s})();var ec=["interactiveChart"];function ic(s,t){if(s&1&&(_(0,"div",26)(1,"h3"),S(2),v(),_(3,"ul",29)(4,"li")(5,"span"),S(6,"RSI (14)"),v(),_(7,"strong",30),S(8),ot(9,"number"),v()(),_(10,"li")(11,"span"),S(12,"ADX (14)"),v(),_(13,"strong",30),S(14),ot(15,"number"),v()()()()),s&2){let e=t.ngIf,i=I(2);w(2),ae("Key Indicator Values (",i.selectedTimeframe,")"),w(5),P("ngClass",i.getIndicatorClass(e.rsi,"rsi")),w(),Ct(Ft(9,5,e.rsi,"1.2-2")),w(5),P("ngClass",i.getIndicatorClass(e.adx,"adx")),w(),Ct(Ft(15,8,e.adx,"1.2-2"))}}function nc(s,t){if(s&1&&K(0,"app-signal-card",34),s&2){let e=t.$implicit;P("signal",e)}}function sc(s,t){if(s&1&&(_(0,"div",32),nt(1,nc,1,1,"app-signal-card",33),v()),s&2){let e=I().ngIf;w(),P("ngForOf",e)}}function oc(s,t){s&1&&(_(0,"div",35),S(1,"No active signals found for this timeframe."),v())}function rc(s,t){if(s&1&&(Do(0),nt(1,sc,2,1,"div",31)(2,oc,2,0,"ng-template",null,3,ti),Po()),s&2){let e=t.ngIf,i=yt(3);w(),P("ngIf",e.length>0)("ngIfElse",i)}}function ac(s,t){s&1&&(_(0,"div",35),K(1,"mat-spinner",36),v())}function lc(s,t){if(s&1){let e=st();_(0,"div",5)(1,"header",6)(2,"div",7)(3,"a",8)(4,"mat-icon"),S(5,"arrow_back"),v()(),K(6,"img",9),_(7,"div",10)(8,"h1"),S(9),v(),_(10,"h2"),S(11),v()()(),_(12,"div",11)(13,"div",12),S(14),ot(15,"number"),v(),_(16,"div",13),S(17),ot(18,"number"),v()(),_(19,"div",14)(20,"div",15)(21,"span"),S(22,"24h High"),v(),S(23),ot(24,"number"),v(),_(25,"div",15)(26,"span"),S(27,"24h Low"),v(),S(28),ot(29,"number"),v(),_(30,"div",15)(31,"span"),S(32,"24h Volume"),v(),S(33),ot(34,"number"),v()()(),_(35,"main",16)(36,"section",17)(37,"app-chart-control-bar",18),R("timeframeChanged",function(n){M(e);let o=I();return x(o.onTimeframeChanged(n))})("indicatorToggled",function(n){M(e);let o=I();return x(o.onIndicatorToggle(n))}),v(),_(38,"div",19),K(39,"app-interactive-chart",20,1),v()(),_(41,"aside",21)(42,"mat-tab-group",22)(43,"mat-tab",23),nt(44,ic,16,11,"div",24),ot(45,"async"),v(),_(46,"mat-tab",25)(47,"div",26)(48,"h3"),S(49),v(),_(50,"div",27),nt(51,rc,4,2,"ng-container",28),ot(52,"async"),nt(53,ac,2,0,"ng-template",null,2,ti),v()()()()()()()}if(s&2){let e=t.ngIf,i=yt(54),n=I();w(6),P("src","https://s2.coinmarketcap.com/static/img/coins/64x64/"+e.id+".png",So),w(3),Ct(e.name),w(2),ae("",e.symbol.replace("USDT","")," / USDT"),w(3),Ct(Ft(15,15,e.lastPrice,"1.2-5")),w(2),P("ngClass",e.priceChangePercent>=0?"positive":"negative"),w(),ae(" ",Ft(18,18,e.priceChangePercent,"1.2-2"),"% (24h) "),w(6),Ct(Ft(24,21,e.highPrice,"1.2-4")),w(5),Ct(Ft(29,24,e.lowPrice,"1.2-4")),w(5),ae("",Ft(34,27,e.quoteVolume,"1.2-2"),"M"),w(6),P("symbol",e.symbol)("timeframe",n.selectedTimeframe),w(5),P("ngIf",Je(45,30,n.indicatorData$)),w(5),ae("Live Signals (",n.selectedTimeframe,")"),w(2),P("ngIf",Je(52,32,n.liveSignals$))("ngIfElse",i)}}function hc(s,t){s&1&&(_(0,"div",37),K(1,"mat-spinner"),_(2,"p"),S(3,"Loading Coin Data..."),v()())}var il=class s{constructor(t,e,i,n){this.route=t;this.apiService=e;this.indicatorService=i;this.signalEngine=n}chartComponent;symbol$;coinData$;indicatorData$;liveSignals$;timeframeSubject=new ln("1h");selectedTimeframe$=this.timeframeSubject.asObservable();get selectedTimeframe(){return this.timeframeSubject.value}ngOnInit(){this.symbol$=this.route.params.pipe(it(e=>e.symbol));let t=hn([this.symbol$,this.selectedTimeframe$]);this.coinData$=this.symbol$.pipe(gt(e=>this.apiService.get24hrTicker().pipe(it(i=>{let n=i.find(o=>o.symbol===e);return se(pt({},n),{id:1,name:e.replace("USDT","")})})))),this.indicatorData$=hn([this.symbol$,this.selectedTimeframe$]).pipe(gt(([e,i])=>this.indicatorService.calculateIndicators(e,i)),it(e=>e?{rsi:e.rsi[e.rsi.length-2],adx:e.adx[e.adx.length-2]}:null)),this.liveSignals$=t.pipe(gt(([e,i])=>this.signalEngine.analyzeSymbol(e,i)),it(e=>e.sort((i,n)=>n.confidence-i.confidence)))}onTimeframeChanged(t){this.timeframeSubject.next(t)}onIndicatorToggle(t){this.chartComponent&&this.chartComponent.toggleIndicator(t)}getIndicatorClass(t,e){if(e==="rsi"){if(t>70)return"negative";if(t<30)return"positive"}return e==="adx"&&t>25?"positive":""}static \u0275fac=function(e){return new(e||s)(Ot(Wo),Ot(ci),Ot(di),Ot(mr))};static \u0275cmp=Y({type:s,selectors:[["app-coin-detail"]],viewQuery:function(e,i){if(e&1&&F(ec,5),e&2){let n;E(n=D())&&(i.chartComponent=n.first)}},decls:4,vars:4,consts:[["loading",""],["interactiveChart",""],["loadingSignals",""],["noSignals",""],["class","redefined-detail-page",4,"ngIf","ngIfElse"],[1,"redefined-detail-page"],[1,"coin-hud"],[1,"identity"],["routerLink","/dashboard","mat-icon-button","",1,"back-link"],["alt","",1,"coin-logo",3,"src"],[1,"name-stack"],[1,"price-info"],[1,"current-price"],[1,"price-change",3,"ngClass"],[1,"stats-row"],[1,"stat-item"],[1,"content-grid"],[1,"chart-panel"],[3,"timeframeChanged","indicatorToggled"],[1,"chart-wrapper"],[3,"symbol","timeframe"],[1,"analysis-panel"],["animationDuration","0ms","mat-stretch-tabs","false"],["label","Analytical Data"],["class","data-section",4,"ngIf"],["label","Signal Log"],[1,"data-section"],[1,"signal-log-container"],[4,"ngIf","ngIfElse"],[1,"indicator-list"],[3,"ngClass"],["class","signal-list",4,"ngIf","ngIfElse"],[1,"signal-list"],[3,"signal",4,"ngFor","ngForOf"],[3,"signal"],[1,"placeholder"],["diameter","40"],[1,"full-page-loader"]],template:function(e,i){if(e&1&&(nt(0,lc,55,34,"div",4),ot(1,"async"),nt(2,hc,4,0,"ng-template",null,0,ti)),e&2){let n=yt(3);P("ngIf",Je(1,2,i.coinData$))("ngIfElse",n)}},dependencies:[le,No,Vo,Ho,Uo,el,uo,tl,ur,dr,li,ai,ri,ir,Mi,en,lr,Yo,jo],styles:["[_nghost-%COMP%]{--positive: #26a69a;--negative: #ef5350;--neutral: #ffc107}.redefined-detail-page[_ngcontent-%COMP%]{padding:16px;max-width:1800px;margin:0 auto}.coin-hud[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto auto;align-items:center;gap:24px;padding:16px;background:#1e1e1eb3;border:1px solid rgba(255,255,255,.1);border-radius:12px;margin-bottom:24px}.coin-hud[_ngcontent-%COMP%]   .identity[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.coin-hud[_ngcontent-%COMP%]   .identity[_ngcontent-%COMP%]   .coin-logo[_ngcontent-%COMP%]{width:48px;height:48px}.coin-hud[_ngcontent-%COMP%]   .identity[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;font-weight:600}.coin-hud[_ngcontent-%COMP%]   .identity[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1rem;opacity:.6}.coin-hud[_ngcontent-%COMP%]   .price-info[_ngcontent-%COMP%]{text-align:right}.coin-hud[_ngcontent-%COMP%]   .price-info[_ngcontent-%COMP%]   .current-price[_ngcontent-%COMP%]{font-size:2rem;font-weight:700}.coin-hud[_ngcontent-%COMP%]   .price-info[_ngcontent-%COMP%]   .price-change[_ngcontent-%COMP%]{font-size:1rem}.coin-hud[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]{display:flex;gap:20px}.coin-hud[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:1.1rem}.coin-hud[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem;opacity:.6;margin-bottom:4px}.positive[_ngcontent-%COMP%]{color:var(--positive)}.negative[_ngcontent-%COMP%]{color:var(--negative)}.content-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:2.5fr 1fr;gap:24px}.chart-wrapper[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden}.analysis-panel[_ngcontent-%COMP%]{background-color:#1e1e1e;border-radius:8px;padding:0 16px 16px}.data-section[_ngcontent-%COMP%]{padding-top:24px}.data-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-weight:500}.data-section[_ngcontent-%COMP%]   .indicator-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.data-section[_ngcontent-%COMP%]   .indicator-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px 4px;border-bottom:1px solid rgba(255,255,255,.05)}.data-section[_ngcontent-%COMP%]   .indicator-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:.7}.full-page-loader[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:80vh;gap:16px}.placeholder[_ngcontent-%COMP%]{text-align:center;color:#ffffff80;padding:20px}.signal-log-container[_ngcontent-%COMP%]{max-height:500px;overflow-y:auto;padding-right:8px}.signal-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}"]})};export{il as CoinDetailComponent};
